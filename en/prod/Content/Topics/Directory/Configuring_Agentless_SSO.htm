<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Documentation|Product documentation|Directory Integrations|[%=System.LinkedHeader%]|[%=System.LinkedTitle%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Configure Agentless Desktop SSO to prevent unnecessary SSO downtime and reduce server monitoring and maintenance by handling Kerberos validation." /><title>Configure a new Agentless Desktop Single Sign-on  implementation | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-TJ45R6');
			/* ]]> */
		</script>
        <!-- End Google Tag Manager -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/okta-main.css" rel="stylesheet" />
        <link href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="okta-coveo-configOrgId">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="okta-coveo-configPlatformRestUri">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="okta-coveo-configSearchPageUrl">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="okta-coveo-configSearchTokenServiceUrl">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************************* Coveo Search bar ************************************* -->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Left Nav Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="1n0NdjEux0eA8ed2ggqnWA">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="1n0NdjEux0eA8ed2ggqnWA:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_left_menu mc-component" data-mc-linked-toc="Data/Tocs/left_nav_TOC.js" data-mc-side-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- *** Col2: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">  </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="toolbar-main">
                                                <!-- Expand/Collapse All for drop-downs -->
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <h1>Configure a new Agentless Desktop Single Sign-on  implementation</h1>
                                                <p>With agentless Desktop Single Sign-on (DSSO), you don't need to deploy IWA agents in your <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Active Directory<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Active Directory (AD) is a directory service that Microsoft developed for the Windows domain networks. It is included in most Windows Server operating systems as a set of processes and services. Initially, Active Directory was only in charge of centralized domain management.</span></a> domains to implement DSSO functionality. This reduces or eliminates the maintenance overhead and provides high availability as <span class="okta-variablesProductName">Okta</span> assumes responsibility for <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ #text">Kerberos<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Kerberos is a computer-network authentication protocol that works on the basis of tickets to allow nodes communicating over a non-secure network to prove their identity to one another in a secure manner.</span></a> validation. </p>
                                                <p>This diagram illustrates the <span class="okta-variablesProductName">Okta</span> agentless DSSO workflow:</p>
                                                <p>
                                                    <img src="../../Resources/Images/SSO_agentless.png" data-mc-target-name="SSO_agentless" />
                                                </p>
                                                <h2>Prerequisites</h2>
                                                <ul>
                                                    <li value="1">You have an Active Directory <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">domain<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A domain is an attribute of an Okta organization. Okta uses a fully-qualified domain name, meaning it always includes the top-level domain (.com, .eu, etc.), but does not include the protocol (https).</span></a> (or multiple domains) integrated with your Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>The Okta container that represents a real-world organization.</span></a>.</li>
                                                    <li value="2">You have permissions in Active Directory to configure a Service Principal Name (SPN). For more info on permissions, see Delegating Authority to Modify SPNs at the following URL:&#160;<a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc731241(v=ws.11)">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc731241(v=ws.11).</a></li>
                                                    <li value="3">If you are using a custom URL:<ul><li value="1"><b>Agents</b> – Use the actual domain (<i>example</i>.okta.com) and not the custom domain (<i>example</i>.<i>customname</i>.com). </li><li value="2"><b>IWA <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">SSO<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for single sign-on. In a SSO system, a user logs in once to the system and can access multiple systems without being prompted to sign in for each one. Okta is a cloud-based SSO platform that allows users to enter one name and password to access multiple applications. Users can access all of their web applications, both behind the firewall and in the cloud, with a single sign in. Okta provides a seamless experience across PCs, laptops, tablets, and smartphones.</span></a></b> – Modify the <span style="font-family: 'Courier New';">web.config</span> file to include the custom url. <p style="font-family: 'Courier New';font-size: 11pt;">&lt;oktaSSOConfigGroup&gt;</p><p style="font-family: 'Courier New';font-size: 11pt;">&lt;oktaSSOConfig orgOktaAuthenticationURL="https://example.customname.com/login/sso_iwa_auth"</p><p style="font-family: 'Courier New';font-size: 11pt;">orgBackupOktaAuthenticationURL="https://example.customname.com/login/default"</p><p style="font-family: 'Courier New';font-size: 11pt;">oktaSSOWebAp<span style="font-size: 11pt;">pVersion="1.11.5.0"&gt;</span></p></li></ul></li>
                                                </ul>
                                                <ul>
                                                    <li value="1">To use AES128/256 encryption with agentless DSSO or MS <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">App<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of application. Essentially, it is a web-based site used to perform any number of specific tasks, and requires authentication from end users by signing in.</span></a> silent activation, you must enable AES for both the AD domain as well as the service account for Okta DSSO. If it isn't enabled for the AD domain, the Kerberos error <span style="font-family: 'Courier New';">KDC_ERR_ETYPE_NOTSUPP</span> appears in the Kerberos events log.  <p>To enable encryption, see <a href="https://blogs.msdn.microsoft.com/openspecification/2011/05/30/windows-configurations-for-kerberos-supported-encryption-type/">Windows Configurations for Kerberos Supported Encryption Type</a>.</p></li>
                                                    <li value="2">Make sure that all  sign-in flows and browser bookmarks use the correct URL.</li>
                                                    <li value="3">You need a service account. For this service account:<ul><li value="1">A domain user account is recommended, for the Okta tenant Kerberos service, instead of a domain <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">admin<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of administrator. This is the individual(s) who have access to the Okta Administrator Dashboard. They control the provisioning and deprovisioning of end users, the assigning of apps, the resetting of passwords, and the overall end user experience. Only administrators have the Administration button on the upper right side of the My Applications page.</span></a> account as a security best practice.</li><li value="2">To further lock down the account, the <b>logon to</b> restriction can be turned on with a fictitious host name, and the account can be marked as <b>Account is sensitive and cannot be delegated</b>. This is also for security reasons.</li></ul></li>
                                                </ul>
                                                <h2>Known issues</h2>
                                                <ul>
                                                    <li value="1">Agentless DSSO doe not work if a single user has memberships to more than 600 security <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">groups<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Groups allow you to organize your end users and the apps they can access. Assigning apps to large sets of end users is made easier with groups.</span></a>. If an end user tries to go through the Agentless DSSO flow and has more than 600 security groups, they will see a 400 response and be redirected to the regular sign in page.
</li>
                                                    <li value="2">If you are using Windows functional level 2008 or below, be aware that it uses a less secure encryption RC4. We recommend that you upgrade to at least Windows functional level 2008 or above to use the most secure encryption algorithm.</li>
                                                    <li value="3">When re-enabling Agentless DSSO, Identity Provider (<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">IDP<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for Identity Provider. It is a service that manages end user accounts analogous to user directories such as LDAP and Active Directory, and can send SAML responses to SPs to authenticate end users. Within this scenario, the IdP is Okta.</span></a>) routing rules must be manually reactivated.</li>
                                                    <li value="4">Agentless DSSO does not work when delegated authentication is disabled and <b>Don't create Okta password</b> is selected. To learn more about delegated authentication, see <a href="../Security/Security_Authentication.htm">Delegated authentication</a>.</li>
                                                </ul>
                                                <h2>Just-in-Time provisioning</h2>
                                                <p>When you implement on premises or agentless Desktop Single Sign-on (DSSO) in your environment, this is the process flow  when users are imported using Just-in-Time (JIT) provisioning: </p>
                                                <ul>
                                                    <li value="1">For on premises DSSO, IWA sends <span class="okta-variablesProductName">Okta</span> the Universal Principal Name (<b>UPN</b>). <span class="okta-variablesProductName">Okta</span> uses the UPN to locate a user. <span class="okta-variablesProductName">Okta</span> does not perform user authentication  because Kerberos validation is  done on the IIS side.</li>
                                                    <li value="2">
                                                        <p>For agentless DSSO, the web browser sends the Kerberos ticket to <span class="okta-variablesProductName">Okta</span>, and relies on the AD&#160;<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">agent<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A software agent is a lightweight program that runs as a service outside of Okta. It is typically installed behind a firewall and allows Okta to tunnel communication between an on-premises service and Okta's cloud service. Okta employs several agent types: Active Directory, LDAP, RADIUS, RSA, Active Directory Password Sync, and IWA. For example, users can install multiple Active Directory agents to ensure that the integration is robust and highly available across geographic locations.</span></a> to look up the UPN.  Kerberos validation is  done in the cloud in <span class="okta-variablesProductName">Okta</span>.</p>
                                                    </li>
                                                </ul>
                                                <p>When a user signs in using DSSO:</p>
                                                <ul>
                                                    <li value="1"><b>If their information is already imported and active in <span class="okta-variablesProductName">Okta</span></b>:&#160;<span class="okta-variablesProductName">Okta</span> uses the UPN&#160;to look up the user. If&#160;<span class="okta-variablesProductName">Okta</span> finds the user, the profile reloads from Active Directory (AD) and the user signs in successfully.</li>
                                                    <li value="2"><b>If their information has been imported but is not yet active in <span class="okta-variablesProductName">Okta</span></b>:&#160;<span class="okta-variablesProductName">Okta</span> uses the UPN&#160;to look up the user. If <span class="okta-variablesProductName">Okta</span> finds the user, the user profile loads from AD, the user is activated, and the user signs in successfully.</li>
                                                    <li value="3"><b>If their information has not been imported into <span class="okta-variablesProductName">Okta</span> and JIT is enabled</b>:&#160;<span class="okta-variablesProductName">Okta</span> can only validate the user by the UPN. So the <span class="okta-variablesProductName">Okta</span> user name format must be the UPN in order for the user to be successfully imported with JIT enabled. If the user name format is something other than the UPN, for example the email address or SamAccountName, the search cannot locate the user. </li>
                                                    <li value="4"><b>If the their information has not been imported into <span class="okta-variablesProductName">Okta</span> and JIT&#160;is off</b>:&#160;Sign in fails.</li>
                                                </ul>
                                                <hr width="100%" size="0" align="center" />
                                                <h2><a name="SSOAgentlessPrincName"></a>Create a service account and configure a Service Principal Name</h2>
                                                <p>In order for Okta to negotiate Kerberos authentication for agentless DSSO, you  need to create a new service account and set a Service Principal Name (SPN) for that service account.</p>
                                                <ol>
                                                    <li value="1">Sign in to a server from which you can access <b>Active Directory Users and Computers</b>.</li>
                                                    <li value="2">Create a new account with the following properties. The service account itself does not need admin permissions, but you will need specific permissions to set an SPN as mentioned in <a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc731241(v=ws.11)">Delegating Authority to Modify SPNs</a><p>User logon name: &lt;username&gt;<br />User logon name (pre-Windows 2000) :&#160; &lt;username&gt; <br />where &lt;username&gt; is any username of your choice.</p></li>
                                                    <li value="3">
                                                        <p>Select a password and set to <b>Password never expires</b>.</p>
                                                    </li>
                                                    <li value="4">
                                                        <p>In a command window configure an SPN for the service account using the following syntax:</p>
                                                        <ul>
                                                            <li value="1">
                                                                <p><code>setspn -S HTTP/<i>&lt;<i>myorg</i>&gt;.<b>kerberos</b>.&lt;okta|oktapreview|okta-emea&gt;.com</i> &lt;ServiceAccountName&gt;</code>&gt;</p>
                                                                <p>Where  HTTP/<i>&lt;<i>myorg</i>&gt;.kerberos.okta.com</i> is the SPN. &lt;ServiceAccountName&gt; is the value you used when configuring the <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ #text">Early Access<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Early Access (EA) features are opt-in features that you can try out in your org by asking Okta Support to enable them. Additionally, the Features page in the Okta Admin Console (Settings &gt; Features) allows Super Admins to enable and disable some EA features themselves.</span></a>&#160;version of Agentless DSSO and &lt;oktaorg&gt; is your Okta org (either oktapreview, okta-emea or okta). For example, <code>setspn -S HTTP/<i>atko.kerberos.oktapreview.com</i> atkospnadmin</code>.</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ol>
                                                <h2><a name="ConfigWin"></a>Configure browsers for agentless DSSO on Windows</h2>
                                                <p>Agentless DSSO is supported on Windows using Chrome, Chromium versions of Microsoft Edge, and Internet Explorer. Firefox and previous versions of Microsoft Edge are not supported.</p>
                                                <p>There are three main steps involved in configuring the browsers on Windows: </p>
                                                <ul>
                                                    <li value="1">Enabling IWA on the browsers. </li>
                                                    <li value="2">Adding Okta to the local intranet  in Internet Explorer (IE). The Okta URLs must include <i>https://&lt;myorg&gt;.</i><b style="font-style: italic;">kerberos</b><i>.okta.com</i>.</li>
                                                    <li value="3">Creating a GPO to apply these setting across all our <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">client<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Essentially, a client is anything that talks to the Okta service. Within the traditional client-server model, Okta is the server. The client might be an agent, an Okta mobile app, or a browser plugin. </span></a> machines. </li>
                                                </ul>
                                                <ol>
                                                    <li value="1">Enable IWA on the browsers:<ol style="list-style-type: lower-alpha;"><li value="1">In Internet Explorer select <b>Tools &gt; Internet Options</b>.</li><li value="2">Click the <b>Advanced</b> tab, scroll down to the <b>Security</b> settings, and select <b>Enable Integrated Windows <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Authentication<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Authentication is distinct from authorization, which is the process of giving individuals access to system objects based on their identity. Authentication merely ensures that the individual is who he or she claims to be, but says nothing about the access rights of the individual.

Authentication methods and protocols include direct auth, delegated auth, SAML, SWA, WS-Fed, and OpenID Connect.</span></a></b>.</li><li value="3">Click <b>OK</b>.</li></ol><p><b>Note</b>: Make sure that Internet Explorer can save session cookies <b>(Internet Options &gt; Privacy tab</b>). If it cannot, neither SSO nor standard sign in can work.</p></li>
                                                    <li value="2"> Configure the Local Intranet Zone to trust Okta:<ol style="list-style-type: lower-alpha;"><li value="1"> In IE, open <b>Options &gt; Security</b>.</li><li value="2">Click <b>Local Intranet &gt; Sites &gt; Advanced</b> and add the URL for your 	Okta org as configured in earlier steps. For example:&#160;https://&lt;myorg&gt;.<b>kerberos</b>.okta.com.</li><li value="3">Click <b>Close</b> and <b>OK</b> on the other configuration options.</li></ol></li>
                                                    <li value="3">Create a GPO to roll this out to all client machines that will use agentless DSSO.</li>
                                                </ol>
                                                <h2><a name="ConfigMac"></a>Configure browsers for agentless DSSO on Mac</h2>
                                                <p>Agentless DSSO is supported on Macs using Safari and Firefox. Chrome is not supported.</p>
                                                <p>DSSO is enabled automatically in Safari on OS/X.&#160;Make sure that the macOS&#160;host is a Windows domain member. For how to&#160;add your Macintosh OS/X host to a Windows domain, see <a href="https://support.apple.com/guide/mac-help/join-your-mac-to-a-network-account-server-mh27627/mac" target="_blank">macOS Sierra: Join your Mac to a network account server</a>.</p>
                                                <h2><a name="Enable"></a>Enable agentless DSSO
		</h2>
                                                <ol>
                                                    <li value="1">On the Okta Admin Console, click <b>Security &gt; Delegated Authentication</b>.                    </li>
                                                    <li value="2">Scroll to <b>Agentless Desktop SSO</b>. </li>
                                                    <li value="3">Click <b>Edit</b> and select a DSSO mode:<ul><li value="1">Off</li><li value="2">Test  —  allows you to test DSSO by signing in using the direct agentless DSSO endpoint URL: https://&lt;<i>myorg</i>&gt;.okta.com/login/agentlessDsso.</li><li value="3">On  — For enabling SSO in Production.  Allows <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">end users<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>End users are people in your org without administrative control. They can authenticate into apps from the icons on their My Applications home page, but they are provisioned, deprovisioned, assigned, and managed by admins.</span></a> to sign in from the default sign in endpoint, routing through the agentless DSSO sign in endpoint. The end user doesn't need to explicitly type in the DSSO&#160;URL</li></ul></li>
                                                    <li value="4">For <b>Allowed network zones</b>, add the zones that are associated with the machines from which you will be implementing agentless DSSO.
<p><b>Note</b>: If IdP Discovery is turned on, the network zone options will not be available. When IdP&#160;Discovery and agentless DSSO are both on, agentless DSSO network zones are controlled through the IdP Routing Rules. You will update the default IdP routing rule in <a href="#routing" class="MCXref xref" xrefformat="{para}">Update the default DSSO Identity Provider routing rule
			</a>.</p></li>
                                                    <li value="5">In <b>AD Instances</b>, select the Active Directory instance on which you configured the SPN.
                    </li>
                                                    <li value="6">Complete these fields to configure agentless DSSO for the selected Active Directory domain:
						<ul><li value="1"><p><b>Desktop SSO</b> — Select <b>Enabled</b> or <b>Disabled</b> depending on whether you are enabling for production or testing.</p></li><li value="2"><p><b>Service account username</b> — This is the AD sign-on name that you created in <a href="#SSOAgentlessPrincName" class="MCXref xref" xrefformat="{para}">Create a service account and configure a Service Principal Name</a>, without any domain suffix or Netbios name prefix. It can be the sAMAccountName or the username part of the UPN. These two may be the same string unless the Org admin chose to use different values.</p><p>This field is case sensitive. When the UPN prefix differs from sAMAccountName, the service account username needs to be the same as the UPN and include the domain suffix. For example, agentlessDsso@mydomain.com.</p></li><li value="3"><p><b>Service account password</b> — Password for the account that you created in AD.</p></li><li value="4"><b>Validate service account credential on save</b>  — Optional. Validates the service account credentials as an optional step in saving the Kerberos realm configuration. If it's checked, the service account will be authenticated by the AD agent. If the credentials cannot be validated, an error message appears. If you don't want to validate or can't because the AD agent isn't responsive, the box can be unchecked to skip the validation.</li></ul></li>
                                                    <li value="7">Click <b>Save</b>.</li>
                                                </ol>
                                                <h2><a name="routing"></a>Update the default DSSO Identity Provider routing rule
			</h2>
                                                <p>To complete this step you must already have an Identity Provider configuration. </p>
                                                <p>After you turn on Desktop SSO, a default DSSO routing rule is created. You must configure the network information for this rule.				</p>
                                                <ol>
                                                    <li value="1">On the Okta Admin Console, click <b>Security &gt;&#160;Identity Providers &gt;&#160;Routing Rules</b>.</li>
                                                    <li value="2">Select the <b>Default Route to AgentlessDSSO</b> rule. By default the network information is not configured and the rule is <b>Inactive</b>.</li>
                                                    <li value="3">Click <b>Edit</b>.</li>
                                                    <li value="4">Complete these fields:<ul><li value="1"><b>User's IP&#160;is</b>:&#160;Select <b>Anywhere</b> to apply the rule to any user location, select <b>In zone</b> to apply the rule to a specific zone, or select <b>Not in zone</b> to apply the rule to users outside of a specific zone. For information on zones, see <a href="../Security/Security_Network.htm#IPZones">IP Zones</a>.</li><li value="2"><b>User's device platform is</b>:&#160;Select <b>Any device</b> to apply the rule to users with any device type, or to apply the rule to users with specific devices, select <b>Any of these devices</b> and select specific devices.</li><li value="3"><b>User is accessing</b>: Select <b>Any application</b> to apply the rule when a user accesses any application, or to apply the rule when a user accesses specific applications, select <b>Any of the following applications</b> and enter an application name.</li><li value="4"><b>Use this identity provider</b>: Select&#160;<b>AgentlessDSSO</b>.</li></ul></li>
                                                    <li value="5">Click <b>Update Rule</b> to save your changes.</li>
                                                    <li value="6">Click <b>Inactive</b>, <b>Activate</b>, and then <b>Activate</b> in the <b>Activate Rule</b> dialog box to activate the rule.</li>
                                                </ol>
                                                <h2><a name="Validate"></a>Validate agentless DSSO
			</h2>
                                                <p>After configuring agentless DSSO, you can verify that everything is correctly configured.				</p>
                                                <ol>
                                                    <li value="1">Sign in to a domain-joined, on-network device that is joined to the Active Directory environment on which you have enabled Agentless Desktop SSO.  Ensure that you are logged in as a user that is already active in Okta.</li>
                                                    <li value="2">If you haven’t already, add your Okta environment to your Local Intranet settings.<ol style="list-style-type: lower-alpha;"><li value="1">In a browser, open <b>Options &gt; Security</b>.</li><li value="2">Click <b>Local Intranet &gt;&#160;Sites &gt;&#160;Advanced</b> and add the URL for your Okta org as configured in earlier steps. For example, https://&lt;<i>myorg</i>&gt;.kerberos.okta.com.</li><li value="3">Click <b>Close</b> and <b>OK</b> on the other configuration options.</li></ol></li>
                                                    <li value="3">On a Windows machine, sign into your Okta org. If agentless DSSO is configured correctly, you will be automatically redirected to your end user apps dashboard without entering any credentials.<br /></li>
                                                    <li value="4">Verify in the system log that the user authenticated through Agentless Desktop SSO. In your Okta org, you will see an entry for <i>Authenticate user via IWA</i> with no entries referring to an on-prem IWA server.</li>
                                                </ol>
                                                <hr width="100%" size="0" align="center" />
                                                <h2>Optional procedures</h2>
                                                <h3><a name="Testing"></a>Test agentless DSSO</h3>
                                                <p>Okta recommends that you test the agentless DSSO changes  before implementing widespread changes to your org. </p>
                                                <ol>
                                                    <li value="1"><a href="#SSOAgentlessPrincName" class="MCXref xref" xrefformat="{para}">Create a service account and configure a Service Principal Name</a>
                                                    </li>
                                                    <li value="2"> <a href="#ConfigWin" class="MCXref xref" xrefformat="{para}">Configure browsers for agentless DSSO on Windows</a> or <a href="#ConfigMac" class="MCXref xref" xrefformat="{para}">Configure browsers for agentless DSSO on Mac</a>.</li>
                                                    <li value="3"><a href="#Enable" class="MCXref xref" xrefformat="{para}">Enable agentless DSSO
		</a>  in <b>test</b> mode
                    </li>
                                                    <li value="4">Optional. Enable Kerberos event logging. For more information, see <a href="https://support.microsoft.com/en-us/help/262177/how-to-enable-kerberos-event-logging">https://support.microsoft.com/en-us/help/262177/how-to-enable-kerberos-event-logging</a>.</li>
                                                    <li value="5"><a href="#Validate" class="MCXref xref" xrefformat="{para}">Validate agentless DSSO
			</a> 
						by signing in using the direct Agentless DSSO endpoint URL:<br /> https://&lt;<i>myorg</i>&gt;.okta.com/login/agentlessDsso
</li>
                                                </ol>
                                                <p>If agentless DSSO&#160;is configured correctly, you can sign in without being prompted for credentials. If you experience problems signing in, make sureyou have completed all of the implementation procedures.                    </p>
                                                <h3><a name="Configur2"></a>Configure DSSO&#160;fail over</h3>
                                                <p>There are two fail over options:</p>
                                                <ul>
                                                    <li value="1">Okta will automatically fail over to the default sign-in page.</li>
                                                    <li value="2">You can use on-prem IWA&#160;DSSO as a backup.</li>
                                                </ul>
                                                <p>Choosing to fail over to on-prem IWA&#160;DSSO, requires you to install and configure the on-prem IWA&#160;DSSO. If on-prem IWA DSSO is configured and enabled, it will automatically take over if Agentless DSSO stops working. For details, see <a href="Configuring_Desktop_SSO.htm" class="MCXref xref" xrefformat="{para}">Install and configure the Okta IWA&#160;Web agent for Desktop Single Sign-on</a>.</p>
                                                <h3><a name="RollbackRegKey"></a>Revert Registry Key changes</h3>
                                                <p>If you have trouble after enabling the registry changes you can revert the registry key changes.</p>
                                                <p>To revert the registry settings using the GPO, edit the previously added registry keys changing the action item  from <b>Create</b> to <b>Delete</b>.</p>
                                                <hr width="100%" size="0" align="center" />
                                                <h2>Related topics</h2>
                                                <p><a href="Configuring_Desktop_SSO.htm">Install and configure the Okta IWA&#160;Web agent for Desktop Single Sign-on</a>
                                                </p>
                                                <p><a href="../Security/Security_Network.htm" class="MCXref xref" xrefformat="{para}">Network Security</a>
                                                </p>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                        <!-- *** Col3: Right menu Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="Xw_Low1ptUSsDQSXZDHZjw">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="Xw_Low1ptUSsDQSXZDHZjw:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_right_menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/okta_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="False" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ***************************** Footer rows ********************************* -->
                                    <div class="footer-temp">
                                        <div class="is-not-in-mobile">
                                            <p> </p>
                                        </div>
                                        <div>
                                            <p class="copyright">©  <span class="okta-variablesYear">2020</span> <span class="okta-variablesCompanyName">Okta, Inc</span> All Rights Reserved. Various trademarks held by their respective owners.</p>
                                        </div>
                                    </div>
                                    <!-- ***************************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Ours -->
                                    <script type="text/javascript" src="../../Resources/Scripts/back-to-top.js">
                                    </script>
                                    <script type="text/javascript" src="../../Resources/Scripts/get-feedback.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>