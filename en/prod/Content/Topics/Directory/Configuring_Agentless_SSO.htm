<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <head>
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Configure Agentless Desktop SSO</title>
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <script>/* <![CDATA[ */
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-15777010-10', 'auto');
			ga('send', 'pageview');

		/* ]]> */</script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/okta-main.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div>
                        <nav class="title-bar tab-bar" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../ReleaseNotes/okta-relnotes.htm" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <div class="LeftRightTopRow">
                                    <div>
                                        <div class="is-not-in-mobile">
                                        </div>
                                        <div class="toolbar-main">
                                            <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                <div class="button-group-container-left">
                                                    <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                        <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <p />
                                    </div>
                                </div>
                                <div class="LeftRightMenu">
                                    <div>
                                        <div class="body-main">
                                            <p class="earlyaccess">This is an <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ #text">Early Access<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Early Access (EA) features are opt-in features that you can try out in your org by asking Okta Support to enable them. Additionally, the Features page in the Okta Admin Console (Settings &amp;gt; Features) allows Super Admins to enable and disable some EA features themselves.</span></a> feature. To enable it, please contact <a href="https://support.okta.com/">Okta Support</a>.</p>
                                            <h1><a name="aanchor3"></a>
                                                <MadCap:concept term="dir-intg" />Configure Agentless Desktop SSO</h1>
                                            <hr width="100%" size="0" align="center" />
                                            <p>Desktop <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">SSO<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for single sign-on. In a SSO system, a user logs in once to the system and can access multiple systems without being prompted to sign in for each one. Okta is a cloud-based SSO platform that allows users to enter one name and password to access multiple applications. Users can access all of their web applications, both behind the firewall and in the cloud, with a single sign in. Okta provides a seamless experience across PCs, laptops, tablets, and smartphones.</span></a> (DSSO) is the functionality that allows <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">users<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>In Okta literature, we generally refer to "users" as the people who serve as Okta administrators. When we refer to "end users" we are generally referring to the people who the administrators serve. That is, those who use Okta chiclets to access their apps, but have no administrative control.</span></a> to be automatically authenticated by Okta, and any apps accessed through Okta, whenever they sign-in to your Windows network. It provides a superior user-experience as users don’t have to login multiple times. </p>
                                            <p>Traditionally, enabling Desktop SSO required deploying IWA agents. Agentless desktop SSO eliminates the need to deploy IWA agents across Active Directory domains to enable DSSO. This enables you to have no maintenance overhead and also removes the burden of worrying about High Availability as Okta handles the Kerberos validation. <a href="javascript:void(0);" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="SSO_agentless"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Diagram</a></p>
                                            <p>
                                                <img src="../../Resources/Images/SSO_agentless.png" style="display: none;" data-mc-target-name="SSO_agentless" />
                                            </p>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />About Desktop SSO&#160;and JIT</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>As you configure Desktop SSO (on prem or agentless) in your environment, be aware of how the Desktop SSO flow works when importing users and how Just in Time (JIT) authentication will occur. </p>
                                                    <ul>
                                                        <li value="1">If using on-prem DSSO IWA always sends Okta the Universal Principal Name (<b>UPN</b>). This is the only data Okta uses to look up a user. Okta does not perform authentication for users because Kerberos validation is already done on the IIS side.</li>
                                                        <li value="2">
                                                            <p>If using Agentless Desktop SSO, your web browser sends the Kerberos ticket to Okta, and relies on the AD&#160;<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">agent<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A software agent is a lightweight program that runs as a service outside of Okta. It is typically installed behind a firewall and allows Okta to tunnel communication between an on-premises service and Okta's cloud service. Okta employs several agent types: Active Directory, LDAP, RADIUS, RSA, Active Directory Password Sync, and IWA. For example, users can install multiple Active Directory agents to ensure that the integration is robust and highly available across geographic locations.</span></a> to look up the UPN.  The Kerberos validation is now done in the cloud in Okta.</p>
                                                        </li>
                                                    </ul>
                                                    <p>When a user tries to sign in using Desktop SSO:</p>
                                                    <ul>
                                                        <li value="1"><b>If the user is already imported and active in Okta</b>:&#160;Okta uses the UPN&#160;to look up the user. If&#160;Okta finds the user, the profile reloads from AD and the user signs in.</li>
                                                        <li value="2"><b>If the user is imported but not yet active in Okta</b>:&#160;Okta uses the UPN&#160;to look up the user. If Okta finds the user, the profile loads from AD, is activated and the user signs in.</li>
                                                        <li value="3"><b>If the user has not been imported into Okta and JIT is on</b>:&#160;Okta can only validate the user by the UPN. So the Okta user name format must be the UPN in order for the user to be successfully imported with JIT turned on. If the user name format is something other than the UPN, for example the email address or SamAccountName, the search will fail to locate the user. </li>
                                                        <li value="4"><b>If the user has not been imported into Okta and JIT&#160;is off</b>:&#160;User sign in will fail.</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Things to know</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <ul>
                                                        <li value="1"><b>Custom URL</b> — <![CDATA[
                        ]]><p>If you are using the <a href="../Settings/custom-url-domain.htm">Custom URL</a>&#160;feature and are integrating with one of the Okta agents, take note of the following:</p><ul><li value="1"><b>Agents</b>:&#160; Need to be installed against the actual <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">domain<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A domain is an attribute of an Okta organization. Okta uses a fully-qualified domain name, meaning it always includes the top-level domain (.com, .eu, etc.), but does not include the protocol (https).</span></a> (<i>example</i>.okta.com) not the custom domain (<i>example</i>.<i>customname</i>.com). This applies to all agents. </li><li value="2"><b>If using IWA SSO</b>:&#160; You should customize the <span style="font-family: 'Courier New';">web.config</span> file to include the custom url. It will continue to work without these customization, but it could cause confusion for your end user if they fail to sign in and end up on a different domain. <p style="font-family: 'Courier New';font-size: 11pt;">&lt;oktaSSOConfigGroup&gt;</p><p style="font-family: 'Courier New';font-size: 11pt;">&lt;oktaSSOConfig orgOktaAuthenticationURL="https://example.customname.com/login/sso_iwa_auth"</p><p style="font-family: 'Courier New';font-size: 11pt;">orgBackupOktaAuthenticationURL="https://example.customname.com/login/default"</p><p style="font-family: 'Courier New';font-size: 11pt;">oktaSSOWebAp<span style="font-size: 11pt;">pVersion="1.11.5.0"&gt;</span></p></li><li value="3"><b>If you are using Agentless DSSO</b>: Since you can only specify one SPN when setting up Agentless DSSO, you should ensure all your sign in flows and browser bookmarks are using the URL you want ADSSO to use.</li></ul><p>&#160;</p></li>
                                                        <li value="2"> <b>Using AES128 or AES256 encryption</b> — If you want to use AES128/256 with Agentless Desktop SSO or MS <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">App<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of application. Essentially, it is a web-based site used to perform any number of specific tasks, and requires authentication from end users by signing in.</span></a> silent activation, you must enable AES for both the AD domain as well as the service account for Okta DSSO. If it isn't enabled for the AD domain you will see a Kerberos error <span style="font-family: 'Courier New';">KDC_ERR_ETYPE_NOTSUPP</span> in the Kerberos events.  <p>For details on how to enable each of these, refer to <a href="https://blogs.msdn.microsoft.com/openspecification/2011/05/30/windows-configurations-for-kerberos-supported-encryption-type/">Windows Configurations for Kerberos Supported Encryption Type</a>.</p></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Requirements</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <ul>
                                                        <li value="1">
                                                            <p>You have an Active Directory domain (or multiple domains) integrated with your Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>The Okta container that represents a real-world organization.</span></a>.</p>
                                                        </li>
                                                        <li value="2">
                                                            <p>You have permissions in Active Directory to configure a Service Principal Name (SPN). For more info on permissions, see Delegating Authority to Modify SPNs at the following URL:&#160;<a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc731241(v=ws.11)">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc731241(v=ws.11).</a></p>
                                                            <li value="2">You will need to create a service account, as described below. For this service account:<ul><li value="1">A domain user account is recommended, for the Okta tenant Kerberos service, instead of a domain <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">admin<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of administrator. This is the individual(s) who have access to the Okta Administrator Dashboard. They control the provisioning and deprovisioning of end users, the assigning of apps, the resetting of passwords, and the overall end user experience. Only administrators have the Administration button on the upper right side of the My Applications page.</span></a> account as a security best practice.</li><li value="2">To further lock down the account, the <b>logon to</b> restriction can be turned on with a fictitious host name, and the account can be marked as <b>Account is sensitive and cannot be delegated</b>. This is also for security reasons.</li></ul></li>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Known Issues or Limitations</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <ul>
                                                        <li value="1"><b>Agentless DSSO will not work if a single user has memberships to more than 600 security <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">groups<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Groups allow you to organize your end users and the apps they can access. Assigning apps to large sets of end users is made easier with groups.</span></a></b> — If an end user tries to go through the Agentless DSSO flow and has more than 600 security groups, they will see a 400 response and be redirected to the regular sign in page.
</li>
                                                        <li value="2">The following browsers are not supported:<ul><li value="1">Firefox</li><li value="2">Chrome on macOS. </li></ul></li>
                                                        <li value="3">If you are using Windows functional level 2008 or below, be aware that it uses a less secure encryption RS4. We recommend that you upgrade to at least Windows functional level 2008 or above to use the most secure encryption algorithm.              </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Summary of steps</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>Setting up Agentless Desktop SSO involves the following steps:</p>
                                                    <ol>
                                                        <li value="1"><a href="#SSOAgentlessPrincName">Create a service account and configure an SPN</a>
                                                        </li>
                                                        <li value="2">Configure Browsers on <a href="#ConfigWin">Windows</a> or <a href="#ConfigMac">Mac</a></li>
                                                        <li value="3"><a href="#Deployin" class="MCXref xref">STEP 4:&#160;Deploy registry keys to client machines			</a>
                                                        </li>
                                                        <li value="4"><a href="#Enable" class="MCXref xref">STEP 5:&#160;Enable Agentless Desktop SSO
		</a>
                                                        </li>
                                                        <li value="5"><a href="#Validate">Validate Agentless Desktop SSO</a>
                                                        </li>
                                                        <li value="6">Steps that may apply to your environment:<ul><li value="1"><a href="#Testing" class="MCXref xref">Test Agentless DSSO before rolling out to production
			</a></li><li value="2"><a href="#Configur2" class="MCXref xref">Configure DSSO&#160;fail over</a></li></ul></li>
                                                    </ol>
                                                </div>
                                            </div>
                                            <hr width="100%" size="0" align="center" />
                                            <p>
                                                <h2>Procedures</h2>
                                            </p>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="SSOAgentlessPrincName"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP 1: Create a service account and configure an SPN</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>In order for Okta to negotiate Kerberos authentication for Agentless Desktop SSO, you will need to create a new service account and set a Service Principal Name (SPN) for that service account.</p>
                                                    <ol>
                                                        <li value="1">Sign in to a server from which you can access <b>Active Directory Users and Computers</b>.</li>
                                                        <li value="2">Create a new account with the following properties. The service account itself does not need admin permissions, but you will need specific permissions to set an SPN as mentioned in <a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc731241(v=ws.11)">Delegating Authority to Modify SPNs</a><p>User logon name: &lt;username&gt;<br />User logon name (pre-Windows 2000) :&#160; &lt;username&gt; <br />where &lt;username&gt; is any username of your choice.</p></li>
                                                        <li value="3">
                                                            <p>Select a password and set to <b>Password never expires</b>.</p>
                                                        </li>
                                                        <li value="4">
                                                            <p>In a Command window, configure an SPN for the service account, using the following syntax:</p>
                                                            <p>Setspn -S HTTP/<i>&lt;<i>myorg</i>&gt;.okta</i>.com &lt;username&gt;</p>
                                                            <p>Where  HTTP/<i>&lt;<i>myorg</i>&gt;.okta.com</i>.com is the SPN and &lt;username&gt; are the values specified in step 2. For example, <br />Setspn -S HTTP/<i>atko.okta</i>.com atkospnadmin<br /></p>
                                                        </li>
                                                    </ol>
                                                    <p>The next step is to configure your browsers.</p>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="ConfigWin"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP&#160;2:&#160;Configure browsers for SSO on Windows</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>Configuring changes on Internet Explorer (IE) will be enough as Chrome and Edge will recognize these settings. </p>
                                                    <p>There are three main steps involved in configuring the browsers on Windows: </p>
                                                    <ul>
                                                        <li value="1">Enabling IWA on the browsers </li>
                                                        <li value="2">Adding Okta as a trusted site to the Local Intranet Zone in Internet Explorer (IE)</li>
                                                        <li value="3">Creating a GPO to apply these setting across all our client machines. </li>
                                                    </ul>
                                                    <p>To configure your browsers:</p>
                                                    <ol>
                                                        <li value="1">Enable IWA on the browsers:<ol style="list-style-type: lower-alpha;"><li value="1">In Internet Explorer select <b>Tools &gt; Internet Options</b>.</li><li value="2">Click the <b>Advanced</b> tab, scroll down to the <b>Security</b> settings, and select <b>Enable Integrated Windows Authentication</b>.</li><li value="3">Click <b>OK</b>.</li></ol><p><b>Note</b>: Make sure that Internet Explorer can save session cookies <b>(Internet Options &gt; Privacy tab</b>). If it cannot, neither SSO nor standard sign in can work.</p></li>
                                                        <li value="2"> Configure the Local Intranet Zone to trust Okta:<ol style="list-style-type: lower-alpha;"><li value="1"> In IE, open <b>Options &gt; Security</b>.</li><li value="2">Click on <b>Local Intranet &gt; Sites &gt; Advanced</b> and add the URL for your 	Okta org as configured in earlier steps. For example, https://<i>&lt;myorg&gt;</i>.okta.com.</li><li value="3">Click <b>Close</b> and <b>OK</b> on the other configuration options.</li></ol></li>
                                                        <li value="3">Create a GPO to roll this out to all client machines that will use Agentless DSSO.</li>
                                                    </ol>
                                                    <p><b>Note</b>:&#160;Firefox is not supported.</p>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="ConfigMac"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP&#160;3:&#160;Configure browsers for SSO on Mac</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>Agentless Desktop SSO is currently not supported on Chrome on macOS.</p>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />OS/X Safari<b>&#160;</b></a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>DSSO is enabled automatically in Safari on OS/X.&#160;Make sure that the macOS&#160;host is a Windows domain member. For how to&#160;add your Macintosh OS/X host to a Windows domain, see the article&#160;<a href="https://support.apple.com/kb/PH25648" target="_blank">macOS Sierra: Join your Mac to a network account server</a>.</p>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Google Chrome (Mac)</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Agentless Desktop SSO is currently not supported on Chrome.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Deployin"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP 4:&#160;Deploy registry keys to client machines			</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>Now that you’ve configured your SPN, and browsers, you will create a Group Policy Object to deploy registry keys.</p>
                                                    <h3>Why registry keys?</h3>
                                                    <p>Okta uses CNAME alias' to resolve to the Okta org. So when you make a request to <i>&lt;myorg&gt;</i>.okta.com, that subdomain is an alias to various load balancers. This is a modern Cloud infrastructure pattern to eliminate maintenance overhead. To support this architecture registry keys need to be deployed to tell any apps that rely on Kerberos to use CNAME and not ANAME.</p>
                                                    <p>You will need to add a registry key entry for each app that depends on Kerberos authentication for Agentless DSSO. This includes the Chrome and Internet Explorer browsers and any other thick clients that you may have. You can decide which apps to include based on whether you want Agentless DSSO functionality enabled for them. For example, if you have four native apps: MSWord, Excel, PowerPoint, and GoToMeeting and you only want Agentless DSSO on the GoToMeeting app then you'd need to add a registry key for the GoToMeeting app.</p>
                                                    <p><b>Important</b>:&#160;Wildcards are <b>NOT</b> recommended as they could have unexpected consequences on other applications that rely on DNS.</p>
                                                    <h3>Implications of enabling the registry keys</h3>
                                                    <p>By deploying these registry keys, the behavior of all web apps that depend on Kerberos for authentication will change to resolve to CNAME rather than ANAME</p>
                                                    <p>You need to check the SPN set for these applications and see whether that SPN is an ANAME or a CNAME and decide:</p>
                                                    <ul>
                                                        <li value="1">If the SPN is an A name, change the SPN to a CNAME.</li>
                                                        <li value="2">If the SPN is a CNAME, leave it as is.</li>
                                                    </ul>
                                                    <p>Okta recommends that you test the Agentless DSSO changes in a limited <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">scope<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A scope is an indication by the client that it wants to access some resource.</span></a>  before rolling out widespread changes to your org. This includes deploying the registry key changes on a small but representative selection of machines in your domain. For details, see <a href="#Testing" class="MCXref xref">Test Agentless DSSO before rolling out to production
			</a></p>
                                                    <h3><a name="Deploy"></a>Deploy registry keys</h3>
                                                    <p>This section describes the deploying the registry keys on individual machines for test purposes and through Group Policy Objects when you are ready for production.</p>
                                                    <h4><a name="Regkey1machine"></a>Deploying registry keys on a single machine</h4>
                                                    <p>Before rolling out the registry key changes to all machines, you can test the implementation by applying the changes to individual machines.</p>
                                                    <p>To apply this on a single machine, create a .reg file on the machine with the following content inside of it:</p>
                                                    <p style="font-family: 'Courier New';">Windows Registry Editor Version 5.00<br />[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet<br />Explorer\MAIN\FeatureControl\FEATURE_USE_CNAME_FOR_SPN_KB911149]<br />"iexplore.exe"=dword:00000001<br />[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet<br />Explorer\MAIN\FeatureControl\FEATURE_USE_CNAME_FOR_SPN_KB911149]<br />"iexplore.exe"=dword:00000001<br />[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Google\Chrome]<br />"DisableAuthNegotiateCnameLookup"=dword:00000001</p>
                                                    <h4>Deploying registry keys through Group Policy</h4>
                                                    <p>To deploy the registry key changes across your org, you will use Group Policies. </p>
                                                    <p>In order to create a group policy to apply broadly, do the following as a domain administrator from your domain controller:</p>
                                                    <ol>
                                                        <li value="1"> Launch <b>Active Directory Users and Computers</b>.</li>
                                                        <li value="2">Right click in the navigation structure and select <b>New &gt; Organizational Unit (<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">OU<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym of Organizational Unit. Organizational units are Active Directory containers into which you can place users, groups, computers, and other organizational units.  It is the smallest scope or unit to which you can assign Group Policy settings or delegate administrative authority.</span></a>)</b>.</li>
                                                        <li value="3">Name the OU. This will be the computers OU used for this change</li>
                                                        <li value="4">From a domain controller run the command <span style="font-family: 'Courier New';">gpedit.msc</span> to open the <b>Group Policy Editor</b>.</li>
                                                        <li value="5">In the <b>Group Policy Management</b> console, right click on <b>Group Policy Objects</b>.</li>
                                                        <li value="6">Select <b>New</b>, to create a new group policy object (GPO).</li>
                                                        <li value="7">Name the GPO and leave <b>Source Starter GPO</b> set to <b>(none)</b>.</li>
                                                        <li value="8">Right click on the new GPO and select <b>Edit</b></li>
                                                        <li value="9">Navigate to <b>Computer Configuration &gt; Preferences&gt; Windows Settings &gt; Registry</b></li>
                                                        <li value="10">Right click on <b>Registry</b> and select <b>New Item</b>, enter the following items values. Repeat the process for all of the below registry entries.
</li>
                                                        <ul>
                                                            <li value="1">For Internet Explorer:<table style="width: 100%;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;"><col style="width: 273px;" /><col /><tbody><tr><td style="background-color: #dcdcdc;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;"><p style="background-color: #dcdcdc;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;">Action</p></td><td style="background-color: #dcdcdc;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;">Create</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Hive</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">HKEY_LOCAL_MACHINE</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Keypath</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">SOFTWARE\Microsoft\Internet
Explorer\MAIN\FeatureControl\FEATURE_USE_CNAME_FOR_SPN_KB91
1149</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Name</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">iexplore.exe</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Type</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">REG_DWORD</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Data</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">1</td></tr><tr><td style="background-color: #dcdcdc;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;">Action</td><td style="background-color: #dcdcdc;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;">Create</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Hive</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">HKEY_LOCAL_MACHINE</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Keypath</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">SOFTWARE\Wow6432Node\Microsoft\Internet
Explorer\MAIN\FeatureControl\FEATURE_USE_CNAME_FOR_SPN_KB91
1149</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Name</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">iexplore.exe</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Type</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">REG_DWORD</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Data</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">1</td></tr></tbody></table> </li>
                                                            <li value="2">For Chrome:

                            <table style="width: 100%;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;"><col style="width: 273px;" /><col /><tbody><tr><td style="background-color: #dcdcdc;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;">Action</td><td style="background-color: #dcdcdc;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;">Create</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Hive</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">HKEY_LOCAL_MACHINE</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Keypath</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">SOFTWARE\Policies\Google\Chrome</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Name</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">DisableAuthNegotiateCnameLookup</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Type</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">REG_DWORD</td></tr><tr><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">Value Data</td><td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;border-top-left-radius: 1px;border-top-right-radius: 1px;border-bottom-left-radius: 1px;">1</td></tr></tbody></table></li>
                                                        </ul>
                                                        <li value="11">							Once all entries have been created, locate the OU created in step 3.</li>
                                                        <li value="12">Right click on the OU and select <b>Link an Existing GPO</b></li>
                                                        <li value="13"> Select the appropriate GPO.</li>
                                                    </ol>
                                                    <p>The next step is to turn on Agentless DSSO.</p>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Enable"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP 5:&#160;Enable Agentless Desktop SSO
		</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>You can enable Agentless Desktop SSO for testing or for production. </p>
                                                    <ul>
                                                        <li value="1"><b>Test</b> — allows you to test by signing in using the direct Agentless DSSO endpoint URL:<br /> https://&lt;<i>myorg</i>&gt;.okta.com/login/agentlessDsso</li>
                                                        <li value="2"><b>On</b> — allows <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">end users<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>In Okta literature, we generally refer to "end users" as the people who have their own Okta home page (My Applications), using chiclets to authenticate into all of their apps. End users do not have any administrative control. When we refer to "users" we are generally referring to the individual(s) who have administrative control.</span></a> to sign in from the default sign in endpoint, routing through the Agentless DSSO sign in endpoint. The end user doesn't need to explicitly type in the DSSO&#160;URL. </li>
                                                    </ul>
                                                    <p>To enable Agentless DSSO:</p>
                                                    <ol>
                                                        <li value="1">
                        In the Okta Admin dashboard, navigate to <b>Security &gt; Delegated Authentication</b>.                    </li>
                                                        <li value="2">Scroll to <b>Agentless Desktop SSO</b>. </li>
                                                        <li value="3">Click Edit and select a Desktop SSO mode:<ul><li value="1">Off</li><li value="2">Test  — For testing in your Preview environment.</li><li value="3">On  — For enabling SSO in Production.</li></ul></li>
                                                        <li value="4">For <b>Allowed network zones</b>, add the zones that are associated with the machines from which you will be implementing Agentless SSO.
<p>Note: If <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">IdP<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for Identity Provider. It is a service that manages end user accounts analogous to user directories such as LDAP and Active Directory, and can send SAML responses to SPs to authenticate end users. Within this scenario, the IdP is Okta.</span></a> Discovery is turned on, the network zone options will not be available. When IdP&#160;Discovery and Agentless DSSO are both on, Agentless DSSO network zones are controlled through the IdP Routing Rules. For details, see <a href="../Security/Identity_Provider_Discovery.htm#configidpdiscovery">Configure IdP Discovery</a>.</p></li>
                                                        <li value="5">In <b>AD Instances</b>, select the Active Directory instance on which you configured the SPN.
                    </li>
                                                        <li value="6">Configure Agentless Desktop SSO for this Active Directory domain with the following information and then <b>Save</b>.
						<ul><li value="1"><p><b>Desktop SSO</b> — Select <b>Enable</b> or <b>Disabled</b> depending on whether you are enabling for production or testing.</p></li><li value="2"><p><b>Service account username</b> — This is the AD Logon Name, without any domain suffix or Netbios name prefix. It can be the sAMAccountName or the username part of the UPN. These two may be the same string unless the Org admin chose to use different values.</p></li><li value="3"><p><b>Service account password</b> — Password for the account that you created in AD.</p></li></ul></li>
                                                    </ol>
                                                    <p>Once a domain has been configured and enabled users will be able to sign in with Agentless DSSO.</p>
                                                    <p>The next step is to validate Agentless DSSO is configured correctly.</p>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Validate"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP 6:&#160;Validate Agentless Desktop SSO
			</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>After configuring Agentless DSSO, you can verify that everything is correctly configured by doing the following:<![CDATA[				]]></p>
                                                    <ol>
                                                        <li value="1">Sign in to a domain-joined, on-network device that is joined to the Active Directory environment on which you have enabled Agentless Desktop SSO.  Ensure that you are logged in as a user that is already active in Okta.</li>
                                                        <li value="2">If you haven’t already, add your Okta environment to your Local Intranet settings.<ol><li value="1">In a browser, open <b>Options &gt; Security</b>.</li><li value="2">Click on <b>Local Intranet &gt;&#160;Sites &gt;&#160;Advanced</b> and add the URL for your Okta org as configured in earlier steps. For example, https://&lt;<i>myorg</i>&gt;.okta.com.</li><li value="3">Click <b>Close</b> and <b>OK</b> on the other configuration options.</li></ol></li>
                                                        <li value="3">On a Windows machine, sign into your Okta org. If Agentless DSSO is configured correctly, you will be automatically redirected to your end user apps dashboard without entering any credentials.<br /></li>
                                                        <li value="4">Verify in the system log that the user authenticated via Agentless Desktop SSO. In your Okta org, you will see an entry for <i>Authenticate user via IWA</i> with no entries referring to an on-prem IWA server.</li>
                                                    </ol>
                                                </div>
                                            </div>
                                            <hr width="100%" size="0" align="center" />
                                            <h2>Procedures that may apply to your environment</h2>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Testing"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Test Agentless DSSO before rolling out to production
			</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>Okta recommends that you test the Agentless DSSO changes in a limited scope  before rolling out widespread changes to your org. This includes deploying the registry key changes on a small but representative selection of machines in your domain.</p>
                                                    <p>To test Agentless DSSO, follow these general steps:</p>
                                                    <ol>
                                                        <li value="1"><a href="#SSOAgentlessPrincName" class="MCXref xref">STEP 1: Create a service account and configure an SPN</a>
                                                        </li>
                                                        <li value="2">Perform the steps in <a href="#ConfigWin" class="MCXref xref">STEP&#160;2:&#160;Configure browsers for SSO on Windows</a> and <a href="#ConfigMac" class="MCXref xref">STEP&#160;3:&#160;Configure browsers for SSO on Mac</a> as appropriate.</li>
                                                        <li value="3"><a href="#Regkey1machine" class="MCXref xref">Deploying registry keys on a single machine</a>
                                                        </li>
                                                        <li value="4"><a href="#Enable" class="MCXref xref">STEP 5:&#160;Enable Agentless Desktop SSO
		</a>  in <b>test</b> mode
                    </li>
                                                        <li value="5">Optional — Enable Kerberos event logging. For more information, see <a href="https://support.microsoft.com/en-us/help/262177/how-to-enable-kerberos-event-logging">https://support.microsoft.com/en-us/help/262177/how-to-enable-kerberos-event-logging</a>.</li>
                                                        <li value="6"><a href="#Validate" class="MCXref xref">STEP 6:&#160;Validate Agentless Desktop SSO
			</a> 
						by signing in using the direct Agentless DSSO endpoint URL:<br /> https://&lt;<i>myorg</i>&gt;.okta.com/login/agentlessDsso
</li>
                                                    </ol>
                                                    <p>If Agentless DSSO&#160;is configured correctly, you will be able to sign in without being prompted for credentials. If you experience problems signing in, ensure you have completed all the steps listed above. You can check the <a href="#Troubleshooting" class="MCXref xref">Troubleshooting</a> section for additional help.                    </p>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Configur2"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Configure DSSO&#160;fail over</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>You may wish to have a back up plan in the event that Agentless DSSO fails. There are two fail over options:</p>
                                                    <ul>
                                                        <li value="1">Okta will automatically fail over to the default sign-in page.</li>
                                                        <li value="2">You can use on-prem IWA&#160;DSSO as a backup.</li>
                                                    </ul>
                                                    <p>Choosing to fail over to on-prem IWA&#160;DSSO, requires you to install and configure the on-prem IWA&#160;DSSO. If on-prem IWA DSSO is configured and enabled, it will automatically take over if Agentless DSSO stops working. For details, see <a href="Configuring_Desktop_SSO.htm" class="MCXref xref">Install and configure the Okta IWA&#160;Web App for Desktop SSO</a>.</p>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="RollbackRegKey"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Rolling back Registry Key changes</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>If you have trouble after enabling the registry changes you can roll back the registry key changes you've made.</p>
                                                    <p>To roll back the registry settings using the GPO, simply edit the previously added registry keys changing the action item  from <b>Create</b> to <b>Delete</b>.</p>
                                                </div>
                                            </div>
                                            <hr width="100%" size="0" align="center" />
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Related Topics</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p><span style="color: #0000ff; text-decoration: underline;"><a href="Configuring_Desktop_SSO.htm" class="MCXref xref">Install and configure the Okta IWA&#160;Web App for Desktop SSO</a></span>
                                                    </p>
                                                    <p><a href="../Security/Security_Network.htm" class="MCXref xref">Networks</a>
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />FAQs</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <h4>Can I run Agentless DSSO and IWA Web App for Desktop SSO at the same time?</h4>
                                                    <p>Yes. When both are enabled and the user tries to sign in, Okta first tries authenticating against Agentless DSSO and if that fails, it falls back to the on-prem IWA server.</p>
                                                    <h4>Can I use Agentless DSSO while remote?</h4>
                                                    <p>No. You need to be on-network to sign in via Agentless DSSO. However if using  a VPN, Agentless DSSO will work.</p>
                                                    <h4>Do I need to open any special ports for this to work?</h4>
                                                    <p>No.</p>
                                                    <h4>Do computers need to be domain joined?</h4>
                                                    <p>Yes. In order for Agentless DSSO to work, the computer needs to be domain joined.</p>
                                                    <h4>Do I need to install an agent on my machines?</h4>
                                                    <p>No. Agentless DSSO removes the need to have any IWA agents on your machines. Instead the Kerberos validation is done on Okta's servers.</p>
                                                    <h4>When troubleshooting I see a 401 error from Okta, does this mean something is failing?</h4>
                                                    <p>No that's expected. When the end user goes to the browser and types in <i>&lt;myorg&gt;</i>.okta.com, Okta sees your org has Agentless DSSO enabled and kicks off a 401 authenticate challenge to your KDC which then returns a Kerberos ticket back to Okta.</p>
                                                    <h4>Can I recreate re-write rules?</h4>
                                                    <p>No. </p>
                                                    <h4>Does my UPN domain name suffix need to be the same as the AD domain’s primary DNS suffix?</h4>
                                                    <p>No. Okta uses the user SID to locate and authenticate the user. So it shouldn't matter if they don't match because the request resolves to the user object using SID.</p>
                                                    <h4>Does Agentless DSSO have any rate limits?</h4>
                                                    <p>The current rate limit for the Agentless DSSO endpoint <i>/login/agentlessDSSO</i> is 1000/minute.  This is double the on-prem rate limit as described in <a href="../Security/API.htm#Concurre" class="MCXref xref">Concurrent Rate Limits</a> because each successful login performs two http commands to the Agentless DSSO&#160;endpoint. The number of successful logins per minute will be the same as on-prem IWA.                    </p>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Troubleshooting"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Troubleshooting</a></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <h4>With Agentless DSSO enabled, you browse to your Okta tenant and see the regular sign in page.</h4>
                                                    <p>You were not routed to the Agentless DSSO endpoint. Confirm your IP address is added to the correct zone and that zone is used for the Agentless DSSO.</p>
                                                    <h4>I am working remote and  Agentless DSSO doesn't work.</h4>
                                                    <p>In order for Agentless DSSO to work your browser must be able to connect to the Key Distribution Center (KDC) on your domain. This is crucial to the Kerberos validation. If you are unable to reach the KDC you will not obtain a Kerberos ticket and will not be able to authenticate.  If available, join your network via a Virtual Private Network (VPN). If the KDC is available via the VPN, Agentless DSSO will work.</p>
                                                    <h4>I am in the right zone and on-prem and Agentless DSSO still fails.</h4>
                                                    <p>Confirm the username and password are correct for the SPN account both in AD and as stored in the Okta configuration. If the account expired or was changed it will break the flow.</p>
                                                    <h4>I have verified I am in the correct zone, verified the account used for the SPN is correct, I am on-premises and Agentless DSSO still fails.</h4>
                                                    <p>This could suggest some type of Kerberos failure. Using tools such as Wireshark, capture your network traffic during your Agentless DSSO attempt. Once captured, filter for Kerberos traffic. Compare this traffic to the  Event Viewer logs on your KDC.  Using these two tools (or similar) you should be able to uncover Kerberos failures.</p>
                                                    <p><b>Note</b>: In order to see debug-level Kerberos events you may need to enable Kerberos event logging. For more information, see <a href="https://support.microsoft.com/en-us/help/262177/how-to-enable-kerberos-event-logging">https://support.microsoft.com/en-us/help/262177/how-to-enable-kerberos-event-logging</a>.</p>
                                                    <h4>Kerberos validator and sign in fail<![CDATA[      ]]></h4>
                                                    <p>If the clock skew between your corporate network and Okta Agentless SSO becomes too great, Kerberos validation and sign in will fail. This issue will not occur if your domain controller's clock is synced to an external time server.</p>
                                                    <h4> Slow  or failed sign-on experience      </h4>
                                                    <p>During Agentless DSSO sign-in Okta does a SID look-up. During the EA time frame this is being done with a call to the AD Agent. If you experience a slow  sign-in experience or failed  sign-ins consider increasing the number of polling threads for your AD Agents or adding new AD Agents for your domains. For details on how to do this, see <a href="ad-agent-install-multiple.htm">Install multiple Okta AD agents</a> and <a href="ad-agent-threads.htm#Configur2" class="MCXref xref">Change the number of Okta Active Directory (AD) agent threads</a>.</p>
                                                    <p>If this occurs, you will see the AD Agent logs filled with a large number of read LDAP calls, without any <i>Next action = NONE</i> lines shown. For example:</p>
                                                    <p><span style="font-family: 'Courier New';">2018/06/11 23:14:34.441 Debug -- N079-H076(57) -- Sending result for READ_LDAP action (id=ADS2n15k1yGW23cn10g7) finished, (executionTime=00:00:00.2196026)</span>
                                                    </p>
                                                    <p>&#160;</p>
                                                </div>
                                            </div><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                        </div>
                                    </div>
                                    <div>
                                        <div data-sticky-container="" id="B400kOZxSk6XcaJUAcxYwQ">
                                            <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="B400kOZxSk6XcaJUAcxYwQ:top" data-bottom-anchor="contentBody:bottom" data-scroll-container=".body-container" data-sticky-on="only screen and (min-width: 1025px)" data-scroll-container-on="only screen and (min-width: 1025px)">
                                                <ul class="nocontent menu _Skins_okta_side_menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/BrowseSequences/BrowseSequences__secondary.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="False" data-mc-include-parent="True" data-mc-toc="True">
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="Footer">
                                    <div>
                                        <p class="copyright">© Copyright <span class="okta-variablesYear">2019</span> <span class="okta-variablesCompanyName">Okta, Inc</span></p>
                                    </div>
                                </div>
                                <script src="../../Resources/Scripts/js/app.js">
                                </script>
                                <!-- <script src="../../Resources/Scripts/js/vendor/jquery.js"></script> -->
                                <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                </script>
                                <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                </script>
                                <script type="text/javascript" src="../../Resources/Scripts/back-to-top.js">
                                </script>
                                <script type="text/javascript" src="../../Resources/Scripts/get-feedback.js">
                                </script>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>