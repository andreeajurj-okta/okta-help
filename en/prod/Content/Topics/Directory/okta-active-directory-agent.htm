<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Install and Configure the Okta Active Directory Agent</title>
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <script>/* <![CDATA[ */
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-15777010-10', 'auto');
			ga('send', 'pageview');

		/* ]]> */</script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/okta-relnotes.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/okta-docs-custom.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.previous-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.next-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (min-width: 1025px)" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../ReleaseNotes/okta-relnotes.htm" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <div class="TopBarLeftRight">
                                    <div data-mc-conditions="SFDC-syndication.not-for-sfdc">
                                        <div id="feedback"><a href="mailto:okta-docs@okta.com?Subject=Feedback%20for%20OktaDocs"><img src="../../Resources/Images/okta-assets/feedback-button.png" /></a>
                                        </div>
                                    </div>
                                    <div data-mc-conditions="SFDC-syndication.not-for-sfdc">
                                    </div>
                                    <div>
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: CollapseAll ExpandAll;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                </button>
                                                <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                </button>
                                                <button class="button needs-pie next-topic-button" title="Navigate next">
                                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="LeftRightMenu">
                                    <div>
                                        <ul class="nocontent menu _Skins_okta_relnote_menu mc-component" data-mc-linked-toc="Data/Tocs/okta_relnotesTOC.js" data-mc-side-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="False" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        </ul>
                                    </div>
                                    <div>
                                        <h1>Install and Configure the Okta Active Directory Agent</h1>
                                        <p>Okta Active Directory (AD) integration allows you to integrate Okta with your on-premise AD. AD integration provides delegated authentication support (allowing&#160;<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">users<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>In Okta literature, we generally refer to "users" as the people who serve as Okta administrators. When we refer to "end users" we are generally referring to the people who the administrators serve. That is, those who use Okta chiclets to access their apps, but have no administrative control.</span></a> to sign in to Okta with their AD&#160;credentials), user provisioning and de-provisioning, and the ability to import users and AD&#160;<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">groups<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Groups allow you to organize your end users and the apps they can access. Assigning apps to large sets of end users is made easier with groups.</span></a>.</p>
                                        <p>To enable AD integration, you must install the Okta AD <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">agent<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A software agent is a lightweight program that runs as a service outside of Okta. It is typically installed behind a firewall and allows Okta to tunnel communication between an on-premises service and Okta's cloud service. Okta employs several agent types: Active Directory, LDAP, RADIUS, RSA, Active Directory Password Sync, and IWA. For example, users can install multiple Active Directory agents to ensure that the integration is robust and highly available across geographic locations.</span></a>. Before installing the agent, you must&#160;create a special administrative user whose password is Okta-specific and not tied to AD.&#160;Once you integrate AD, you are able to specify how to handle an Okta account when the source account is deactivated or reactivated. For details see <a href="../Apps/Provisioning_Deprovisioning_Overview.htm#PMULS">Profile &amp; Lifecycle Mastering</a>.</p>
                                        <p>AD integrations in a newly-created organization automatically have the following default settings enabled:</p>
                                        <ul>
                                            <li value="1">Delegated authentication</li>
                                            <li value="2">Just-in-Time (JIT) provisioning</li>
                                            <li value="3">The import schedule set to never</li>
                                            <li value="4">Profile mastering</li>
                                        </ul>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Requirements</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <ul>
                                                    <li value="1">To ensure that you have up-to-date&#160;functionality and get optimum performance from your Okta AD agent(s), we strongly recommend that you download and install the latest version of the agent&#160;on your designated host server(s). If you are running multiple Okta AD agents, make sure that all of them are the same version. <i style="font-weight: bold;">Running different versions within a domain can cause all agents in that domain to function at the level of the oldest agent</i>. This does not affect other domains. </li>
                                                    <li value="2"><b>Install on Windows Server 2008 or Later</b>&#160;— You need access to a Windows server to install the Okta AD Agent. You do not need to install the agent on the domain controller itself. Your system must have&#160;20Mb memory for the AD Service Account that is created upon agent installation. <p><b>Note:</b>&#160;You must be running IE 10 or later on your Windows Server.</p></li>
                                                    <li value="3"><b>.NET 4.0</b> (minimum)&#160;up to&#160;&#160;<b>.NET&#160;4.6.x</b> &#160;(downloaded and installed&#160;automatically with the agent if no suitable version is found on the target machine&#160;at runtime).</li>
                                                    <li value="4"><b>Installing the agent on a </b><a href="https://en.wikipedia.org/wiki/DMZ_(computing)" style="font-weight: bold;">DMZ server</a>&#160;— You must <a href="#Ports">open several ports</a>.</li>
                                                </ul>
                                                <ul>
                                                    <li value="1"><b>AD password history enforcement</b>&#160;— To enforce the AD&#160;Password History policy, you must use Okta AD Agent <b>version 3.4.1</b>&#160;or later and your Domain Controllers must be running&#160;<b>Windows Server 2008 R2</b> or later.</li>
                                                    <li value="2"><b>256 Mb of free memory</b> for the service to run.</li>
                                                    <li value="3"><b>Service Dedicated AD Service Account with Domain user permissions</b>&#160;</li>
                                                    <li value="4"><b>For each domain:</b>
                                                        <ul>
                                                            <li value="1">
                                                                <p>The AD agent should be installed on a VM with at least 2 vCPUs and 8 GBs of RAM.</p>
                                                            </li>
                                                            <li value="2">
                                                                <p>In order to ensure high availability and redundancy, we strongly recommend installing the agent on two or more systems.</p>
                                                            </li>
                                                            <li value="3">
                                                                <p>If there are 30K or more users, we recommend deploying at least 3 AD agents.</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <ul>
                                                    <li value="1"><b>Separate server for domain controller</b> (can be shared).</li>
                                                    <li value="2"><b>Must be a member server within your active directory forest</b> — We recommend the host server be a member in the same Active Directory domain of which your Active Directory users are members but is not required. The member server can be in a different domain, but must be in the same forest. Placing the agent on a different domain may cause performance issues.</li>
                                                    <li value="3"><b>Consider the agent a part of your IT infrastructure</b> –&#160;The host server where the agent resides must be on at all times. Do not install it on your laptop. The host server must have a continuous connection to the Internet so that it can communicate with Okta.</li>
                                                    <li value="4"><b>Run this setup wizard from the host server</b> –&#160;We recommend running this setup wizard in a web browser on the host server where you want to install the agent. Otherwise, you must transfer the agent installer to the host server, and then run the installer</li>
                                                    <li value="5"><b>Creating <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">admin<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of administrator. This is the individual(s) who have access to the Okta Administrator Dashboard. They control the provisioning and deprovisioning of end users, the assigning of apps, the resetting of passwords, and the overall end user experience. Only administrators have the Administration button on the upper right side of the My Applications page.</span></a> users</b> – If you are using the Okta AD&#160;integration functionality, you should always have an Okta administrator whose password is Okta-specific and not tied to AD.</li>
                                                </ul>
                                                <p>Okta recommends that no administrators be AD mastered. </p>
                                                <p class="noteindent"><b>Note:</b>&#160;This does not affect existing administrators you have created who are AD mastered. We encourage you to disconnect your admins from AD (select&#160;Directory &gt;&#160;People&#160;&gt; More Actions &gt;&#160;Disconnect from AD, select the admin users who you want to disconnect, and then click the appropriate Disconnect button).</p>
                                                <ul>
                                                    <li value="1">If you are using a third-party delegated authentication service, such as that of Salesforce.com which delegates authentication into one service and to another service (like AD via Okta), then you should always have a Salesforce.com admin account that is not assigned to a delegation authentication-enabled profile. For example, you should configure a Salesforce.com admin user whose password is specific to Salesforce.com, not Active Directory.</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Mandatory account permissions</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>You must have permissions for the following&#160;accounts:</p>
                                                <ul>
                                                    <li value="1">Okta administrative user.</li>
                                                    <li value="2">An Active Directory (AD) user account to run the AD Agent Installer.</li>
                                                    <li value="3">Okta service account (created by the installer) –&#160;A service account under which the AD agent process runs&#160;after installation. This account can be created automatically by the installer, or you can select an existing account.</li>
                                                </ul>
                                                <h3>Creating an Okta Administrative User Account</h3>
                                                <p>You must create an administrator account before you begin installing the AD Agent. This user should have an Okta-specific password and not an AD password. The AD Agent connects to Okta using this account.</p>
                                                <ol>
                                                    <li value="1">From the Administrative Dashboard, select <b>Directory &gt; People</b>, and then&#160;click&#160;<b>Add Person</b>&#160;to create a user (for example, <i>ADAgent@mycompany.com</i>).</li>
                                                    <li value="2">Select&#160;<b>Security&#160;&gt;&#160;Administrators</b>,&#160;and then click&#160;<b>Add Administrator</b>.</li>
                                                    <li value="3">Select the type of administrator. We recommend you configure an application administrator. For details about administrator roles, see <a href="../Security/Administrators.htm#Security_Administrators">Administrators</a>.</li>
                                                </ol>
                                                <h3>User Permissions Required to Install the AD Agent (Version 3.4.x)</h3>
                                                <p>During installation, you are asked if you want to let the installer create the Okta service account. To do so, you must have the following permissions:</p>
                                                <ul>
                                                    <li value="1">Be a member of the domain admins group. This is required because you must be able to create a new AD user in AD that will act as the AD agent service account.</li>
                                                    <li value="2">Have local administrator privileges. If you are installing the AD agent but using an existing user account to run as the service account, you only need local administrator privileges.</li>
                                                </ul>
                                                <p>With either option, the installer grants <b>logon as a service</b> to the domain user you select.</p>
                                                <h3>Okta Service Account Options</h3>
                                                <p>The AD agent runs under the account you specified (either the Okta service account the installer created or the domain user you selected). Depending on the configuration of your integration, the agent performs the following actions:</p>
                                                <ul>
                                                    <li value="1"><b>Read users, OUs, and groups</b> — Requires read access on the accessed objects. By default, a domain user has sufficient permission to do this. We recommend read access on the entire domain, but it is not required.</li>
                                                    <li value="2"><b>Authenticate users</b> — No special permissions are required.</li>
                                                    <li value="3"><b>Change user passwords (by supplying the current password)</b> — No special permissions are required.</li>
                                                    <li value="4"><b>Set user passwords (administratively, without the current password)</b> — Requires permissions to set passwords for users.</li>
                                                    <li value="5"><b>Create and update users, attributes, and memberships in AD with values pushed from Okta</b> — Requires permissions to read and write to the attribute(s) you&#160;are updating.</li>
                                                </ul>
                                                <p><a name="Okta_Svc_Acct_Permisions"></a>On your Windows server, use the&#160;<b>Delegation of Control Wizard</b>&#160;to grant the Okta service account the following permissions:</p>
                                                <ul>
                                                    <li value="1"><b>Create, delete, and manage user accounts</b> — For create and update user flows.</li>
                                                    <li value="2"><b>Reset user passwords and force password change at next logon</b> — For syncing passwords.</li>
                                                    <li value="3"><b>Read all user information</b> — For import and create user flows.</li>
                                                    <li value="4"><b>Modify the membership of a group</b> — For Group Push.</li>
                                                </ul>
                                                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><p><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Minimum Agent Service Account permissions)</a></p></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>Before adjusting the permissions on your directory make sure you understand how Active Directory permissions are set and  plan how to manage this within your environment.</p>
                                                        <p>By default the AD Agent installer will allow you to create a new service account if you do not choose an existing account. The newly created OktaService user has the permissions of the Domain Users group. OktaService is also considered to be a member of Authenticated Users and Everyone special identity groups when the agent is running.</p>
                                                        <p>The Okta AD Agent Management Utility also includes the option of adding the OktaService account to the Domain Admins group. If you require functionality listed below but don't want to make your service account a full admin, make sure the following permissions are set.</p>
                                                        <p>
                                                            <h4>Provision User</h4>
                                                        </p>
                                                        <ul>
                                                            <li value="1">Requires create child permission for user objects on the target <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">OU<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym of Organizational Unit. Organizational units are Active Directory containers into which you can place users, groups, computers, and other organizational units.  It is the smallest scope or unit to which you can assign Group Policy settings or delegate administrative authority.</span></a>.</li>
                                                            <li value="2">Requires Reset Password Control Access Right permission for user objects within your target OU.</li>
                                                            <li value="3">Requires write property permissions on user objects within your target OU for the following attributes:<ul><li value="1">mail</li><li value="2">userPrincipalName</li><li value="3">SAMaccountName</li><li value="4">givenName</li><li value="5">sn</li><li value="6">userAccountControl</li><li value="7">pwdLastSet</li><li value="8">lockoutTime</li><li value="9">cn</li><li value="10">name</li></ul></li>
                                                            <li value="4">Requires write property permission on user objects within your target OU for all other attributes mapped on the AD user profile within Okta <span style="font-family: 'Courier New';">https://&lt;<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup" style="font-family: 'Courier New';">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of organization, but can also be thought of as a company. A company that uses Okta as their SSO portal is generally referred to as an org. As an administrator, you decide how Okta should be displayed and/or integrated with your org.</span></a>&gt;/admin/universaldirectory</span></li>
                                                        </ul>
                                                        <p>
                                                            <h4>Update User Attributes</h4>
                                                        </p>
                                                        <ul>
                                                            <li value="1">Requires write property permissions on user objects within your target OU for the following attributes:<ul><li value="1">mail</li><li value="2">userPrincipalName</li><li value="3">SAMaccountName</li><li value="4">givenName</li><li value="5">sn</li><li value="6">userAccountControl</li><li value="7">pwdLastSet</li><li value="8">lockoutTime</li><li value="9">cn</li><li value="10">name</li></ul></li>
                                                            <li value="2">Requires write property permission on user objects within your target OU for all other attributes mapped on the AD user profile within Okta <span style="font-family: 'Courier New';">https://&lt;org&gt;/admin/universaldirectory</span></li>
                                                        </ul>
                                                        <p>
                                                            <h4>Group Push</h4>
                                                        </p>
                                                        <ul>
                                                            <li value="1">Requires create child permissions for group objects on the target OU.</li>
                                                            <li value="2">Requires delete child permissions for group objects on the target OU.</li>
                                                            <li value="3">Requires write property permissions on group objects within your target OU for the following attributes:<ul><li value="1">sAMAccountName</li><li value="2">description</li><li value="3">groupType</li><li value="4">member</li><li value="5">cn</li><li value="6">name</li></ul></li>
                                                        </ul>
                                                        <p>
                                                            <h4>Reset Password, Forgot Password , and Sync Password</h4>
                                                        </p>
                                                        <ul>
                                                            <li value="1">Requires write property permissions on user objects within your target OU for the following attributes:<ul><li value="1">lockoutTime</li><li value="2">pwdLastSet</li></ul></li>
                                                            <li value="2">Requires Reset Password Control Access Right permission for user objects within your target OU.</li>
                                                        </ul>
                                                        <p>
                                                            <h4>Activate and Deactivate User</h4>
                                                        </p>
                                                        <ul>
                                                            <li value="1">Requires write property permissions on user objects within your target OU for the following attributes:<ul><li value="1">userAccountControl</li></ul></li>
                                                        </ul>
                                                        <p>
                                                            <h4>Reference commands:</h4>
                                                        </p>
                                                        <p>You can add the permissions listed here using the commands below. Save them to a batch file and change the target OU and service account info to be correct for your environment. Remember to remove permissions you do not need and add any attributes you have mapped for provisioning within Okta. You can get the complete list of user attributes from your Directory user profile on <span style="font-family: 'Courier New'; font-size: 11pt;">https://&lt;org&gt;/admin/universaldirectory</span>.</p>
                                                        <blockquote>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;"># Create User</p>
                                                        </blockquote>
                                                        <blockquote>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /G domain\agentserviceaccount:CC;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;"># Create or Update user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;"># include additional attributes that are mapped in your org within Okta</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;mail;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;userPrincipalName;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;sAMAccountName;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;givenName;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;sn;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;userAccountControl;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;pwdLastSet;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;lockoutTime;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;cn;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;name;user</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;"># Create user/Password Reset</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G "domain\agentserviceaccount:CA;Reset Password;user"</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">#Group Push</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /G domain\agentserviceaccount:CCDC;group</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;sAMAccountName;group</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;description;group</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;groupType;group</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;member;group</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;cn;group</p>
                                                            <p style="font-family: 'Courier New';font-size: 11pt;">dsacls "OU=targetOU,DC=domain" /I:S /G domain\agentserviceaccount:WP;name;group</p>
                                                        </blockquote>
                                                        <p>
                                                            <h4>Additional Reference information</h4>
                                                        </p>
                                                        <p>You may find these additional references helpful in setting permissions:</p>
                                                        <ul>
                                                            <li value="1"><b>Delegating Authority in Active Directory:</b> <a href="https://technet.microsoft.com/en-us/library/2007.02.activedirectory.aspx?f=255&amp;amp;MSPPError=-2147217396">https://technet.microsoft.com/en-us/library/2007.02.activedirectory.aspx?f=255&amp;MSPPError=-2147217396</a></li>
                                                            <li value="2"><b>Domain Users group:</b> <a href="https://technet.microsoft.com/en-us/library/dn579255(v=ws.11).aspx?f=255&amp;amp;MSPPError=-2147217396#BKMK_DomainUsers">https://technet.microsoft.com/en-us/library/dn579255%28v=ws.11%29.aspx?f=255&amp;MSPPError=-2147217396#BKMK_DomainUsers</a></li>
                                                            <li value="3"><b>Special Identity groups</b>: <a href="https://technet.microsoft.com/en-us/library/dn617202(v=ws.11).aspx#BKMK_AuthenticatedUser">https://technet.microsoft.com/en-us/library/dn617202(v=ws.11).aspx#BKMK_AuthenticatedUser</a></li>
                                                            <li value="4"><b>DSACLS:</b> <a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc771151(v=ws.11)">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc771151(v=ws.11)</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Installi"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Installing  the Active Directory Agent</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p><b>Important:</b> To ensure that you have up-to-date&#160;functionality and get optimum performance from your Okta AD agent(s), we strongly recommend that you download and install the <a href="../Settings/Version_Histories/Ver_History_AD_Agent.htm">latest version</a> of the agent&#160;on your designated host server(s). If you are running multiple Okta AD agents, make sure that all of them are the same version. <i style="font-weight: bold;">Running different versions within a domain can cause all agents in that domain to function at the level of the oldest agent</i>. This does not affect other domains. </p>
                                                <ol>
                                                    <li value="1">Select&#160;<b>Directory &gt; Directory Integrations</b>.</li>
                                                    <li value="2">Click <b>Add Directory</b> and then select <b>Add Active Directory</b>.</li>
                                                    <li value="3">Click&#160;<b>Set Up Active Directory</b>.&#160;</li>
                                                    <li value="4">Click&#160;<b>Download Agent</b>.</li>
                                                    <li value="5">Double click the file to launch&#160;the installer.</li>
                                                    <li value="6">Click <b>Yes</b> at the message <b>Do you want to allow the following program to make changes to this computer?</b>.</li>
                                                    <li value="7">Choose an installation destination.</li>
                                                    <li value="8">Select the AD domain you want to manage with this agent.</li>
                                                    <li value="9">Select&#160;<b>Create or use the Okta Service account (recommended)</b>&#160;and complete the prompt to set a password.
                <p class="noteindent"><b class="noteindent">Note:</b>&#160;Select&#160;<b>Use an alternate account that I specify</b>&#160;if you want to assign the Okta AD Agent to run as an existing domain user.</p></li>
                                                </ol>
                                                <ol data-mc-continue="true">
                                                    <li value="10">(Optional) If appropriate for your environment, specify a proxy server through which your AD agent will connect.<br />Note:&#160;If you are installing an AD agent version 3.4.11 or later, in environments where internet traffic is required to go through a proxy, the sign-in flow for the AD agent installer uses the proxy settings specified within the installer. If no proxy settings are specified, the machine defaults are used.<br /></li>
                                                    <li value="11"> To register the AD Agent with the Okta service, enter your Okta subdomain name, and then click <b>Next</b>.</li>
                                                    <li value="12"> Enter the username and a password, and then click&#160;<b>Sign in</b>.</li>
                                                    <li value="13">Click&#160;<b>Allow Access</b>.
					<p><b>Note:</b> If the error message displays <i>The underlying connection was closed. Could not establish trust relationship for the SSL/TLS service channel</i>,&#160;see <a href="#Troubles">Troubleshooting</a>.</p></li>
                                                </ol>
                                                <ol data-mc-continue="true">
                                                    <li value="14">Click <b>Finish</b>.</li>
                                                    <li value="15">When the Active Directory agent has started, click <b>Next</b>.</li>
                                                    <li value="16">(First time installations for this domain only)&#160;At the <b>Connect an Organization Unit to Okta</b> screen, select the OUs from which you&#160;want to import users and groups. You can change these and other settings at any time.</li>
                                                    <li value="17">Select the&#160;<b>Okta Username format</b> that you want AD-imported&#160;<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">end users<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>In Okta literature, we generally refer to "end users" as the people who have their own Okta home page (My Applications), using chiclets to authenticate into all of their apps. End users do not have any administrative control. When we refer to "users" we are generally referring to the individual(s) who have administrative control.</span></a> to use when logging in to&#160;Okta.</li>
                                                    <li value="18">Click <b>Next</b>.</li>
                                                    <li value="19">In the <b>Build User Profile</b> tab, select the attributes that you want to use to build your Okta user profiles.</li>
                                                    <li value="20">Click <b>Next</b>.</li>
                                                    <li value="21">When&#160;the initial Active Directory agent configuration is complete,&#160;click <b>Next</b>.</li>
                                                    <li value="22">Click <b>Done</b>.</li>
                                                    <li value="23">To reconfigure OU and&#160;import settings, as well as other settings, return to the&#160;<b>Settings</b> tab (<b>Directory &gt; Directory Integrations&#160;&gt;&#160;Active Directory &gt; Settings</b>). For details, see <a href="#ConfiguringImportProvisioning">Configuring Import and Provisioning Settings</a>.</li>
                                                    <li value="24">Click&#160;<b>Save Settings</b>.</li>
                                                    <li value="25">If you installed the AD agent on a <a href="https://en.wikipedia.org/wiki/DMZ_(computing)">DMZ server</a>, you must <a href="#Ports">open several ports</a>.</li>
                                                </ol>
                                                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Ports"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Open the following ports if installing the AD agent on a DMZ server.</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ul>
                                                            <li value="1">
								135/TCP RPC
							</li>
                                                            <li value="2">
								137/UDP&#160;NetBIOS
							</li>
                                                            <li value="3">
								138/UDP&#160;NetBIOS
							</li>
                                                            <li value="4">
								139/TCP&#160;NetBIOS
							</li>
                                                            <li value="5">
								389/TCP/UDP LDAP
							</li>
                                                            <li value="6">
								636/TCP LDAP SSL
							</li>
                                                            <li value="7">
								3268/TCP LDAP GC
							</li>
                                                            <li value="8">
								3269/TCP LDAP GC SSL
							</li>
                                                            <li value="9">
								53/TCP/UDP DNS
							</li>
                                                            <li value="10">
								88/TCP/UDP Kerberos
							</li>
                                                            <li value="11">
								445/TCP SMB
							</li>
                                                            <li value="12">
								123/UDP NTP
							</li>
                                                        </ul>
                                                        <p>In addition, you must open your DCOM RPC ports. In addition to TCP 135,&#160;Microsoft RPC (MS-RPC) uses randomly generated ports from TCP 49152-65535 for Vista/2008 and above. These ports are also known as "random RPC ports." RPC clients use the RPC Endpoint Mapper (EPM) which runs on TCP135 to tell them which dynamic ports were assigned to the server.</p>
                                                        <p>For detailed information on configuring your ports on a DMZ server, see the <a href="https://support.microsoft.com/">Microsoft Support</a> page. For more information on the required network ports, refer to <a href="https://support.microsoft.com/en-us/help/832017/service-overview-and-network-port-requirements-for-windows">Service overview and network port requirements for Windows</a>. For more information on random RPC ports, refer to How to configure RPC dynamic port allocation to work with firewalls</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Uninstalling and Reinstalling the AD Agent</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p><b>Important:</b> To ensure that you have up-to-date&#160;functionality and get optimum performance from your Okta AD agent(s), we strongly recommend that you download and install the latest version of the agent&#160;on your designated domain server(s). If you are running multiple Okta AD agents, make sure that all of them are the same version. <i style="font-weight: bold;">Running different versions within a domain can cause all agents in that domain to function at the level of the oldest agent</i>. This does not affect other domains. </p>
                                                <p>When you uninstall and reinstall your AD agent, you must decide whether you also want to remove the old Okta API token from your system. If you are performing an upgrade, you are not required to remove the old token. To remove the API token, you must delete the&#160;Okta AD Agent&#160;folder&#160;and deactivate and remove your old AD agent.</p>
                                                <p class="note"><b>Note:</b> To avoid down time if you intend to continue using an AD agent, you must have at least two agents running before you uninstall one of them. For more information, see <a href="#Configur" class="MCXref xref" xrefformat="{paratext}">Configuring High Availability by Installing Multiple Active Directory Agents</a>.</p>
                                                <h3>Uninstalling the AD Agent</h3>
                                                <ol>
                                                    <li value="1">In Windows, select&#160;<b>Start&#160;&gt;&#160;Control Panel&#160;&gt;&#160;Programs&#160;&gt;&#160;Programs and Features</b>.</li>
                                                    <li value="2">Select the <b>Okta AD Agent</b>, and then select&#160;<b>Uninstall</b>.</li>
                                                    <li value="3">Uninstalling your AD agent leaves the agent configuration data on your hard drive. <ul><li value="1">To remove the configuration data, on the agent server, go to&#160;<b>C:\Program Files (x86)\Okta</b> and delete the&#160;<b>Okta AD Agent</b>&#160;folder. Deleting this folder removes the agent configuration data and the API Token from your hard drive.&#160;The API token for the server is still valid in Okta so it is important to remove the configuration data. </li><li value="2">Revoke the API token by going to the agent monitor in Okta. Deactivate and remove the uninstalled agent, which will remove the API token.</li></ul></li>
                                                </ol>
                                                <h3>Reinstalling the AD Agent</h3>
                                                <p>Installing the AD agent does not overwrite the configuration data in the&#160;<b>Okta AD Agent</b>&#160;folder. If you want to reinstall and create a new API token, make sure you delete the&#160;Okta AD Agent&#160;folder (as described above) before you reinstall the AD agent. Then perform the following steps to reinstall your AD agent and deactivate and remove the old AD agent in Okta:</p>
                                                <ol>
                                                    <li value="1">Perform the AD agent installation procedure described in <a href="#Installi" class="MCXref xref" xrefformat="{paratext}">Installing  the Active Directory Agent</a>.</li>
                                                    <li value="2">Select&#160;<b>Directory&#160;&gt;&#160;Directory Integrations</b>.</li>
                                                    <li value="3">Click <b>Active Directory</b>.</li>
                                                    <li value="4">In the&#160;<b>Settings</b>&#160;tab, your agents are listed in the&#160;Agent Monitors&#160;section. Confirm that your reinstalled AD agent is connected to Okta and appears in the list. You should always make sure to have at least one AD agent online.</li>
                                                </ol>
                                                <p>If you are performing an upgrade or reinstall and you do not want to revoke the Okta API token of the old AD agent, you are finished. Otherwise, proceed to the next step.</p>
                                                <ol data-mc-continue="true">
                                                    <li value="5">Under&#160;<b>Agent Monitors</b>, select the&#160;<b>Deactivate</b>&#160;link for the old AD agent and then click&#160;<b>Ok</b>&#160;to confirm.&#160;Deactivating the agent revokes its API token.</li>
                                                    <li value="6">Click the&#160;<b>Remove</b>&#160;link for the old AD agent and then click&#160;<b>Ok</b>&#160;to confirm.</li>
                                                </ol>
                                                <h3>Upgrading in place</h3>
                                                <p>It is possible to upgrade the agent without having to uninstall it. The agent installer will automatically upgrade an existing agent.</p>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Delegate"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Delegated Authentication</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p><a name="InstanceLevelDelAuth"></a>Delegated authentication (Del Auth) makes your users' Okta credentials the same as their AD credentials. Enable it if you want Active Directory (AD) to authenticate your users when they sign into Okta.</p>
                                                <p>Instance-Level Del Auth moves Del Auth enablement from the org-level (<b>Security &gt;&#160;Delegated Authentication</b>) to the instance-level (<b>Directory &gt;&#160;Directory Integrations</b>).&#160;While preserving current Del Auth functionality, instance-level Del Auth is optimized for use in environments with multiple AD instances. It allows admins to delegate authentication on a per AD-instance level to support more granular authentication scenarios such as the following:</p>
                                                <ul>
                                                    <li value="1">Configure Okta to be the authentication master for users in some AD instances.</li>
                                                    <li value="2">Configure AD to be the authentication master for users in the remaining AD instances (meaning users sign-in using their Windows credentials).</li>
                                                    <li value="3">
                                                        <p>Continue to rely on Okta to provision to all AD instances.</p>
                                                    </li>
                                                </ul>
                                                <p>When Instance-Level Del Auth is enabled, you can configure it in <b>Directory &gt;&#160;Directory Integrations &gt;&#160;Active Directory &gt;&#160;Settings</b>. Your former org-level delegated authentication settings are preserved but no longer managed from <b>Security &gt;&#160;Delegated Authentication &gt;&#160;Active Directory</b>.</p>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="ConfiguringImportProvisioning"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Configuring Import and Provisioning&#160;Settings</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>Options in this section allow you&#160;to&#160;configure import and provisioning&#160;settings, as well as&#160;make changes to&#160;your initial configuration.</p>
                                                <h3>IMPORT AND ACCOUNT SETTINGS</h3>
                                                <p>Select&#160;<b>Directory&#160;&gt;&#160;Directory Integrations&#160;&gt;&#160;Active Directory</b> and then select the <b>Settings</b> tab.</p>
                                                <h4>Separate OU selectors</h4>
                                                <p> Separate OU selectors for Users and Groups allows you to separately specify the OUs from which to import users, and from which to import groups. This also allows you to ignore the OUs that contain users or groups that you don't want in Okta.                 </p>
                                                <ul>
                                                    <li value="1"><b>User OUs connected to Okta</b> – Select the organizational units from which to import users.</li>
                                                    <li value="2"><b>Group OUs connected to Okta</b> – Select the organizational units from which to import groups.</li>
                                                </ul>
                                                <p>To select all OUs, select the top folder. Or you can select individual OUs.</p>
                                                <p><b>Note:</b> If you are running a <b>pre-3.3.5</b> version of the agent, changes to Group OU settings will not take effect for JIT Provisioning until you restart your agents. To avoid the need to restart agents each time you change this setting, upgrade all of your AD agents to version 3.3.5 or later.</p>
                                                <p class="earlyaccess"><span class="okta-variablesEarlyAccess">This is an Early Access feature. To enable it, please contact Okta Support.</span>
                                                </p>
                                                <h4><a name="UserGroupFilters"></a>User and Group filters (EA)</h4>
                                                <p> Using filters allows you to perform granular imports from Active Directory. Create <a href="https://technet.microsoft.com/en-us/library/aa996205(v=exchg.65).aspx">syntax queries</a> to selectively import users matching the criteria that you specify. 
						
						</p>
                                                <p><b>Caution:</b> Changing the default filter queries can result in deprovisioning users. To avoid unintended results, Okta strongly recommends that you test these filters in your directory environment to make sure that the results match your expectations. </p>
                                                <p>Default queries:</p>
                                                <ul>
                                                    <li value="1"><b>User filter</b> – <span style="font-family: 'Courier New';">sAMAccountType=805306368</span></li>
                                                    <li value="2"><b>Group filter</b> – <span style="font-family: 'Courier New';">objectCategory=group</span></li>
                                                </ul>
                                                <p>For more about importing groups, see these related topics:</p>
                                                <ul>
                                                    <li value="1"><a href="Directory_Groups.htm">Groups</a>
                                                    </li>
                                                    <li value="2"><a href="Directory_FAQ_Okta_and_AD_Groups.htm">FAQ:&#160;Okta and AD&#160;Groups</a>
                                                    </li>
                                                </ul>
                                                <h4>Just in-Time Provisioning (JIT)</h4>
                                                <p style="text-align: left;">Select <b>Create and update users on login</b> to create and update users at sign on. This option can be used with or without scheduled imports.</p>
                                                <p>Okta JIT&#160;allows for the automatic creation of new user accounts at sign on, as well as updates to existing user profiles. The security groups to which the user&#160;belongs are also imported if the group belongs to a selected OU. If a user signing in does not belong to a selected OU, the sign in fails.</p>
                                                <p>

There are membership&#160;inconsistencies that can occur between “regular” imports and JIT provisioning. These membership&#160;anomalies&#160;may occur when using nested groups.
During regular imports, a child group that is outside the <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">scope<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A scope is an indication by the client that it wants to access some resource.</span></a> of an AD OU or LDAP object filter cannot be detected. If a parent group is within an OU/object filter scope but its child groups are not, the parent group membership is incorrectly resolved during import. JIT provisioning would correctly resolve these memberships to the parent group because its function only detects "flat" memberships.&#160;</p>
                                                <h5>JIT and AD Domains</h5>
                                                <p>For details about JIT and AD domain scenarios, see <a href="Directory_FAQ_Okta_and_AD_Groups.htm" class="MCXref xref" xrefformat="{paratext}">FAQ: Okta and AD Groups</a>.</p>
                                                <h5>Delegated Auth and Desktop SSO</h5>
                                                <p>There are other forms of JIT that integrate with AD. Namely, delegated authentication for Windows environments, and Desktop <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">SSO<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for single sign-on. In a SSO system, a user logs in once to the system and can access multiple systems without being prompted to sign in for each one. Okta is a cloud-based SSO platform that allows users to enter one name and password to access multiple applications. Users can access all of their web applications, both behind the firewall and in the cloud, with a single sign in. Okta provides a seamless experience across PCs, laptops, tablets, and smartphones.</span></a> for imports that can be verified on the <b>Imports</b> page. For details, see <a href="../Security/Security_Authentication.htm">Delegated Authentication</a>.</p>
                                                <h4><b>Schedule import</b>&#160;</h4>
                                                <p>Determine how often you want Okta to import users from AD. Select <b>Do not import new users</b>&#160;to leverage scheduled imports to keep user profiles and groups in sync without importing new users from your directory. Use it when you only want to  create new users in Okta via&#160;JIT, not via imports, yet continue to use imports to sync groups and group memberships.</p>
                                                <p class="note"><b>Note:</b> Following a successful import, under specific conditions Okta automatically&#160;sends an email to designated administrators. The email&#160;details the number of users and groups scanned, added, updated, or removed during the import. Okta only sends the email if the scan detects&#160;any new users or groups, or changes to any existing user profile or group membership.</p>
                                                <h4><b>Okta username format</b> </h4>
                                                <p><b>Note:</b>&#160;Orgs created after October 4th (Preview) or October 9th, 2017 (Production)&#160;may see slightly different import and provisioning options in the user interface elements described below. These changes will be rolled out to orgs created before these dates at a later date, which will be announced in the Release Notes. For details about the import and provisioning changes, see <a href="Okta_Active_Directory_Agent_UDMappingchanges.htm">AD Updated Profile Mapping options</a>.</p>
                                                <p>Specify a username format.&#160;When you import users from AD, Okta uses this attribute&#160;to generate the Okta username. If you select SAM Account Name, Okta combines the <b>SAM Account Name</b> with the AD domain to generate the Okta username. For example, if the SAM Account Name is&#160;<b>jdoe</b>&#160;and the AD domain is&#160;<b>mycompany.okta.com</b>, then the Okta username is&#160;<b>jdoe@mycompany.okta.com</b>.
When using the "SAM Account Name + Configurable Suffix" option, do not include the @ character before the Configurable Domain.<![CDATA[                ]]><p class="note"><b>Note:</b>&#160;All Okta users can sign in by entering the alias part of their user names as long as it maps to a single user in your organization. For example,&#160;<b>jdoe@mycompany.okta.com</b>&#160;could sign in using&#160;<b>jdoe</b>.</p></p>
                                                <h4><b>Activation emails</b> </h4>
                                                <p> You can optionally select&#160;<b>Don't send new user activation emails for this domain</b> to prevent Okta from sending an activation email to new users.</p>
                                                <h4><b>USG support</b>&#160;</h4>
                                                <p>Select the&#160;<b>Universal Security Group</b> (USG)&#160;option if you want to ignore domain boundaries when importing&#160;group memberships for your users. This assumes that the relevant&#160;domains are connected in Okta.
                <p>You must also deploy an AD agent for every domain in your forest&#160;that contains the USG&#160;object that you want to sync with Okta. Each connected&#160;domain then imports its groups. When a user’s group memberships match any groups that were imported (from any connected domain in the forest), Okta syncs the memberships for the user to each group.&#160; Only groups from connected domains are imported.</p></p>
                                                <h3><a name="IMPORT"></a>IMPORT MATCHING RULES</h3>
                                                <p>If there is an existing Okta account, AD allows you to import and confirm users automatically.&#160;Select the automatic confirmation option that matches the policies of your organization:</p>
                                                <p class="note"><b class="note">Note:</b> This feature does not apply to CSV-imported user lists.</p>
                                                <p class="note">
                                                    <img src="../../Resources/Images/UIMatching_Old.jpg" />
                                                </p>
                                                <p>Matching rules are used in the import of users from all apps and directories that allow importing. Establishing matching criteria allows you to specify how an imported user should be defined as a new user or mapped to an existing Okta user. </p>
                                                <p><b>Imported user is an exact match to Okta user if</b>: the match criteria that establishes whether an imported user exactly matches an existing Okta user.
Choose any combination from the list of options to establish your criteria. For the new imported user to be considered an exact match, each option that you select must be true. Note that if you choose the third option, the first and second choices are disabled.
</p>
                                                <p><b>Allow partial matches</b>: Partial matching occurs when the first and last name of an imported user matches that of an existing Okta user, but the user’s username or/and email address do not.
</p>
                                                <p><b>Confirm matched users</b>: Select to automate the confirmation or activation of existing users. Unchecked, matches are confirmed manually.
</p>
                                                <p><b>Confirm new users</b>: Select to automate the confirmation or activation of a newly imported user. If this option is selected, you can uncheck it during import confirmation. Note that this feature does not apply for users who already exist in Okta.
</p>
                                                <h3><a name="Prov_Features_AD"></a>PROVISIONING FEATURES</h3>
                                                <h2>Create Users&#160;</h2>
                                                <p><b>Note:</b>&#160;Orgs created after October 19th (Preview) or October 25th, 2017 (Production)&#160;may see slightly different import and provisioning options in the user interface elements described below. These changes will be rolled out to orgs created before these dates at a later date, which will be announced in the Release Notes. For details about the import and provisioning changes, see <a href="Okta_Active_Directory_Agent_UDMappingchanges.htm">AD Updated Profile Mapping options</a>.</p>
                                                <p>Checking the <b>Enable</b> box creates or links a user in Active Directory.
</p>
                                                <ul>
                                                    <li value="1"><b>Activation email recipient</b> – Specify where to send&#160;the&#160;new AD account credentials. The recipient is responsible for distributing the credential information to the appropriate user.</li>
                                                    <li value="2"><b>AD username format</b>&#160;– Specify a default AD username format.
		
				</li>
                                                    <li value="3"><b>AD common name format</b>&#160;–&#160;Specify a default AD common name format.</li>
                                                    <li value="4"><b>Exclude AD username update</b>&#160;–&#160;If you select this option, Okta does not update the user names of existing AD accounts that are Okta mastered when you change the default username format. You can still provision new AD accounts from Okta.</li>
                                                </ul>
                                                <h2>Update User Attributes </h2>
                                                <p>Okta updates a user's attributes in Active Directory when the <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">app<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of application. Essentially, it is a web-based site used to perform any number of specific tasks, and requires authentication from end users by signing in.</span></a> is assigned. Future attribute changes made to the Okta user profile automatically overwrite the corresponding attribute value in Active Directory. For details, see <a href="AD_Move_user_across_OU.htm" class="MCXref xref" xrefformat="{paratext}">Enable Okta-mastered user OU changes</a>.</p>
                                                <p class="earlyaccess">This is an Early Access feature. To enable it, please contact <a href="https://support.okta.com/">Okta Support</a>.</p>
                                                <p><b>Update OU</b>:&#160;Select this option to update an Okta-mastered user's OU when the group that provisions a user to AD changes. </p>
                                                <p><b>Note</b>:&#160;If an Okta-mastered user's OU changes in AD, that change will not be reflected in Okta since Okta is the master for that user. The next time the user is update in Okta, they will be provisioned back to the OU as set in Okta.</p>
                                                <h2><span style="font-weight: normal;">Deactivate Users</span>
                                                </h2>
                                                <p>Deactivates users' Active Directory account when they are unassigned in Okta or their Okta account is deactivated. Accounts can be reactivated if the app is reassigned to a user in Okta.</p>
                                                <h2>Profile Master</h2>
                                                <p>Enabled by default, profile mastering makes Active Directory the identity authority for connected users. When enabled, user profiles are not editable in Okta and all changes are synced to Okta during provisioning events. AD defaults as a <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">profile master<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A profile master is an application (usually a directory service such as Active Directory, or human capital management system such as Workday) that acts as a source of truth for user profile attributes. A user can only be mastered by a single application or directory at any one time. For more details, see Using the Okta People Page.</span></a>, but you can disable this option to have AD treated as a normal application. </p>
                                                <p>If you disable AD as the profile master, user&#160;updates performed in AD&#160;are <i>not</i>&#160;pushed back to the user in Okta.&#160;For example, if you change a user's name in AD, the name change is not pushed to the Okta user account. In addition, you cannot reset a user's AD password in Okta because their credentials are still being managed by AD. You can, however,  enable the <b>Sync Password</b> option to&#160;push passwords to Active Directory and disable <a href="../Security/Security_Authentication.htm#Enabling">Delegated Authentication</a>. Your users will have their delegated Okta password, but any subsequent password updates are pushed to AD.</p>
                                                <p class="earlyaccess"><span class="okta-variablesEarlyAccess">This is an Early Access feature. To enable it, please contact Okta Support.</span>
                                                </p>
                                                <p style="font-weight: bold;">LIFECYCLE SETTINGS</p>
                                                <p>This section allows you to determine what happens when a user is deactivated in an app: should they be <i>deactivated</i>,<i> suspended </i>or<i> remain an active user</i> is Okta? </p>
                                                <h5><b>When a user is deactivated in the app</b>
                                                </h5>
                                                <p>
                                                    <img src="../../Resources/Images/LC_Settings.jpg" />
                                                </p>
                                                <ul>
                                                    <li value="1"><b>Do Nothing</b>:
 Prevents activity in the app from controlling the user life cycle. This still allows profile master control of attributes and mappings.

</li>
                                                    <li value="2"><b>Deactivate Okta user</b>:
This default setting allows the user to be automatically deactivated when deactivated in the target app.</li>
                                                    <li value="3"><b>Suspend Okta user</b>:
This setting allows the user to be automatically suspended when deactivated in the target app.</li>
                                                </ul>
                                                <h5>When a user is reactivated in the app
</h5>
                                                <ul>
                                                    <li value="1"><b>Reactivate suspended users</b>:
Allows an admin to choose if a <i>suspended</i> Okta user should be reactivated when they have been reactivated in the app.

</li>
                                                    <li value="2"><b>Reactivate deactivated users</b>:
Allows an admin to choose if a <i>deactivated</i> Okta user should be reactivated when they have been reactivated in the app.
</li>
                                                </ul>
                                                <p>Only the highest priority profile master for an Okta user can deactivate or suspend an Okta user. To verify the highest priority profile master, review the <a href="Directory_Profile_Masters.htm#top">Profile Masters</a> page.

</p>
                                                <h2>Sync Password&#160;</h2>
                                                <p>Enable this option if you want&#160;each user's&#160;AD password to be&#160;synced to their Okta password. Any subsequent password changes users&#160;make are pushed to their user profile in AD. To enable the&#160;Sync Password option, Delegated Authentication must be disabled. For more information, see <a href="../Security/Security_Using_Sync_Password.htm">Using Sync Password</a>.</p>
                                                <h2>Profile Attributes &amp; Mappings</h2>
                                                <p>For information about profile attributes and mappings, see <a href="Custom_Attributes_with_AD.htm">Using Custom Attributes with Active Directory</a>.</p>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Registering Multiple Domains From One AD Agent</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>Okta AD integration support also allows you to set up multiple domains from one AD agent, reducing the number of servers or virtual machines you need to connect to multiple domains.&#160;After you install the AD agent, you can use the Okta AD Agent Management Utility to add more domains.</p>
                                                <ol>
                                                    <li value="1">On your Windows desktop, select <b>Start &gt; All Programs &gt; Okta &gt; Okta AD Agent &gt; Okta AD Agent Manager</b>.</li>
                                                    <li value="2">Select <b>Domains</b>.</li>
                                                    <li value="3">In the drop-down menu containing the grayed-out text&#160;<b>choose another domain</b>, select the domain that you want to add, and then click&#160;<b>Register</b>. Alternatively, you can type the desired domain name in the drop-down field, and then click&#160;<b>Register</b>.</li>
                                                </ol>
                                                <p class="bodyindent">If you have not entered your Okta administrator credentials, you are prompted to do so.</p>
                                                <ol data-mc-continue="true">
                                                    <li value="4">A message appears stating&#160;that your new domain has been registered and prompting you to restart the agent. Optionally register additional domains. Restart your AD agent after you are finished.</li>
                                                </ol>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Configur"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Configuring High Availability by Installing Multiple Active Directory Agents</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>To configure high availability, you can install additional AD agents on separate servers or virtual machines. We recommend setting up two or more AD agents per domain.</p>
                                                <p class="note"><b>Note:</b> Installing multiple agents in close geographical proximity to your users does not enhance performance. When you have multiple agents installed, the process randomly selects which agent it uses so user location is not a factor. In addition, setting up large numbers of agents in this manner can cause problems when the system attempts to perform status checks on their performance.</p>
                                                <p>Setting up a second AD agent follows the same steps as setting up your first agent. If you created the Okta service account with the first AD agent, then you are prompted to enter your password during the second agent installation.</p>
                                                <h4>To install additional AD agents on a domain:</h4>
                                                <ol>
                                                    <li value="1">Select&#160;<b>Directory&#160;&gt;&#160;Directory Integrations</b>.</li>
                                                    <li value="2">Click <b>Active Directory</b>.</li>
                                                    <li value="3">Select the&#160;Settings&#160;tab. Your agents are listed in the&#160;Agent Monitors&#160;section.</li>
                                                    <li value="4">Click&#160;<b>Add Agent</b>.</li>
                                                    <li value="5">Run the installer as described in <a href="#Installi" class="MCXref xref" xrefformat="{paratext}">Installing  the Active Directory Agent</a>.</li>
                                                </ol>
                                                <p class="bodyindent">You can check the status console in&#160;the Admin app to make sure that the second agent was installed. A green circle next to the agent name indicates the agent&#160;is connected and healthy.</p>
                                                <h3>AD Agent Request Handling</h3>
                                                <p>Each agent connects to the Okta service independently. When the service needs to communicate to AD (for example, to authenticate a user), it picks one of the available agents and sends it a task to complete. If one of the agents becomes unavailable, it is automatically removed from the queue and not given additional tasks.</p>
                                                <h3>Agent Availability</h3>
                                                <p>Agents send periodic messages to the service. If the service does not receive a message for 120 seconds, it is marked as unavailable.</p>
                                                <h3>Domain Controller Selection</h3>
                                                <p>The AD agent relies on the underlying operating system to select which domain controller to communicate with.</p>
                                                <h3>Changing the AD Agent User</h3>
                                                <ol>
                                                    <li value="1">Sign in to the server running the AD Agent.</li>
                                                    <li value="2">From the Start&#160;menu, type  <b>run</b>, then type&#160;<b>services.msc</b>.
            <li value="3">Locate the&#160;<b>Okta AD Agent Service</b>.</li></li>
                                                    <li value="3">Right click the&#160;<b>Okta AD Agent</b>&#160;Service and select&#160;<b>Properties</b>.</li>
                                                    <li value="4">Select the&#160;<b>Log On</b>&#160;tab and change the account credentials.
            </li>
                                                    <li value="5">Restart the service and verify that the agent displays as green in your Okta org.</li>
                                                </ol>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Configuring the Number of Threads the AD Agent Uses</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <p>You can configure the number of threads the&#160;AD agent&#160;uses to poll the server for tasks. If you are running the AD agent on a large-scale server, you can increase the thread count as an alternative to using multiple AD agents.</p>
                                                <p>For example, to create&#160;three&#160;instances, do the following:</p>
                                                <ol>
                                                    <li value="1">Before opening or modifying the AD agent configuration files, stop the AD agent service under Windows Services.</li>
                                                    <li value="2">From the terminal, locate the&#160;<span style="font-family: 'Courier New';">OktaAgentService.exe.instances.config</span>&#160;file for each AD&#160;agent server:&#160;<p>C:\Program Files (x86)\Okta\Okta AD Agent\OktaAgentService.exe.config</p></li>
                                                    <li value="3">
                                                        <p>Open the 'OktaAgentService.exe.config' file in a suitable text editor program and then locate the following line:</p>
                                                        <p>&lt;add key="PollingThreads" value="2" /&gt;</p>
                                                        <p>The default value is 2 and the valid range is 1 - 10. As an example to increase the number of polling threads to four, edit the line to look like this:</p>
                                                        <p>&lt;add key="PollingThreads" value="4" /&gt;</p>
                                                    </li>
                                                    <li value="4">Save the file.</li>
                                                    <li value="5">Start the agent.</li>
                                                    <li value="6">
                                                        <p>Once the change has been made, save the file and then start the Okta AD agent service again. You can verify that the setting has changed by opening the agent.log file at startup and observing the startup information towards the bottom of the file:</p>
                                                        <p><span style="font-family: 'Courier New';">2017/07/21 06:06:22.167 Debug – TEST-SERVER-1(4) – PollingThreads: 4</span>
                                                        </p>
                                                    </li>
                                                </ol>
                                                <p>Now the agent has four concurrent polling threads searching for actions to perform.</p>
                                                <p class="note"><b>Note:</b> There is a 10 thread limitation for this feature.</p>
                                            </div>
                                        </div>
                                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Troubles"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Troubleshooting</a></span>
                                            <div class="MCDropDownBody dropDownBody">
                                                <h4>Error when resetting a Windows password</h4>
                                                <p>If the following error displays when your end users try to reset their Windows password in Okta,</p>
                                                <p><i>New Windows password: Unexpected error when changing password, please try again</i>
                                                </p>
                                                <p>. . . and the following description was written to <b>Reports &gt; System Log</b> at the same time,</p>
                                                <p style="font-weight: normal;font-style: italic;">UnavailableCriticalExtension</p>
                                                <p>. . . then&#160;you are probably not enforcing Active Directory's <b>Password History policy</b>. To enforce the policy, make sure that your&#160;Okta AD Agent is&#160;<b>version 3.4.1</b>&#160;or later and your Domain Controllers are running&#160;<b>Windows Server 2008 R2</b> or later.</p>
                                                <h4>Error when installing the agent</h4>
                                                <p>During agent installation, if the error message displays,</p>
                                                <p style="font-style: italic;">The underlying connection was closed. Could not establish trust relationship for the SSL/TLS service channel</p>
                                                <p>. . . then you are probably attempting to install a version of the AD agent&#160;in which SSL&#160;pinning is enabled by default and your environment is one in which the agent's support for SSL certificate pinning prevents communication with the Okta server. This is most likely to occur in environments that rely on SSL proxies. To allow installation to complete in this case, Okta recommends that you <b>bypass SSL proxy processing</b> by adding the domain <i>okta.com</i> to a whitelist.</p>
                                                <p>Alternatively, if SSL certificate pinning is enabled you can choose to disable it as described below.</p>
                                                <h4>To disable SSL certificate pinning if it is enabled</h4>
                                                <ol>
                                                    <li value="1">Perform steps 1 through 4 of the procedure <a href="#Installi" class="MCXref xref" xrefformat="{paratext}">Installing  the Active Directory Agent</a>.</li>
                                                    <li value="2">Instead of double-clicking the file as directed in step 5, open a command line terminal and enter the following:</li>
                                                </ol>
                                                <p style="font-family: 'Courier New';">OktaADAgentSetup.exe OktaDisableSslPinning=1</p>
                                                <ol data-mc-continue="true">
                                                    <li value="3">Press Enter.</li>
                                                    <li value="4">Complete the installation as described in Installing and Configuring the Agent.</li>
                                                </ol>
                                                <h4>To re-enable support for SSL certificate pinning if it is disabled</h4>
                                                <ol>
                                                    <li value="1">Locate and open the AD agent configuration file:
               
                <p style="font-family: 'Courier New';">C:\Program Files (x86)\Okta\Okta AD Agent\OktaADAgentSetup.exe.config</p></li>
                                                    <li value="2">Change the SSL&#160;pinning enabled&#160;setting to True:
                
                <p style="font-family: 'Courier New';">"SslPinningEnabled" value="True"</p></li>
                                                    <li value="3">Save the configuration file and restart the agent.</li>
                                                </ol>
                                                <p class="bodyindent">For more information about SSL certificate pinning, see the article by the <a href="https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning">Open Web Application Security Project</a>.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                    </div>
                                </div>
                                <div class="Footer">
                                    <div>
                                        <p class="copyright">© Copyright 2017 Okta, Inc.</p>
                                    </div>
                                    <div>
                                        <p>&#160;</p>
                                    </div>
                                    <div>
                                        <p>&#160;</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>