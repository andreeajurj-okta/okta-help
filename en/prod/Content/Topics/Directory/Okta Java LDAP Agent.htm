<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Okta Java LDAP Agent</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.5.5.0.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/okta-help-MainStyles.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.separator-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.5.5.0_custom.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.offcanvas.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap">
            <div class="off-canvas-wrap" data-offcanvas="">
                <section class="inner-wrap">
                    <nav class="tab-bar" data-mc-ignore="true">
                        <section class="middle tab-bar-section outer-row clearfix">
                            <div class="relative clearfix"><a class="logo" href="../Overview.htm" alt="Okta"></a>
                                <div class="navigation-wrapper">
                                    <ul class="navigation clearfix">
                                        <li><a href="https://support.okta.com/help/SearchAnnouncement?sub=Announcements%3ARelease_Notes">Release Notes</a>
                                        </li>
                                        <li class="has-children"><a href="#">Features</a>
                                            <ul class="sub-menu">
                                                <li><a href="../Dashboard/Dashboard.htm">Dashboard</a>
                                                </li>
                                                <li class="has-children"><a href="Directory.htm">Directory</a>
                                                    <ul class="sub-menu">
                                                        <li><a href="Directory_People.htm">People</a>
                                                        </li>
                                                        <li><a href="Directory_Groups.htm">Groups</a>
                                                        </li>
                                                        <li><a href="Directory_Profile_Editor.htm">Profile Editor</a>
                                                        </li>
                                                        <li><a href="Directory_Directory_Integrations.htm">Directory Integrations</a>
                                                        </li>
                                                        <li><a href="Directory_Profile_Masters.htm">Profile Masters</a>
                                                        </li>
                                                        <li><a href="Configuring_Desktop_SSO.htm">Configuring Desktop SSO</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="has-children"><a href="../Apps/Apps_Apps.htm">Apps</a>
                                                    <ul class="sub-menu">
                                                        <li><a href="../Apps/Apps_Apps_Page.htm">Using the Applications Page</a>
                                                        </li>
                                                        <li><a href="../Apps/Apps_App_Integration_Wizard.htm">Using the App Integration Wizard</a>
                                                        </li>
                                                        <li><a href="../Apps/Access_Request_Workflow.htm">Access Request Workflow</a>
                                                        </li>
                                                        <li><a href="../Apps/Apps_Okta_Mobile.htm">Using Okta Mobile</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="has-children"><a href="../Security/Security_at_Okta.htm">Security</a>
                                                    <ul class="sub-menu">
                                                        <li><a href="../Security/Security_Policies.htm">Security Policies</a>
                                                        </li>
                                                        <li><a href="../Security/Security_Authentication.htm">Authentication</a>
                                                        </li>
                                                        <li><a href="../Security/MFA.htm">Multifactor</a>
                                                        </li>
                                                        <li><a href="../Security/Identity_Providers.htm">Identity Providers</a>
                                                        </li>
                                                        <li><a href="../Security/Security_Network.htm">Network</a>
                                                        </li>
                                                        <li><a href="../Security/Administrators.htm">Administrators</a>
                                                        </li>
                                                        <li><a href="../Security/API.htm">API</a>
                                                        </li>
                                                        <li><a href="https://support.okta.com/help/answers#!/feedtype=RECENT&amp;dc=xSecurity&amp;criteria=BESTANSWERS">Community: Security Discussions</a>
                                                        </li>
                                                        <li><a href="https://support.okta.com/help/articles/Knowledge_Article/A-Quick-Look-at-Securing-Okta">Video: A Quick Look at Securing Okta</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="has-children"><a href="../Reports/Reports.htm">Reports</a>
                                                    <ul class="sub-menu">
                                                        <li><a href="../Reports/Reports_SysLog.htm">System Log</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a href="../Mobile/Okta_Mobile_Connect.htm">Mobile</a>
                                                </li>
                                                <li class="has-children"><a href="../Settings/Settings.htm">Settings</a>
                                                    <ul class="sub-menu">
                                                        <li><a href="../Settings/Settings_Account.htm">Account</a>
                                                        </li>
                                                        <li><a href="../Settings/Settings_Appearance.htm">Appearance</a>
                                                        </li>
                                                        <li><a href="../Settings/Settings_Customization.htm">Customization</a>
                                                        </li>
                                                        <li><a href="../Settings/Settings_Email.htm">Email and SMS Options</a>
                                                        </li>
                                                        <li><a href="../Settings/Settings_Downloads.htm">Downloads</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                        <li><a href="https://support.okta.com">Support</a>
                                        </li>
                                    </ul>
                                </div><a class="menu-icon right-off-canvas-toggle" href="#"><span></span></a>
                            </div>
                        </section>
                        <div class="nav-search row outer-row">
                            <form class="search" action="#">
                                <div class="search-bar search-bar-container needs-pie">
                                    <input class="search-field needs-pie" type="search" placeholder="Search" />
                                    <div class="search-filter-wrapper">
                                        <div class="search-filter">
                                            <div class="search-filter-content">
                                                <ul>
                                                    <li>All Files</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="search-submit-wrapper" dir="ltr">
                                        <div class="search-submit" title="Search">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </nav>
                    <aside class="right-off-canvas-menu" data-mc-ignore="true">
                        <ul class="off-canvas-list" data-mc-back-link="Back" data-mc-css-tree-node-expanded="has-submenu" data-mc-css-tree-node-collapsed="has-submenu" data-mc-css-sub-menu="right-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.fndtn.offcanvas" data-mc-toc="True">
                        </ul>
                    </aside>
                    <section class="main-section">
                        <div class="row outer-row" data-mc-content-body="True">
                            <div class="content">
                                <div id="contentBody">
                                    <div class="row collapse">
                                        <div class="sideContent">
                                            <div class="clearfix">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component">
                                                    <div class="button-group-container-left">
                                                        <div class="button-separator">
                                                        </div>
                                                        <button class="button needs-pie print-button" title="Print">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                        </button>
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <h1>Okta Java LDAP Agent</h1>
                                        <p>To integrate Okta with your LDAP directory, install and configure the LDAP agent as described in this article. LDAP integration allows end users to authenticate to Okta using their LDAP credentials&#160;without replicating those credentials into the cloud. In addition, Okta can import user accounts and attributes into the cloud service to improve performance and support complex scenarios. Okta’s LDAP integration helps organizations leverage current identity directory investments when controlling access to Okta-protected resources.</p>
                                        <p>For more information about Okta's LDAP agent, see the LDAP Agent Deployment Guide.</p>
                                        <h2>Requirements</h2>
                                        <p>Okta can integrate with most LDAPv3 directories. The configuration wizard provides templates for the following distributions:</p>
                                        <ul>
                                            <li value="1">OpenDJ</li>
                                            <li value="2">OpenLDAP</li>
                                            <li value="3">Oracle Internet Directory</li>
                                            <li value="4">IBM</li>
                                            <li value="5">Sun One LDAP 5.2+, 6.x and 7.x</li>
                                            <li value="6">Active Directory Lightweight Directory Services (AD LDS) (Windows Agent Only)</li>
                                        </ul>
                                        <p>To integrate&#160;Okta with your LDAP instance, you need the following:</p>
                                        <ul>
                                            <li value="1">For Windows Agents&#160;–&#160;Windows Server 2003 R2 or later is required for the Windows-based agent. The Windows server must be able to reach the LDAP host and port.</li>
                                            <li value="2">For Linux Agents&#160;–&#160;The Linux-based agent must be installed on an RPM-enabled Linux distribution such as CentOS or Red Hat.</li>
                                            <li value="3">An Okta administrator account to connect the agent with your Okta org.</li>
                                            <li value="4">An LDAP user to perform binds and queries from the agent to your LDAP directory. This user must have the ability to look up users and groups/roles in the Directory Information Tree (DIT).</li>
                                        </ul>
                                        <p><b>Important:</b> If you are upgrading from a version 4.x agent&#160;or earlier to a&#160;version 5.x&#160;agent, you must first uninstall the old agent before installing the new agent. See the OS-specific installation instructions below.</p>
                                        <h2><a name="Installi"></a>Installing the LDAP Agent on Linux</h2>
                                        <ol>
                                            <li value="1">Select <b>Directory &gt; Directory Integrations</b>.</li>
                                            <li value="2">Select <b>Add LDAP Directory</b>.</li>
                                            <li value="3">Review the installation requirements, and then click&#160;<b>Set Up LDAP</b>.</li>
                                            <li value="4">Click <b>Download Agent</b>.</li>
                                            <li value="5">From the drop-down menu, choose your required installer option (<b>.rpm</b> or <b>.deb</b>).</li>
                                            <li value="6">After downloading the agent, you must install it on your Linux server. Sign in&#160;to your Linux server as the root user, copy the agent <b>.rpm</b> or <b>.deb</b> file to a scratch directory, and then <b>cd</b> to that directory.</li>
                                            <li value="7">To install the agent, issue one of the following&#160;commands from a command line:
        <ul><li value="1"><b>RPM:</b>&#160;<pre>yum localinstall OktaLDAPAgent_xx.xx.xx.x86_64.rpm</pre></li><li value="2"><b>Debian:</b>&#160;<pre>dpkg -i OktaLDAPAgent_xx.xx.xx_amd64.deb</pre></li></ul><p>The installation process reports the&#160;total size of the installation and prompts you&#160;to continue.</p></li>
                                        </ol>
                                        <ol data-mc-continue="true">
                                            <li value="8">Enter <b>y</b> to continue.
        <p>A message&#160;displays indicating that the installation was&#160;successful. Instructions display&#160;describing how to run the agent configuration script.</p></li>
                                        </ol> <ol data-mc-continue="true"><li value="9">(Optional) If you want to enable LDAP over SSL (LDAPS), perform the procedure <a href="#Enabling" class="MCXref xref" xrefformat="{para}">Enabling LDAP Over SSL</a>, then return to this procedure and complete it.</li><li value="10">Issue the following command from root&#160;to run the script:<pre>/opt/Okta/OktaLDAPAgent/scripts/configure_agent.sh</pre><p><b>Note:</b> Make sure that you run the script from root.</p></li></ol><ol data-mc-continue="true"><li value="11">When prompted, enter your org URL. This is provided in your browser in&#160;the LDAP Setup wizard.</li><li value="12">Enter the <b>hostname</b> of your LDAP server.</li><li value="13">Enter your LDAP <b>admin DN</b>.</li><li value="14">Enter your LDAP <b>admin password</b>.</li><li value="15">Enter your <b>base DN</b>.</li><li value="16">Indicate whether you are using SSL, and if so, enter the <b>port number</b>.</li><li value="17">Enter your LDAP <b>server port number</b>.</li><li value="18">If you are using a proxy, enter the <b>proxy information</b>, as prompted.</li><li value="19">When you are prompted to go to your Okta org to authenticate as an admin, copy the URL provided in the output and paste it into your browser.<p>For example:</p><pre>Please visit the URL: http://example.example1.com:1802/oauth2/auth?code=7n9ptnas before Mon Jul 27 16:58:37 PDT 2015 to authenticate and continue agent registration.</pre></li></ol><ol data-mc-continue="true"><li value="20">If necessary, log in to&#160;your Okta admin account.</li><li value="21">Click <b>Allow Access</b> to access&#160;the Okta API.<p><b>Note:</b> If an error message displays during this step, see <a href="#Troubles" class="MCXref xref" xrefformat="{para}">Troubleshooting</a>.</p></li></ol><ol data-mc-continue="true"><li value="22">Click <b>Continue</b>.</li><li value="23">At the message <b>LDAP agent started!</b> click <b>Next</b>.</li></ol><ol data-mc-continue="true"><li value="24">From your terminal window,&#160;start the LDAP&#160;agent by issuing&#160;the following command:<pre>service OktaLDAPAgent start</pre></li></ol><ol data-mc-continue="true"><li value="25">To confirm that the agent is running, issue the following command:<pre>service OktaLDAPAgent status</pre><p><b>Note:</b> LDAP schemas and configuration vary widely. Okta recommends having a LDAP browser available (for example, Apache Directory Studio) to query the LDAP directory.</p></li></ol><ol data-mc-continue="true"><li value="26">Continue to configure your LDAP settings as described below (see&#160;<a href="#Configur" class="MCXref xref" xrefformat="{para}">Configuring Your LDAP Settings</a>).</li></ol><h2><a name="Installi2"></a>Installing the LDAP Agent on Windows</h2><ol><li value="1">Go to <b>Directory &gt; Directory Integrations</b>.</li><li value="2">From the drop-down menu, select <b>Add LDAP Directory</b>.</li><li value="3">Review the installation requirements, and then click <b>Set Up LDAP</b>.</li><li value="4">Click <b>Download Agent</b>.</li><li value="5">From the drop-down menu, select the&#160;<b>.exe</b> installer and download it to your Windows server.</li><li value="6">Double click the file.</li><li value="7">If the message displays <b>Do you want to allow the following program to make changes to this computer?</b>, click&#160;<b>Yes</b>.</li><li value="8">Click&#160;<b>Next</b>.</li><li value="9">At the license agreement, click <b>Next</b>.</li><li value="10">At the Installation options dialog box, specify an installation folder, and then click <b>Install</b>.</li><li value="11">(Optional) If you want to enable LDAP over SSL (LDAPS), perform the procedure&#160;<a href="#Enabling" class="MCXref xref" xrefformat="{para}">Enabling LDAP Over SSL</a>, then return to this procedure and complete it.</li><li value="12">At the LDAP configuration screen, enter the following information:<ul><li value="1"><b>LDAP Server</b>&#160;–&#160;Enter the LDAP host and port in the form of <i style="font-weight: bold;">host:port</i>. For example:<p><b style="font-style: italic;">ldap.mycompany.com:389</b></p></li><li value="2"><b>Root DN</b>&#160;–&#160;The root distinguished name of the DIT from which users and groups are searched.</li><li value="3"><b>Bind DN</b>&#160;–&#160;The distinguished name of the bind LDAP user that is used to connect to the LDAP directory by the agent.</li><li value="4"><b>Bind Password</b>&#160;&#160;–&#160;The password of the bind distinguished name that is used to connect to the LDAP directory by the agent.</li><li value="5">(Optional)&#160;<b>Use SSL connection</b>&#160;–&#160;Select the checkbox if you have enabled LDAP over SSL (LDAPS). (<b>Note:</b> If you select the checkbox&#160;without performing the <a href="#Enabling" class="MCXref xref" xrefformat="{para}">Enabling LDAP Over SSL</a>, the error <b>Failed to connect to the specified LDAP server</b> displays.)</li></ul></li></ol><ol data-mc-continue="true"><li value="13">Click <b>Next</b>.</li><li value="14">(Optional) Enter a proxy server for your LDAP agent on the <b>Okta LDAP Agent Proxy Configuration</b> page, and then click <b>Next</b>.</li><li value="15"> To register the LDAP Agent with the Okta service, enter your Okta subdomain name, and then click <b>Next</b>.</li><li value="16">On the Okta <b>Sign In</b> page, enter the username and password for your Okta admin account, and then click <b>Sign In</b>.</li><li value="17">Click&#160;<b>Allow Access</b>&#160;to access&#160;the Okta API.<p><b>Note:</b> If an error message displays during this step, see <a href="#Troubles" class="MCXref xref" xrefformat="{para}">Troubleshooting</a>.</p></li></ol><ol data-mc-continue="true"><li value="18">Click <b>Finish</b> when the installation is complete.</li><li value="19">Continue to configure your LDAP settings as described below (see&#160;<a href="#Configur" class="MCXref xref" xrefformat="{para}">Configuring Your LDAP Settings</a>).</li></ol><h2>Uninstalling the LDAP Agent</h2><p>When you uninstall and reinstall your LDAP agent, you must decide whether or not you also want to remove the old Okta API token from your system. If you are performing an upgrade, you are not required to do so. To remove the API token, you must delete the Okta LDAP Agent folder, and deactivate and remove your old LDAP agent.</p><p><b>Note:</b>&#160;If you intend to continue using an LDAP agent, to avoid downtime you must have at least two agents running before you uninstall one of them.</p><h3>Uninstalling the LDAP Agent on Windows</h3><ol><li value="1">On your Windows server, go to <b>Start &gt; Control Panel &gt; Programs &gt; Programs and Features</b>.</li><li value="2">Select the Okta LDAP Agent, and then click <b>Uninstall/Change</b>.</li><li value="3">Uninstalling your LDAP agent leaves the agent configuration data on your hard drive. To remove the configuration data, go to <b>\Program Files\Okta</b> and delete the Okta LDAP Agent folder. Deleting this folder removes the agent configuration data and the API Token from your hard drive. The API token for the server is still valid in Okta, so it is important that you&#160;remove the configuration data.</li></ol><h3>Uninstalling the LDAP Agent on Linux</h3><p>On your Linux server, issue the appropriate command:</p><p><b>DEB:</b> <![CDATA[ ]]></p><pre>dpkg --remove OktaLDAPAgent</pre><p><b>RPM:</b></p><pre>yum remove OktaLDAPAgent</pre><p>Issuing the remove command removes the agent, all the agent configuration data, and the API Token from your hard drive. The API token for the server is still valid in Okta so it is important to remove the configuration data.</p><h3>Reinstalling the LDAP Agent</h3><p>Installing the LDAP agent does not overwrite the configuration data in the Okta LDAP Agent folder. If you want to reinstall and create a new API token, make sure you delete the Okta LDAP Agent folder (as described above) before you reinstall the LDAP agent. Then perform the following steps to reinstall your LDAP agent and deactivate and remove the old LDAP agent in Okta.</p><ol><li value="1">Perform the LDAP agent installation procedure for your operating system (<a href="#Installi" class="MCXref xref" xrefformat="{para}">Installing the LDAP Agent on Linux</a> or <a href="#Installi2" class="MCXref xref" xrefformat="{para}">Installing the LDAP Agent on Windows</a>)&#160;as described above.</li><li value="2">Go to <b>Directory&#160;&gt; Directory Integrations&#160;&gt; LDAP</b>, and then click&#160;the <b>Settings</b>&#160;tab.</li><li value="3">Your agents are listed under <b>Agent Monitors</b>. Confirm that your reinstalled LDAP agent is connected to Okta and appears in the list. Make sure to have at least one LDAP agent online.
		<p>If you are performing an upgrade or reinstallation and you do not want to revoke the Okta API token of the old LDAP agent, you are finished. Otherwise, proceed to the next step.</p></li></ol><ol data-mc-continue="true"><li value="4">Under <b>Agent Monitors</b>, click <b>Deactivate</b> for the old LDAP agent and then click <b>Ok</b> to confirm. Deactivating the agent revokes its API token.</li><li value="5">Under <b>Agent Monitors</b>, click <b>Remove</b>&#160;for the old LDAP agent and then click <b>Ok</b> to confirm.</li></ol><h2><a name="Configur"></a>Configuring Your LDAP Settings</h2><p>After you install the LDAP agent, you must continue the configuration through the Okta Admin Dashboard as described in the following steps.</p><ol><li value="1">Return to <b>Directory &gt; Directory Integrations</b>.</li><li value="2">Click the LDAP agent from the list of directories. It should be marked <b>Not yet configured</b>.</li><li value="3">In <b>Set Up LDAP &gt; Configure Directory Mappings</b>, configure the following settings:
<ul><li value="1"><b>LDAP Version</b> – Select your vendor. Vendor-specific configuration templates are provided and pre-populate configuration settings for you. If your LDAP vendor is not on the list, complete the configuration fields manually. Because each LDAP environment is unique, you must confirm the default values using a LDAP browser like <b>Apache Directory Studio</b>. Note that not all configuration settings must have values.</li><li value="2"><b>Unique Identifier Attribute</b> – Specifies&#160;the&#160;unique immutable attribute of all LDAP objects that will be imported (users and groups). Only objects possessing this attribute can be imported into your Okta org.&#160;Okta populates this field automatically based on your chosen LDAP version. You can change the auto-populated value during initial setup. <b>Note:</b> if your LDAP server implements <a href="https://en.wikipedia.org/wiki/Request_for_Comments">RFC</a>, make sure to enter&#160;<i>entryuuid</i>&#160;in this field.&#160;For AD LDS, use&#160;<i>objectguid</i>.</li><li value="3">DN Attribute – The attribute on all LDAP objects containing the <b>Distinguished Name</b> value.</li></ul></li></ol><ol data-mc-continue="true"><li value="4">In the <b>User</b> section, configure the following settings:
<ul><li value="1"><b>User Search Base</b> – The DN container for user searches (that is, root of the user subtree).&#160;This is the base DN of the container that holds all users that will be imported into your Okta org.</li><li value="2"><b>User Object Class</b> – The objectClass of a user that Okta uses in its&#160;query&#160;when importing users. For example,&#160;inetorgperson, posixaccount, posixuser.</li><li value="3"><b>User Object&#160;Filter</b> – By default, Okta auto-populates&#160;this field with the <i>objectClass</i>&#160;(<span style="font-family: 'Courier New';">objectClass=&lt;entered objectClass name&gt;</span>). This is a standard LDAP query in regular expression&#160;format.
		<p>Note that in the following example, only users with last names that start with <span style="font-family: 'Courier New'; font-weight: bold;">davi</span> are imported.</p><p>Use standard LDAP search filter notation (RFC 2254). For example:</p><pre>(&amp;(givenName=Bab*)(|(sn=Jensen)(cn=Babs J*)))</pre><p>The same filter capability is also in place for Group Objects.</p></li></ul><ul><li value="1"><b>Account Disabled Attribute</b> – The user attribute that indicates whether or not the account is disabled for the user in Okta. If this attribute equals the value specified in the&#160;Account Disabled Value field,&#160;we deactivate the user account. For example, if the GID number is 30 and the Account Disabled Value = 30, we deactivate the Okta user.</li><li value="2"><b>Account Disabled Value</b> – The value that indicates that the account is locked (for example, <b>TRUE</b>).</li><li value="3"><b>Password Attribute</b> – The user attribute that indicates password.</li><li value="4"><b>Password Expiration Attribute</b> – The user attribute that indicates whether a password is expired.</li><li value="5"><b>Extra Attributes</b> – Allows you to specify additional attributes (up to four) to be imported from LDAP.</li></ul></li></ol><ol data-mc-continue="true"><li value="5">Complete the <b>Group</b> or <b>Role</b> section. Typically, only one of these is used.<p style="font-weight: bold;text-decoration: underline;">Group:</p><ul><li value="1">Group Search Base&#160;– The base DN container for group searches (that is, root of the group subtree) that holds all groups that will be imported into your Okta org.</li><li value="2">Group&#160;Object Class&#160;– The objectClass of a group that Okta uses in its&#160;query&#160;when importing groups. For example,&#160;groupofnames, groupofuniquenames, posixgroup.</li><li value="3">Group&#160;Object&#160;Filter&#160;–&#160;By default, Okta auto-populates&#160;this field with the&#160;objectClass of the group&#160;(objectClass=&lt;entered objectClass name&gt;). This is a standard LDAP query in regular expression format.</li><li value="4">Membership Attribute&#160;–&#160;The attribute containing all the member DNs.</li><li value="5">User Attribute&#160;– The attribute on the user object&#160;that the membership attribute points to.&#160;If this value is left blank, the user object DN is used by default.<p><u>Example 1</u></p><p>①&#160;If&#160;the specified&#160;Membership Attribute is&#160;uniquemember&#160;. . . ,</p><p>② and uniquemember contains the DN attribute of the user&#160; . . . ,</p><p>③ then enter&#160;DN&#160;in the User Attribute&#160;field.</p><p><u>Example 2</u></p><p>①&#160;If&#160;the specified&#160;Membership Attribute is&#160;posixuser&#160;. . . ,</p><p>② and posixuser contains the UID attribute of the user&#160; . . . ,</p><p>③ then enter&#160;UID in the User Attribute&#160;field.</p></li></ul><p style="font-weight: bold;text-decoration: underline;">Role:</p><ul><li value="1"><b>Object Class</b>&#160;–&#160;The objectClass of a role.</li><li value="2"><b>Membership Attribute</b>&#160;–&#160;The attribute of the user object that indicates role membership (that is, containing the role DNs).</li></ul></li></ol><ol data-mc-continue="true"><li value="6">Validate your configuration settings.<ol style="list-style-type: lower-alpha;"><li value="1">Select an <b>Okta username format</b>.<p>When you import users from LDAP, Okta uses these settings to generate the Okta username that your users will use to log in to Okta.</p><p><b>Note:</b>&#160;Okta requires that valid usernames be in an email format. <i>Configuring these options correctly ensures that your usernames satisfy this requirement</i>.</p><p><b><u>Email address</u>&#160;option</b></p><p>Select this option if you want your users'&#160;LDAP&#160;email address to be their Okta username.&#160;Note: Email addresses must be unique in LDAP.</p><p>For example:</p><p>①&#160;If&#160;email addresses in LDAP are <i>user.1234@example.com</i> . . . ,</p><p>② and you select the <b>Email address</b>&#160;Okta username format . . . ,</p><p>③ enter <i>user.1234@example.com</i>&#160;in the <b>Username</b> field.</p><p>&#160;</p><p><b><u>User Id&#160;(UID)</u>&#160;option</b></p><p>Select this option&#160;only if the&#160;UID value in the LDAP directory&#160;is already formatted as an email address.</p><p>For example:</p><p>①&#160;If&#160;the UID in LDAP is already formatted as an email address like&#160;<i>user.1234@example.com</i> . . . ,</p><p>② and you select the <b>User Id&#160;(UID)</b>&#160;Okta username format . . . ,</p><p>③ enter <i>user.1234@example.com</i>&#160;in the <b>Username</b> field.</p><p>&#160;</p><p><b><u>User Id (UID) + Configurable Suffix</u>&#160;option</b></p><p>Select this option only if the UID value in LDAP lacks an email suffix and you want end users to log in using a configurable email suffix.</p><p>For example:</p><p>①&#160;If&#160;the UID in LDAP is&#160;<i>user.1234</i> . . . ,</p><p>② and you select the <b>User Id&#160;(UID)&#160;+ Configurable Suffix</b>&#160;Okta username format . . . ,</p><p>③ enter <i>yourconfigurablesuffix.com</i>&#160;in the <b>Configurable Suffix</b>&#160;field . . .</p><p>④&#160;enter <i>user.1234@yourconfigurablesuffix.com</i>&#160;in the <b>Username</b> field.</p><p>&#160;</p><p><b><u>User Id (UID) @ Domain</u>&#160;option</b></p><p>Select this option only if the UID value in LDAP lacks an email suffix and you&#160;want Okta&#160;usernames to include&#160;your company's domain name as the email suffix.</p><p>For example:</p><p>①&#160;If&#160;the UID in LDAP is&#160;<i>user.1234</i> . . . ,</p><p>②&#160;and your company's domain name is <i>yourdomainname</i> . . . ,</p><p>③ and you select the <b>User Id&#160;(UID)&#160;@ Domain</b>&#160;Okta username format . . . ,</p><p>④&#160;enter <i>user.1234@yourdomainname.com</i>&#160;in the <b>Username</b> field.</p></li></ol><ol style="list-style-type: lower-alpha;" data-mc-continue="true"><li value="2">Enter a&#160;<b>Username</b>.<p>Enter the username of a user in the specified&#160;username format. Since the username that you enter uniquely identifies a single user in your LDAP directory, the query that Okta executes will retrieve only your specified&#160;user and the following details about the user. Validate that all returned details are correct.</p><ul><li value="1">Status</li><li value="2">UID</li><li value="3">Unique ID</li><li value="4">Distinguished Name</li><li value="5">Full Name</li><li value="6">Email</li><li value="7">Department Number</li><li value="8">Groups – All the groups of the specified <b>Group Object Class</b> within the <b>Group Search Base</b> of which&#160;this user is a member. If the expected&#160;groups are not listed here,&#160;group imports might fail later.</li></ul></li></ol><ol style="list-style-type: lower-alpha;" start="3"><li value="3">Click <b>Test Configuration</b>.<p>If your configuration&#160;settings are valid, the message <b>Validation successful!</b>&#160;displays along with information about the returned user object. If there is a problem with your configuration, or if the user is not found, you are prompted&#160;to review and &#160;your settings.</p></li></ol></li></ol><ol start="7"><li value="7">When your settings are successfully validated, click <b>Next</b> and then <b>Done</b> to complete setup.</li><li value="8">Click the <b>Import Settings</b> tab.<ol style="list-style-type: lower-alpha;"><li value="1">When you enter this tab during LDAP setup, the username format will match the option you selected in the validating configuration&#160;settings above and you should not need to change it. You can also access this tab later and select another option, if necessary.&#160;Note that Okta requires usernames to be in email format, so ensure the selected option&#160;is appropriate for your environment.</li><li value="2">Select <b>Activation emails</b> if you don't want to send new user activation emails.</li></ol></li></ol><p>This completes your LDAP directory integration. By default, delegated authentication and JIT provisioning are configured, so you do not need to import users. Okta imports users when they sign into their Okta home pages (for example,&#160;mycompany.okta.com).</p><h3><a name="Enabling"></a>Enabling LDAP Over SSL</h3><p>To enable LDAP over SSL (LDAPS) and ensure a secure connection, import&#160;the certificate into the trust store. You must issue the import command on the server on which&#160;the Okta Java LDAP Agent is installed.</p><h4>Important before you begin</h4><ul><li value="1"><b>General</b>&#160;– When using the keytool, make sure to&#160;always choose the keystore option.</li><li value="2"><b>Ubuntu / Debian</b> –&#160;There is no upgrade path. The&#160;<b>dpkg</b>&#160;tool performs an&#160;uninstall and re-install, which deletes&#160;the <b>cacerts</b> file.</li><li value="3"><b>Centos</b>&#160;–&#160;There is no upgrade path. Issuing yum localupdate &lt;package name&gt; replaces the <b>jre</b> folder, which deletes&#160;the <b>cacerts</b>. If the service had already been set up to use SSL, the service fails to start.</li><li value="4"><b>Windows</b>&#160;–&#160;There is no upgrade path. The installer removes and re-adds the files. Also, the installer must be&#160;running when you are&#160;updating the cert store.&#160;Canceling&#160;the installer deletes the contents of the <span style="font-family: 'Courier New';">C:\Okta\Okta LDAP Agent</span> folder.</li></ul><h4>To import&#160;the certificate into the trust store of the Okta Java LDAP&#160;Agent:</h4><ol><li value="1">Open a terminal and navigate to the <span style="font-family: 'Courier New';">jre/bin</span> directory.<p><b style="text-decoration: underline;">Linux</b></p><pre>/opt/Okta/OktaLDAPAgent/jre/bin</pre><p><b style="text-decoration: underline;">Windows</b></p><pre>C:\Program Files\Okta\Okta LDAP Agent\jre\bin</pre></li></ol><ol data-mc-continue="true"><li value="2">Connect to the LDAPS port to confirm that the certificate you have is the one that the server is using:<pre>openssl s_client -connect &lt;IP of your LDAP server&gt;:&lt;your SSO port&gt;</pre></li></ol><ol data-mc-continue="true"><li value="3">Import the SSL certificate. When you are prompted for the default password, enter changeit.<pre>./keytool -importcert -alias example.net.local -file /tmp/example.net.local.cer -keystore ../lib/security/cacerts</pre></li></ol><ol data-mc-continue="true"><li value="4">List the current contents of the keystore:<pre>./keytool -list -keystore ../lib/security/cacerts</pre></li></ol><ol data-mc-continue="true"><li value="5">Complete the LDAP Agent installation as described in the relevant&#160;procedure&#160;above&#160;(Linux or Windows).</li></ol><h3>Changing Your Agent Configuration</h3><p>To&#160;change your LDAP configuration, choose the method appropriate for&#160;your platform.</p><p style="text-decoration: underline;font-weight: bold;">Windows</p><p>Uninstall and then reinstall the agent, and then specify new configuration settings during setup.</p><p style="font-weight: bold;text-decoration: underline;">Linux</p><ol><li value="1">Run an update script by issuing the following command from the command line:<pre>/opt/Okta/OktaLDAPAgent/scripts/update.sh</pre></li></ol><ol data-mc-continue="true"><li value="2">Issue any of the following commands:</li><li value="3"><table style="width: 100%;"><col /><col /><col /><tbody><tr><td>&#160;</td><td>&#160;</td><td>&#160;</td></tr><tr><td>&#160;</td><td>&#160;</td><td>&#160;</td></tr><tr><td>&#160;</td><td>&#160;</td><td>&#160;</td></tr><tr><td>&#160;</td><td>&#160;</td><td>&#160;</td></tr><tr><td>&#160;</td><td>&#160;</td><td>&#160;</td></tr></tbody></table></li><p>xxxx</p></ol><p>Command</p><p>Definition</p><p>Example</p><p>[-bl]</p><p>ldap.dn.base</p><p>NewBaseDN</p><p>[-al]</p><p>ldap.admin.dn</p><p>NewLDAPAdminDN</p><p>[-wl]</p><p>ldap.admin.password</p><p>NewLDAPPassword</p><p>[-hl]</p><p>ldap.host</p><p>NewLDAPHost</p><p>[-pl]</p><p>ldap.port</p><p>NewLDAPPort</p><p>You can combine parameters. For example:</p><p>/opt/Okta/OktaLDAPAgent/scripts/update.sh -h 192.168.3.81 -p 389</p><p>top</p><h2>Obtaining Log Information</h2><p>Windows</p><p>The LDAP agent logs information to:</p><p>C:\Program Files\Okta\Okta LDAP Agent\logs\agent.log</p><p>You can modify the log level by editing the log4j configuration file at:</p><p>C:\Program Files\Okta\Okta LDAP Agent\conf\log4j.properties</p><p>&#160;</p><p>Linux</p><p>The LDAP agent logs information to:</p><p>/opt/Okta/OktaLDAPAgent/logs/agent.log</p><p>You can modify the log level by editing the log4j configuration file at:</p><p>/opt/Okta/OktaLDAPAgent/conf/log4j.properties</p><p>top</p><h2><a name="Troubles"></a>Troubleshooting</h2><p>To troubleshoot LDAP issues, obtain an LDAP browser such as Apache Directory Studio.</p><p>Note that the schema templates are merely&#160;suggestions based on common values. Each LDAP environment is unique and might require you to override the default values with your environment-specific settings. You can use Apache Directory Studio to examine attributes for existing users and groups to verify the template values or select the appropriate setting.</p><p>Changing templates modifies all template default values. Settings that you override are not changed.</p><p>&#160;</p><h3>Error when verifying username</h3><p>When verifying your username, you receive the error</p><p>Username: Does not match required pattern</p><p>The username must be in an email format. Verify that the import settings are set correctly as described in the Validate Configuration Settings step of the Configure Your LDAP Settings procedure.</p><p>&#160;</p><h3>Error after selecting SSL checkbox</h3><p>You selected the Use SSL connection checkbox and you receive the error</p><p>Failed to connect to the specified LDAP server displays.</p><p>Make sure that you have enabled LDAP over SSL (LDAPS) when configuring the LDAP agent.</p><p>&#160;</p><h3>Error when installing the agent</h3><p>During agent installation,&#160;after clicking&#160;Allow Access, the following error message&#160;displays:</p><p>Failed to parse response from Okta and Unable to register the agent. Error code 12.</p><p>Check the log and look for the entry,</p><p>javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No valid public key found in certificate chain.</p><p>If the log contains the above entry, then&#160;you are probably attempting to install Java LDAP&#160;agent&#160;version 5.3.1&#160;or later and your environment is one in which the agent's support for SSL certificate pinning prevents&#160;communication with the Okta server. This is most likely to occur in environments that rely on SSL proxies. To allow installation to complete in this case, Okta recommends that you bypass SSL proxy processing by adding the domain okta.com to a whitelist.</p><p>Alternatively, you can choose to disable SSL pinning as described below, but be aware that doing so disables a security enhancement provided by the agent.</p><p>To disable support for SSL certificate pinning, perform the procedure below appropriate for your operating system:</p><p>Windows</p><p>Install the agent from a command line as follows:</p><p>Perform steps 1 through 5 of the procedure Installing the LDAP Agent on Windows.</p><p>Instead of double-clicking the file as directed in step 6, open a command line and enter the following:</p><p>OktaADAgentSetup.exe OktaDisableSslPinning=1</p><p>Press Enter.</p><p>Complete the installation as described in Installing the LDAP Agent on Windows.</p><p>If you want to re-enable support for SSL certificate pinning if it was disabled:</p><p>Locate and open the AD agent configuration file:</p><p>C:\Program Files (x86)\Okta\Okta AD Agent\OktaADAgentSetup.exe.config</p><p>Change the SSL pinning enabled setting to True:</p><p>"SslPinningEnabled" value="True"</p><p>Save the configuration file and restart the agent.</p><p>Linux</p><p>From a command line, change the SSL&#160;pinning enabled&#160;setting to false:</p><p>$ sudo /opt/Okta/OktaLDAPAgent/scripts/configure_agent.sh -sslPinningEnabled false</p><p>Save the configuration file and restart the agent.</p><p>If you want to re-enable support for SSL certificate pinning after you have completed installation, open OktaLDAPAgent.conf and change the SSL&#160;pinning enabled&#160;setting to true.</p><p>For more information about SSL certificate pinning, see the article by the Open Web Application Security Project.</p></div>
                                </div>
                            </div>
                        </div>
                    </section><a class="exit-off-canvas"></a>
                </section>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>