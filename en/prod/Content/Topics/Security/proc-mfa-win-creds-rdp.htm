<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Enable MFA for Windows server RDP authentication attempts using Okta’s Credential Provider for Windows." /><title>Windows Credential Provider | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-TJ45R6');
			/* ]]> */
		</script>
        <!-- End Google Tag Manager -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/okta-main.css" rel="stylesheet" />
        <link href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../Resources/TableStyles/standard-shaded-rows.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="okta-coveo-configOrgId">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="okta-coveo-configPlatformRestUri">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="okta-coveo-configSearchPageUrl">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="okta-coveo-configSearchTokenServiceUrl">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************************* Coveo Search bar ************************************* -->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Left Nav Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="30t9Kr8Z5kaXkrY0QK1LGQ">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="30t9Kr8Z5kaXkrY0QK1LGQ:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_left_menu mc-component" data-mc-linked-toc="Data/Tocs/left_nav_TOC.js" data-mc-side-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- *** Col2: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                            </div>
                                            <div class="toolbar-main">
                                                <!-- Expand/Collapse All for drop-downs -->
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img alt="Expand all" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <div role="main" id="mc-main-content">
                                                    <h1><a name="top"></a>Okta MFA&#160;for RDP</h1>
                                                    <h2 style="font-weight: bold;">Overview</h2>
                                                    <p>Users can use the Okta Credential Provider for Windows to prompt users for MFA when signing in to supported Windows servers with an RDP <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">client<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Essentially, a client is anything that talks to the Okta service. Within the traditional client-server model, Okta is the server. The client might be an agent, an Okta mobile app, or a browser plugin. </span></a></p>
                                                    <p>Additionally, with version 1.2+ of the <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">agent<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A software agent is a lightweight program that runs as a service outside of Okta. It is typically installed behind a firewall and allows Okta to tunnel communication between an on-premises service and Okta's cloud service. Okta employs several agent types: Active Directory, LDAP, RADIUS, RSA, Active Directory Password Sync, and IWA. For example, users can install multiple Active Directory agents to ensure that the integration is robust and highly available across geographic locations.</span></a> (EA), <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">end users<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>End users are people in your org without administrative control. They can authenticate into apps from the icons on their My Applications home page, but they are provisioned, deprovisioned, assigned, and managed by admins.</span></a> can reset their <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Active Directory<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Active Directory (AD) is a directory service that Microsoft developed for the Windows domain networks. It is included in most Windows Server operating systems as a set of processes and services. Initially, Active Directory was only in charge of centralized domain management.</span></a> passwords without contacting their administrators. This is done with a “Reset Okta Password” link on the sign-on screen.</p>
                                                    <p>For complete version history please see <a href="../Settings/Version_Histories/Ver_History_Okta_MFA_Credential_Provider_for_Windows.htm" class="MCXref xref">Okta MFA Credential Provider for Windows Version History </a></p>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Prerequisites</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Note the following requirements before installing the Okta Credential Provider for Windows:</p>
                                                            <ul>
                                                                <li value="1">Proxy Configuration: The Okta Credential Provider for Windows does not support a discrete proxy configuration but will obey system level proxy configurations. To understand management of proxies on Windows machines, refer to <a href="http://www.technet.com/">www.technet.com</a>.</li>
                                                                <li value="2">The Windows machine used for installation must have an active internet connection with port 443 open.</li>
                                                                <li value="3">The installing account must have administrative rights to install the Okta Windows Credential Provider Agent, Visual C++ Redistributable and .NET 4.0+.</li>
                                                                <li value="4">Inline enrollment is not supported.<br />End users must have enrolled their MFA tokens previously, by choosing an MFA option for their account when signing in to Okta the first time or after a reset. End users cannot enroll a token during an RDP sign in. End users with unenrolled tokens  receive an authentication failed response from Okta when attempting to sign into an RDP server.</li>
                                                                <li value="5">
                                                                    <p>Configured MFA factors that include the factor to use for RDP sign in. For instructions, see <a href="MFA.htm">MFA</a>.</p>
                                                                </li>
                                                            </ul>
                                                            <div class="noteOkta">
                                                                <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Important Note" alt="Important Note" />
                                                                <p class="noteHeading">Important</p>
                                                                <p class="noteContent">TLS 1.2 is required. For information on enabling TLS 1.2 in .NET and in Microsoft Internet Explorer browsers, see <a href="../Miscellaneous/okta-ends-browser-support-for-TLS-1.1.htm">Okta ends browser support for TLS 1.1</a>.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Supported Operating Systems</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <ul>
                                                                <li value="1">Windows Server 2016</li>
                                                                <li value="2">Windows Server 2012</li>
                                                                <li value="3">Windows Server 2012 R2</li>
                                                                <li value="4">Windows Server 2008</li>
                                                                <li value="5">Windows Server 2008 R2</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Supported Factors</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>The following MFA Factors are supported:</p>
                                                            <ul>
                                                                <li value="1"><a href="MFA.htm#OktaVerify">Okta Verify</a>
                                                                    <br />
                                                                    <div class="noteOkta">
                                                                        <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                                        <p class="noteHeading">Note</p>
                                                                        <p class="noteContent">Okta&#160;Verify supports <b>Send push automatically</b> and <b>Do not Challenge for the next X hours</b> options. These options are managed locally via browser cookies.  If the browser is configured to automatically clear cache and cookies on window close then these settings would need to be set again anytime a new browser window is opened or any time cache and cookies are cleared. </p>
                                                                    </div>
                                                                </li>
                                                                <li value="2"><a href="MFA.htm#VoiceCall">Voice Call</a>
                                                                </li>
                                                                <li value="3"><a href="MFA.htm#OnPremMFA">On-Prem MFA (RSA)</a>
                                                                </li>
                                                                <li value="4"><a href="MFA.htm#Email">Email</a>
                                                                </li>
                                                                <li value="5"><a href="MFA.htm#SMSAuthentication">SMS Authentication</a>
                                                                </li>
                                                                <li value="6"><a href="MFA.htm#GoogleAuthenticator">Google Authenticator</a>
                                                                </li>
                                                                <li value="7"><a href="MFA.htm#YubiKey">YubiKey</a>
                                                                </li>
                                                                <li value="8"><a href="MFA.htm#SymantecVIP">Symantec VIP</a>
                                                                </li>
                                                                <li value="9"><a href="MFA.htm#SecurityQuestion">Security Question</a>
                                                                </li>
                                                                <li value="10"><a href="MFA.htm#TOTPFactor">Custom TOTP Authentication</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <p>&#160;</p>
                                                    <h3>Installation </h3>
                                                    <p>Sign in to Okta and verify or set up policies. Install the agent on the Windows server and return to Okta to create an <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">app<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of application. Essentially, it is a web-based site used to perform any number of specific tasks, and requires authentication from end users by signing in.</span></a> and assign users. Test the setup once the installation has been successful. The installation contains three major installation steps and one testing step. Be sure to complete the testing after the installation.</p>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Step 1 – Configure Okta </a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Before installing the Okta credential provider for Windows, your <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>The Okta container that represents a real-world organization.</span></a> must have the following three items configured. </p>
                                                            <ul>
                                                                <li value="1">Configured MFA factors that include the factor to use for RDP sign in. For instructions, see <a href="MFA.htm">MFA</a>.</li>
                                                                <li value="2">A group for the end users who will authenticate RDP sign ins. For instructions, see <a href="../Directory/Directory_Groups.htm#Group">Group Types Used in Okta</a>. </li>
                                                                <li value="3">
                                                                    <p>Add the Microsoft RDP app</p>
                                                                    <p>On the <b>Applications</b> page, select <b>Add Application</b> and enter <em>Microsoft RDP (MFA)</em> in the search box. <br />Then, add the application. <br />On the <b>General</b> tab, assign any desired application label. You can assign people to the app now or later, as described  below.</p>
                                                                    <div class="noteOkta">
                                                                        <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Important Note" alt="Important Note" />
                                                                        <p class="noteHeading">Important</p>
                                                                        <p class="noteContent">RDP fails with the error message <em>Multifactor <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Authentication<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Authentication is distinct from authorization, which is the process of giving individuals access to system objects based on their identity. Authentication merely ensures that the individual is who he or she claims to be, but says nothing about the access rights of the individual.

Authentication methods and protocols include direct auth, delegated auth, SAML, SWA, WS-Fed, and OpenID Connect.</span></a> Failed</em> if the user that tries to RDP into a server with the RDP agent installed that does not match an Microsoft RDP (MFA) App username.</p>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <p> </p>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Step 2 – Install the Okta Credential Provider for Windows</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>From the link on the Okta <b>Settings &gt;Downloads</b> page, download link for Okta Windows Credential Provider Agent. After downloading the installer, complete the following steps. During the installation process, keep Okta open in another window on the <em>Microsoft RDP (MFA)</em> application screen. You can perform a standard installation or a silent installation.</p>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Standard installation</a></span>
                                                                <div class="MCDropDownBody dropDownBody">
                                                                    <ol>
                                                                        <li value="1">
                                                                            <p>On the Windows server:&#160;</p>
                                                                            <ol style="list-style-type: lower-alpha;">
                                                                                <li value="1">Download the installer from the <b>MFA&#160;Plugins and Agents</b> section of <b>Settings &gt;&#160;Downloads</b></li>
                                                                                <li value="2">Extract the files from the .zip archive</li>
                                                                                <li value="3">Run <span style="font-family: 'Courier New';">Setup.exe</span>.</li>
                                                                                <li value="4">Follow the prompts to complete the installation.</li>
                                                                            </ol>
                                                                            <div class="noteOkta">
                                                                                <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                                                <p class="noteHeading">Note</p>
                                                                                <p>The installer package contains the C++ Runtime libraries. The installer prompts you to install these redistributable runtime libraries if it is not present, or to repair it, if it is present. Then, the installer prompts for the Visual C++ 14 Runtime Libraries, as shown below</p><a targets="mfa-ms-rdp-1-dropdown" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="mfa-ms-rdp-1-dropdown"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Screenshot</a>
                                                                                <img src="../../Resources/Images/mfa-ms-rdp-01.png" style="display: none;" data-mc-target-name="mfa-ms-rdp-1-dropdown" />
                                                                            </div>
                                                                        </li>
                                                                        <li value="2">
                                                                            <p>During the installation, two App Configuration screen display appear. The first requests a client ID, a client secret, and an Okta URL, as shown below. <a targets="mfa-ms-rdp-4-dropdown" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="mfa-ms-rdp-4-dropdown"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Screenshot</a></p>
                                                                            <p>
                                                                                <img src="../../Resources/Images/mfa-ms-rdp-04.png" alt="App Configuration screen" style="display: none;" data-mc-target-name="mfa-ms-rdp-4-dropdown" />
                                                                            </p>
                                                                            <p>To obtain this information, return to the <em>Microsoft RDP (MFA)</em> app in Okta. On the <b>General</b> tab, scroll down to the <b>Client Credentials</b> section to see the values for the client ID and the client secret. The Okta URL is the URL your org uses to reach Okta in the format <code>https://&lt;yourorg&gt;.okta.com</code>. </p>
                                                                            <p>Enter this information in the <b>App Configuration</b> screen, shown above and click <b>Next</b>. Then, click <b>Next</b> and <b>Close</b> to complete the installation.
								</p>
                                                                        </li>
                                                                        <li value="3">In the second App Configuration screen that opens, select from the following two options, as shown below.
								<a targets="mfa-ms-rdp-04a-dropdown" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="mfa-ms-rdp-04a-dropdown"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Screenshot</a><![CDATA[
							]]><p><img src="../../Resources/Images/mfa-ms-rdp-04a.png" style="display: none;" data-mc-target-name="mfa-ms-rdp-04a-dropdown" /></p><ul><li value="1">Filter Credential Provider – this option provides a workaround when multiple credential providers are installed on a server. If selected, this option makes the Okta MFA Credential Provider the <b>only</b> method for applying MFA to RDP connections and does not permit unauthenticated users to select which credential provider to use.</li><li value="2">RDP Only – By default, the installed credential provider inserts Okta MFA between both an RDP and a local authentication event. Checking this box will remove Okta MFA from local (interactive) logons.</li><li value="3">(EA version only) Display Okta password reset link (self service) -Checking this box will add an option to the Windows sign-on screen for end users to reset their password via Okta.</li></ul></li>
                                                                        <li value="4">
                                                                            <p>To verify the installation, lock the machine. In the sign-in screen that appears, verify that the Okta icon appears as a sign-in option, as shown below on a Windows Server 2012 R2. The screen is slightly different in Windows Server 2016. <a targets="mfa-ms-rdp-5-dropdown" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="mfa-ms-rdp-5-dropdown"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Screenshot</a></p>
                                                                            <p>
                                                                                <img src="../../Resources/Images/mfa-ms-rdp-05.png" style="display: none;" data-mc-target-name="mfa-ms-rdp-5-dropdown" />
                                                                            </p>
                                                                        </li>
                                                                    </ol>
                                                                </div>
                                                            </div>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Silent installation</a></span>
                                                                <div class="MCDropDownBody dropDownBody">
                                                                    <ol>
                                                                        <li value="1">
                                                                            <p>Extract the files from the .zip archive. </p>
                                                                        </li>
                                                                        <li value="2">On the Windows server, run the following command from the <code>vcredist_x64</code> folder of the unzipped archive.<p><code>vcredist_x64.exe /install /quiet /norestart</code></p></li>
                                                                        <li value="3">
                                                                            <p>Run the following command to  install Okta Windows Credential Provider silently.</p>
                                                                            <p><code>msiexec /qb /log log.txt /i OktaWindowsCredentialProvider.msi CLIENT_ID="cid" CLIENT_SECRET="cs" OKTA_URL="https://a.b.c"</code>
                                                                            </p>
                                                                            <p>Parameters</p>
                                                                            <p><code>CLIENT_ID</code> – find this value on the <b>General</b> tab of the Microsoft RDP (MFA) application in Okta. Can also be edited manually in the RDP agent config file.</p>
                                                                            <p><code>CLIENT_SECRET</code> – find this value on the <b>General</b> tab of the Microsoft RDP (MFA) application in Okta. Resetting the ClientSecret will require reinstallation of the agent as the value in the config file is encrypted. Can also be edited manually in the RDP agent config file.</p>
                                                                            <p><code>OKTA_URL</code> – Your org URL. Must use the format https://org_name.okta.com.  HTTPS is required. Also supported are *.oktapreview.com or *.okta-emea.com.</p>
                                                                        </li>
                                                                        <li value="4">
                                                                            <p><a name="Modify"></a>Modify additional properties</p>
                                                                            <p>In addition to the parameters you added in the previous step, you can modify the following properties to ensure MFA is always enforced. </p>
                                                                            <table style="mc-table-style: url('../../Resources/TableStyles/standard-shaded-rows.css');" class="TableStyle-srb_header_alt_shade" cellspacing="0">
                                                                                <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                                                                                <col style="width: 304px;" class="TableStyle-srb_header_alt_shade-Column-Column1" />
                                                                                <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                                                                                <col class="TableStyle-srb_header_alt_shade-Column-Column1" />
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">Property</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">Definition</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">Default Value</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">Suggested Value</td>
                                                                                </tr>
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;"><code>FilterCredentialProvider</code>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">
                                                                                        <p>This property provides a workaround when multiple credential providers are installed on a server. If true the Okta MFA Credential Provider is the only method for applying MFA to RDP connections and does not permit unauthenticated users to select which credential provider to use.</p>
                                                                                        <p>Setting FilterCredentialProvider to true and RdpOnly to false will cause the agent to prompt for MFA if required by the policy.</p>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">false</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2" style="text-align: center;background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">-</td>
                                                                                </tr>
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;"><code>InternetFailOpenOption</code>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">
                                                                                        <p>Sets authentication flow behavior if network connectivity is lost. When true, a user attempting to authenticate across RDP is not  challenged for MFA and is granted access based on password alone; when false, a user attempting to authenticate across RDP is not granted access because the credential provider cannot reach the Okta service.</p>
                                                                                        <p>InternetFailOpenOption governs proper access if the target machine does not have Internet access for&#160;MFA. </p>
                                                                                        <p>Set this property to true if Internet connectivity is a frequent issue.</p>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">false</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="text-align: center;background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">-</td>
                                                                                </tr>
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;"><code>RdpOnly</code>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">
                                                                                        <p>By default, the installed credential provider inserts Okta MFA between both an RDP and a local authentication event. Setting this property to true removes Okta MFA from local (interactive) logons.</p>
                                                                                        <p>Setting FilterCredentialProvider to true and RdpOnly to false will cause the agent to prompt for MFA if required by the policy.</p>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">false</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2" style="text-align: center;background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">-</td>
                                                                                </tr>
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;"><code>WidgetTimeOutInSeconds</code>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">The number of seconds before timeout. To prevent the possibility that Windows might close the RDP session, this value must be smaller than the idle timeout set in Windows.</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">60</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">30</td>
                                                                                </tr>
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;"><code>ErrorTimeOutInSeconds</code>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">The timeout after which the RDP session is closed when an error message is displayed.</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">30</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">30</td>
                                                                                </tr>
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;"><code>EnforceTimeoutVersionAgnostic</code>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">Enforce timeout for both Windows 2012 and 2016.&#160;</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">false</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">true</td>
                                                                                </tr>
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body2">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;"><code>SslPinningEnabled</code>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">Validate the public key of the Okta server  to which the agent is connecting.</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">true</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body2" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">true</td>
                                                                                </tr>
                                                                                <tr class="TableStyle-srb_header_alt_shade-Body-Body1">
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;"><code>DisplayPasswordResetLink</code>
                                                                                        <p>This property applies only to the Beta version, 1.2.1. If you upgraded from the GA version 1.1.4 to Beta 1.2.1, you must add this property.</p>
                                                                                    </td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">Display link to reset Active Directory password.</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyF-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">false</td>
                                                                                    <td class="TableStyle-srb_header_alt_shade-BodyD-Column1-Body1" style="background-color: #f5f5f5;padding-left: 4px;padding-right: 4px;padding-top: 2px;padding-bottom: 2px;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #333333;">true</td>
                                                                                </tr>
                                                                            </table>
                                                                            <p>To modify these properties, edit the file <code>rdp_app_config.json</code> that is typically located in the <code>C:\Program Files\Okta\Okta Windows Credential Provider\config</code> folder, <b>or</b> use the following power shell script.</p>
                                                                            <div style="padding:10px;border:1px solid black;min-height:23px;min-width:100px;overflow-y:hidden;overflow-x:scroll;">
                                                                                <blockquote><pre>
											$rdpAppConfig = Get-Content 'C:\Program Files\Okta\Okta Windows Credential Provider\config\rdp_app_config.json' -raw | ConvertFrom-Json
											$rdpAppConfig.RdpOnly =([System.Convert]::ToBoolean('true'))
										$rdpAppConfig | ConvertTo-Json | Set-Content  'C:\Program Files\Okta\Okta Windows Credential Provider\config\rdp_app_config.json'</pre>
                                                                                </blockquote>
                                                                            </div>
                                                                            <p>You can run this script from the same location you ran the installation in step 2, above.</p>
                                                                            <div class="noteOkta">
                                                                                <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                                                <p class="noteHeading">Note</p>
                                                                                <p class="noteContent">This script was tested with Powershell versions, 3, 4, and 5. To determine Powershell version on your system, open Powershell as administrator and enter<code style="font-size: 11pt;">$PSVersionTable</code>.</p>
                                                                            </div>
                                                                        </li>
                                                                    </ol>
                                                                </div>
                                                            </div>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Mass Deployment</a></span>
                                                                <div class="MCDropDownBody dropDownBody">
                                                                    <p>Use the Microsoft <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/psexec" target="_blank">psexec64</a> tool to execute commands on remote machines. Modify the following command for a mass deployment:</p>
                                                                    <div class="terminal">
                                                                        <div class="terminal-toolbar"><span class="terminal-circle red"></span><span class="terminal-circle yellow"></span><span class="terminal-circle green"></span>
                                                                        </div>
                                                                        <div class="terminal-content">
                                                                            <div>psexec64 &lt;IP of the machine to deploy&gt; -u &lt;AD <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">admin<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of administrator. This is the individual(s) who have access to the Okta Administrator Dashboard. They control the provisioning and deprovisioning of end users, the assigning of apps, the resetting of passwords, and the overall end user experience. Only administrators have the Administration button on the upper right side of the My Applications page.</span></a> user&gt; -p &lt;AD admin password&gt; msiexec /i &lt;//machine/share/OktaWindowsCredentialProvider.msi&gt; CLIENT_ID="&lt;client id&gt;" CLIENT_SECRET="&lt;client secret&gt;" OKTA_URL="https://yourdoman.okta.com" /qn /l*v &lt;path for installation log&gt;</div>
                                                                        </div>
                                                                    </div>
                                                                    <p>Where:</p>
                                                                    <ul>
                                                                        <li value="1">
                                                                            <p><i>IP of the machine to deploy</i>, <i>&lt;AD admin user&gt;</i> and <i>&lt;path for installation log&gt;</i> with appropriate values for your organization.</p>
                                                                        </li>
                                                                        <li value="2">the <i>client secret</i> and <i>client ID</i> to match your application</li>
                                                                        <li value="3"><i>yourorg</i> with the name of your Okta organization.</li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Configure behavior if network connectivity is lost</a></span>
                                                                <div class="MCDropDownBody dropDownBody">
                                                                    <p>After completing the installation, you can configure the behavior of the authentication flow if network connectivity is lost.</p>
                                                                    <p>To make this specification, edit the file <code>rdp_app_config.json</code> that is typically located in the <code>C:\Program Files\Okta\Okta Windows Credential Provider\config</code> folder. Toggle the <b>InternetFailOpenOption</b> value to one of the following values.</p>
                                                                    <p><em>true</em> – if internet connectivity is lost, a user attempting to authenticate across RDP is not  challenged for MFA and is granted access based on password alone.</p>
                                                                    <p><em>false</em> – if internet connectivity is lost, a user attempting to authenticate across RDP is not granted access because the credential provider cannot reach the Okta service.</p>
                                                                    <div class="noteOkta">
                                                                        <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                                        <p class="noteHeading">Note</p>
                                                                        <p class="noteContent">You can also modify any of the other properties listed in Step 4 in the Silent Installation section, above.</p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Verify Windows and Okta widget timeout settings</a></span>
                                                                <div class="MCDropDownBody dropDownBody">
                                                                    <p>To ensure that MFA&#160;works as expected, verify that the Okta sign in session times out before the Windows session. </p>
                                                                    <p>Note the following:</p>
                                                                    <ul>
                                                                        <li value="1">By default, the Okta widget timeout session is set to 60 seconds.</li>
                                                                        <li value="2">Determine the timeout duration in your Windows environment then set the session timeout duration for the Okta widget to be shorter than the Windows timeout session. <br /><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" /><p class="noteHeading">Important</p><p class="noteContent">Set up a test in the environment by manually timing the session duration for both Windows and Okta to ensure that the timeout duration specified for each work as expected.</p></div></li>
                                                                    </ul>
                                                                    <p>To configure the Okta widget timeout session duration: </p>
                                                                    <ol>
                                                                        <li value="1">Navigate to <code>C:\Program Files\Okta\Okta Windows Credential Provider\config</code></li>
                                                                        <li value="2">Using an editor of your choice, open: <code>rdp_app_config.json</code>.</li>
                                                                        <li value="3">Add the following properties and values to the file. <br />Delineate each entry with a comma:<ul><li value="1"><code>"WidgetTimeOutInSeconds": 30</code></li><li value="2"><p><code>"ErrorTimeOutInSeconds": 30</code></p></li><li value="3"><code>"EnforceTimeoutVersionAgnostic": false</code></li></ul><div class="noteOkta"><img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" /><p class="noteHeading">Note</p><p class="noteContent">You may specify another value for timeout as long as it is lower than your Windows session timeout duration.</p></div></li>
                                                                    </ol>
                                                                    <p>&#160;</p>
                                                                </div>
                                                            </div>
                                                            <br />
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Step 3 – Assign users to the Microsoft RDP (MFA) app in Okta</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>All users who login to any machine that has the Credential Provider installed will need to be assigned to the Microsoft RDP (MFA) app. By default, the App Sign-On policy for this app prompts for MFA every login. I</p>
                                                            <ol>
                                                                <li value="1">
                                                                    <p>In the <em>Microsoft RDP (MFA)</em> app in Okta, select the <b>Sign On</b> tab. In the <b>Settings</b> section, select <b>Edit</b> and choose the Application username format to assign to users of this app. In the example below, <em>AD SAM account name</em> is chosen, but you can make any choice.<a targets="mfa-ms-rdp-7-dropdown" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="mfa-ms-rdp-7-dropdown"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Screenshot</a></p>
                                                                    <p>
                                                                        <img src="../../Resources/Images/mfa-ms-rdp-07.png" alt="Sign On Methods screen" style="display: none;" data-mc-target-name="mfa-ms-rdp-7-dropdown" />
                                                                    </p>
                                                                    <div class="noteOkta">
                                                                        <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                                        <p class="noteHeading">Important</p>
                                                                        <p class="noteContent">When the end user signs in, the application user format must match exactly.</p>
                                                                    </div>
                                                                    <p><b>Best practice:</b> Okta recommends using a username prefix, as Windows uses the <i>SAMAccountName</i> for login.</p>
                                                                </li>
                                                                <li value="2">
                                                                    <p>Select the <b>Assignments</b> tab and assign the app to users or <a href="#" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">groups<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Groups allow you to organize your end users and the apps they can access. Assigning apps to large sets of end users is made easier with groups.</span></a>. After selecting <b>Assign</b>, enter the user name. For more information on assigning apps, see <a href="../Apps/Apps_Apps_Page.htm#Assigning">Assign Applications</a>.</p>
                                                                    <div class="noteOkta">
                                                                        <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                                        <p class="noteHeading">Important</p>
                                                                        <p class="noteContent">The user name entered here must match the format you selected in the preceding step. For example, in the case that the full UPN for a user is in the format <code>name@yourorg.com</code>, and you entered <em>AD SAM account name</em> for the username format above, enter only the name portion of the UPN for the user name. The <em>@yourorg.com</em> portion of the UPN is included in the <em>AD SAM account name</em>.</p>
                                                                    </div>
                                                                </li>
                                                                <li value="3">
                                                                    <p>Navigate to the <b>Sign on</b> tab to configure Sign on rules specific to this app. <br /><img src="../../Resources/Images/mfa-ms-rdp-11.png" id="img_new" alt="Signon policy" /><br />The App Sign-On policy for this app is set to prompt for MFA for every login. <br />Create a new sign on rule if you do not want to prompt some or all of your users for MFA. Assign users to the new rule and leave the ‘Prompt for factor’ checkbox unchecked.<br /><img src="../../Resources/Images/mfa-ms-rdp-12_1000x471.png" id="img_new" alt="App sign on rule with 'prompt for factor' not enabled." style="width: 1000;height: 471;" /><br /></p>
                                                                    <div class="noteOkta">
                                                                        <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                                        <p class="noteHeading">Note</p>
                                                                        <p class="noteContent">Okta sign on policy does not apply to Microsoft RDP App. Only the app sign on policy as defined in this step is evaluated.</p>
                                                                    </div>
                                                                </li>
                                                                <li value="4">Select <b>Done</b> when finished. Your system is completely configured.</li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                    <br />
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Testing – Verify MFA for RDP sessions</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>This verification process is the end-user sign in process.</p>
                                                            <ol>
                                                                <li value="1">
                                                                    <p>Sign in to a machine which has the RDP client installed. Be sure that this machine can connect to the server into which you want to make a remote connection.</p>
                                                                </li>
                                                                <li value="2">
                                                                    <p>Enter the  name for the RDP client, your username, and password and then, click <b>Connect</b>.</p>
                                                                </li>
                                                                <li value="3">
                                                                    <p>In the RDP sign in screen that opens, sign in as the user that has the <em>Microsoft RDP (MFA)</em> application assigned in Okta. </p>
                                                                    <div class="noteOkta">
                                                                        <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                                        <p class="noteHeading">Important</p>
                                                                        <p class="noteContent">In both cases, the value for <code>user</code> must match the user name that was used when the app was assigned in Okta</p>
                                                                    </div>
                                                                </li>
                                                                <li value="4">
                                                                    <p>All users, including those that just set up MFA in the preceding step, are prompted to choose the MFA factor to use for authentication.</p>
                                                                </li>
                                                                <li value="5">
                                                                    <p>After providing the second factor, verify the RDP connection to the Windows server. If you cannot sign in, see the Troubleshooting section below.
						</p>
                                                                </li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="(Optiona"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">(Optional) Set up a Proxy for the System Account</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Complete the following steps to set up a proxy for the system account.</p>
                                                            <ol>
                                                                <li value="1">Download <b>pstools</b> from Microsoft at <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/pstools">https://docs.microsoft.com/en-us/sysinternals/downloads/pstools.</a></li>
                                                                <li value="2">Run the command <br /><code style="font-size: 11pt;">psexec -i -s "c:\program files\Internet Explorer\iexplore.exe"</code></li>
                                                                <li value="3">Open <b>Internet options &gt; Connections &gt; LAN Settings</b></li>
                                                                <li value="4">Set the proxy server and port.</li>
                                                                <li value="5">Click <b>OK</b>, and then, click <b>OK</b> again on the Internet options dialog.</li>
                                                            </ol>
                                                            <p>After completing this setup, the system responds as follows</p>
                                                            <ul>
                                                                <li value="1">If the proxy is running, users can access the okta widget for MFA and sign in.</li>
                                                                <li value="2">If the proxy is not running, users receive the message <em>Multifactor Authentication Failed</em>, and the system log shows a <em>connectFailure</em> error.</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Troubleshooting</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <ol>
                                                                <li value="1">
                                                                    <p>If you see the <b>MFA Bypass</b> screen shown below when signing in, verify in Okta that the user is included in an MFA policy.
						<a targets="/mfa-ms-rdp-08-dropdown" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="/mfa-ms-rdp-08-dropdown"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Screenshot</a><![CDATA[			   ]]></p>
                                                                    <p>
                                                                        <img src="../../Resources/Images/mfa-ms-rdp-08.png" alt="MFA Bypass screen" style="display: none;" data-mc-target-name="/mfa-ms-rdp-08-dropdown" />
                                                                    </p>
                                                                    <p><b>Note:</b> An App-SignOn Policy is the only policy that is relevant to the Microsoft RDP App.</p>
                                                                </li>
                                                                <li value="2">
                                                                    <p>If you see the <b>Display Failed</b> screen shown below when signing in, verify the following: <a targets="mfa-ms-rdp-09-dropdown" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="mfa-ms-rdp-09-dropdown"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Screenshot</a><p><img src="../../Resources/Images/mfa-ms-rdp-09.png" style="display: none;" data-mc-target-name="mfa-ms-rdp-09-dropdown" /></p><p><ul><li value="1">The client ID, the client secret, and the Okta URL are configured correctly.</li><li value="2">The username entered into the Windows sign in matches the username in Okta.</li></ul></p></p>
                                                                </li>
                                                                <li value="3">
                                                                    <p>If you cannot RDP into a server, verify that it is setup to accept remote connections in the <b>System Properties</b> screen, as shown below. <a targets="mfa-ms-rdp-10-dropdown" href="#" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="mfa-ms-rdp-10-dropdown"><img class="MCToggler_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Screenshot</a><![CDATA[
						]]></p>
                                                                    <p>
                                                                        <img src="../../Resources/Images/mfa-ms-rdp-10.png" alt="System Properties screen" style="display: none;" data-mc-target-name="mfa-ms-rdp-10-dropdown" />
                                                                    </p>
                                                                </li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Logging</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Windows logs can be helpful when troubleshooting. <br />The log file for Windows Credential provider can be found in<br /><span style="font-family: 'Courier New';">${USERPROFILE}\AppData\Local\Okta\Okta MFA Provider\logs\OktaMfaAdfs.log</span><br /><br />               For example:<br /><span style="font-family: 'Courier New';">C:\Users\GroupManagementAcnt$\AppData\Local\Okta\Okta MFA Provider\logs</span><br /><br />The log contains error messages, warnings and other information that may be helpful when troubleshooting. <br />In addition, Windows Events may contain helpful information related to the errors and failures.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                        <!-- *** Col3: Right menu Col *** -->
                                        <div class="is-not-in-mobile">
                                        </div>
                                    </div>
                                    <!-- ***************************** Footer rows ********************************* -->
                                    <div class="footer-temp">
                                        <div class="is-not-in-mobile">
                                            <p> </p>
                                        </div>
                                        <div>
                                            <p class="copyright">©  <span class="okta-variablesYear">2020</span> <span class="okta-variablesCompanyName">Okta, Inc</span> All Rights Reserved. Various trademarks held by their respective owners.</p>
                                        </div>
                                    </div>
                                    <!-- ***************************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Ours -->
                                    <script type="text/javascript" src="../../Resources/Scripts/back-to-top.js">
                                    </script>
                                    <script type="text/javascript" src="../../Resources/Scripts/get-feedback.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript" defer="defer">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript" defer="defer">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>
