<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Settings" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="okta_help.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Email and SMS Options</title>
        <link href="../../Resources/TableStyles/okta_table_2.css" rel="stylesheet" />
        <link href="../../SkinSupport/Slideshow.css" rel="stylesheet" MadCap:generated="True" />
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" MadCap:generated="True" />
        <link href="../../Resources/Stylesheets/okta_help.css" rel="stylesheet" />
        <script src="../../SkinSupport/jquery.min.js">
        </script>
        <script src="../../SkinSupport/MadCapAll.js">
        </script>
        <script src="../../SkinSupport/MadCapTopicAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../okta_help_CSH.htm#Topics/Settings/Settings_Email.htm" style="">Open topic with navigation</a>
        </p><a name="Settings_Emails_SMS1"></a>
        <h1>Email and SMS Options</h1>
        <h4>Email Templates</h4>
        <p>Okta sends email notifications to end users for a variety of reasons, including:</p>
        <ul>
            <li value="1">User activation</li>
            <li value="2">Forgotten password</li>
            <li value="3">Reset password</li>
            <li value="4">Locked account</li>
        </ul>
        <p>Email notifications are generated automatically and sent to end users according to your settings.</p>
        <p>There are several different email templates, each containing default text suitable for a particular type of account activation, password reset, or account unlock scenario. Administrators can customize these emails, from the subject line to the full body of the message.</p>
        <p>To customize the text of an email:</p>
        <ol>
            <li value="1">Click one of the email templates listed in the left pane. The default message is displayed in text.</li>
            <li value="2">Click <b>Edit</b>. Note that the message now appears as editable HTML.</li>
            <li value="3">Edit the template as needed.
				<p><b>Note:</b> Email templates must be under 64 KB. This limit includes all text, HTML, and CSS characters in the template. 64 KB contains approximately 65,000 single-byte characters. If you use UTF-8, fewer characters are allowed because characters can be up to 4 bytes each.</p></li>
            <li value="4">Click <b>Save</b>.<p><b>Note:</b> To revert to the default text after saving, click <b>Reset</b>.</p></li>
        </ol>
        <div class="MCDropDown">
            <div class="MCDropDownHead_0"><a class="MCDropDownHotSpot_0" href="javascript:void(0);" id="MCDropDownHotSpot_1878694445_0" onclick="FMCDropDown( this ); return false;"><img style="border: none;margin-right: 5px;" src="../../SkinSupport/DropDownClosed.gif" MadCap:altsrc="../../SkinSupport/DropDownOpen.gif" onload="if ( typeof( FMCPreloadImage ) == 'function' ) { FMCPreloadImage( '../../SkinSupport/DropDownOpen.gif' ); }" alt="Closed" MadCap:alt2="Open" class="MCDropDownIcon" />Advanced Customization</a>
            </div>
            <div class="MCDropDownBody" id="MCDropDownBody_1878694445_0" style="display: none;">
                <p>Customizing an email template can simply mean changing the basic text of the email itself, as described above. But you can also perform more advanced customization. To facilitate this, Okta uses the Expression Language (EL) script. In addition to having many common variables, each customizable email has additional unique variables. </p>
                <p>Customization Variables</p>
                <p>The following table shows example template variables and their corresponding EL expression:</p>
                <table style="mc-table-style: url('../../Resources/TableStyles/okta_table_2.css');" class="TableStyle_IBC_Table_2" cellspacing="0">
                    <col style="width: 279px;" />
                    <col />
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep"><b>Variable</b>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd"><b>EL Expression</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">baseURL</td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">${baseURL}</td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">user.email</td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">${user.email}</td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">recoveryToken </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">${recoveryToken} </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">activationLink </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">${activationLink} </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">samAccountName</td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">${samAccountName}</td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">resetPasswordLink</td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">${resetPasswordLink}</td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">unlockAccountLink</td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">${unlockAccountLink}</td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">pushVerifyActivationLink</td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">${pushVerifyActivationLink}</td>
                    </tr>
                </table>
                <h4>Functions</h4>
                <p>In addition to customizing your EL expressions, you can use the following functions within each of the email templates. Although you can use each variable within any function, the variable must match the data type of the function. For example, you cannot use a string variable under the <b>formatTimeDiffHoursNow()</b> function because the data must be an integer.</p>
                <p>All variables are strings except for the <b>org.activationTokenExpirationHours</b> variable, used with the <b>Forgot Password</b> and <b>Active Directory Password Reset</b> templates.</p>
                <p>The following functions are provided:</p>
                <table style="mc-table-style: url('../../Resources/TableStyles/okta_table_2.css');" class="TableStyle_IBC_Table_2" cellspacing="0">
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep" style="font-size: 11pt;"><b>Expression</b>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd" style="font-size: 11pt;"><b>Definition</b>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>replace(String input, String matchString, String replacement)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This replaces all occurrences of   the match string with the replacement string.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>substringAfter(String input, String matchString)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This returns the substring after   the given match string, or an empty string if the matchString doesn't match   the input.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>substringBefore(String input, String matchString)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This returns the substring before   the given match string, or an empty string if the matchString doesn't match   the input.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>toLowerCase(String input)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This converts the given input   string to all lowercase.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>toUpperCase(String input)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This converts the given input   string to all uppercase.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>substring(String input, int startIndex, int endIndex)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This extracts a range of characters   from the given input string.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>formatTimeDiffHoursNow(int hours)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This produces a formatted duration   string for the given number of hours.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>formatTimeDiffDateNow(Date date)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This produces a formatted duration   string for the given date.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>escapeHtml(String html)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This escapes the characters in a   String using HTML entities.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColSep">
                            <p><b>escapeHtmlAttr(String html)</b>
                            </p>
                        </td>
                        <td class="TableStyle_IBC_Table_2_Body_0_0_RowSep_ColEnd">
                            <p>This encodes data for use in HTML   attributes.</p>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <h4>Customize SMS</h4>
        <p>The Customize SMS page allows you to customize the text that is sent to your end users for MFA challenges. Although Okta supports many variables for use in email templates, only <b>${code}</b> and <b>${org.name}</b> are supported for SMS.</p>
        <p>To customize the text of an SMS message, do the following:</p>
        <ol>
            <li value="1">In the <b>Customize SMS</b> panel, click <b>Edit</b>.</li>
            <li value="2">Select Default or <b>Custom</b>.
        <p>Selecting <b>Default</b> preserves the preview text and variables shown in the text field.</p><p>Selecting <b>Custom</b> allows you to change this text and add your own variables. You must, however, retain the OTP placeholder <b>${code}</b> for proper functioning of SMS. </p></li>
            <li value="3">
                <p>Add a custom message if desired.</p>
                <p>When crafting your custom message, keep the following in mind:</p>
                <ul>
                    <li value="1">The maximum length of the message can be 100 characters.</li>
                    <li value="2">The OTP placeholder, <b>${code}</b>, is included in the message length count.</li>
                    <li value="3">The message can only include alphanumeric and punctuation characters—avoid using special characters.</li>
                    <li value="4">Localization is not supported for this option.</li>
                </ul>
            </li>
            <li value="4">
                <p>Click <b>Save</b>.</p>
            </li>
        </ol>
        <p>&#160;</p>
        <p>&#160;</p>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>