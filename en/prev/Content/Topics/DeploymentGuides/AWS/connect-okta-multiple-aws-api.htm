<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Documentation|Product documentation|Applications|Okta + AWS Deployment">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Section includes high-level design of multiple AWS instances using an API and the step topics to implement this integration. These include Configure Okta as the identity provider in all AWS, Add Okta identity provider as trusted source in your all AWS roles across all AWS accounts, Generate the AWS API access key for Okta to download AWS roles from all accounts, Set up an IAM role in each of the child accounts, and Configure the AWS app in Okta." /><title>Connect Okta to multiple AWS instances using an API | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-TJ45R6');
			/* ]]> */
		</script>
        <!-- End Google Tag Manager -->
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/okta-main.css" rel="stylesheet" />
        <link href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/expand-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../../Skins/Default/Stylesheets/Images/collapse-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="okta-coveo-configOrgId">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="okta-coveo-configPlatformRestUri">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="okta-coveo-configSearchPageUrl">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="okta-coveo-configSearchTokenServiceUrl">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************************* Coveo Search bar ************************************* -->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Left Nav Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="xsGtfASMwEyncK6_9zy21w">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="xsGtfASMwEyncK6_9zy21w:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_left_menu mc-component" data-mc-linked-toc="Data/Tocs/left_nav_TOC.js" data-mc-side-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- *** Col2: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="toolbar-main">
                                                <!-- Expand/Collapse All for drop-downs -->
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <h1>Connect Okta to multiple AWS instances using an API</h1>
                                                <p>If you do not expect to exceed 60 AWS accounts and want a simplified user assignment process all contained within Okta, then connect to Okta using the AWS API.</p>
                                                <h2><a name="High-lev"></a>High-level design</h2>
                                                <p>Okta can provide <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">SSO<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for single sign-on. In a SSO system, a user logs in once to the system and can access multiple systems without being prompted to sign in for each one. Okta is a cloud-based SSO platform that allows users to enter one name and password to access multiple applications. Users can access all of their web applications, both behind the firewall and in the cloud, with a single sign in. Okta provides a seamless experience across PCs, laptops, tablets, and smartphones.</span></a> and fetch roles across multiple AWS accounts using a single Identity and Access Management (IAM) user account, having permissions to read IAM roles and account information across all connected accounts.</p>
                                                <ul style="list-style-type: square;">
                                                    <li value="1">
                                                        <p>The  IAM user account is created in an AWS account, known as the master account in Okta.</p>
                                                    </li>
                                                    <li value="2">
                                                        <p>The IAM user account accesses connected accounts. These accounts are children of the IAM user master account. You can designate any AWS account as the IAM user master, as long as there is at least one IAM user account (with the proper permissions) in the AWS instance.</p>
                                                    </li>
                                                </ul>
                                                <p>
                                                    <img src="../../../Resources/Images/aws/aws_new_18.png" />
                                                </p>
                                                <h2><a name="Step4"></a>Step 1: Configure Okta as the identity provider in all AWS accounts</h2>
                                                <p>Configure Okta as a trusted <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">SAML<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for Security Assertion Markup Language, SAML is an XML-based standard for exchanging authentication and authorization data between an identity provider (IdP) and a service provider (SP). The SAML standard addresses issues unique to the single sign-on (SSO) solution, and defines three roles: the end user, the IdP, and the SP.

Here's how SAML works through Okta:

SP-initiated flow: the end user requests (principally through a browser) a service from the SP. The SP requests and obtains an identity assertion from the IdP (in this case, Okta). On the basis of this assertion, the SP can decide whether or not to authorize or authenticate the service for the end user.
IdP-initiated flow: with Okta as the IdP, an end user goes to the Okta browser and clicks on an app, sending a SAMLResponse to the configured SP. A session is established with the SP, and the end user is authenticated.</span></a> SSO identity provider in all of your AWS accounts (see <a href="connect-okta-single-aws.htm#Step3" class="MCXref xref">Step 1: Configure Okta as the identity provider in the AWS account</a>). Use the same metadata and name throughout your accounts. This includes your master account and connected accounts.</p>
                                                <h2><a name="Step3"></a>Step 2: Add Okta identity provider as trusted source in your all AWS roles across all AWS accounts</h2>
                                                <p>Repeat <a href="connect-okta-single-aws.htm#Step4" class="MCXref xref">Step 2: Add Okta Identity Provider as a trusted source in your AWS roles</a> for each role in all accounts you wish to set up. This includes roles that you want to access from your master account and connected accounts.</p>
                                                <h2><a name="Step2"></a>Step 3: Generate the AWS API access key for Okta to download AWS roles from all accounts</h2>
                                                <p><b style="color: #696969;">About</b>
                                                </p>
                                                <p>You need to create an AWS user with specific permissions so Okta can dynamically fetch a list of available roles from your accounts. This makes assigning users and <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">groups<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Groups allow you to organize your end users and the apps they can access. Assigning apps to large sets of end users is made easier with groups.</span></a> to specific AWS roles easy and secure for administrators.</p>
                                                <p>Complete this procedure for each account you want to connect.</p>
                                                <p><b style="color: #696969;">Procedure</b>
                                                </p>
                                                <ol>
                                                    <li value="1">
                                                        <p>From the AWS Console, choose <b>Identity and Access Management (IAM) &gt; Users</b> and then click <b>Add user</b>.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_9n.png" class="new" />
                                                        </p>
                                                    </li>
                                                    <li value="2">
                                                        <p>From the <b>Add user</b> page (step 1 view), specify a user name.</p>
                                                        <p>Example: <i>OktaSSOuser</i></p>
                                                    </li>
                                                    <li value="3">
                                                        <p>From the <b>Select AWS access type</b> area, select <b>Programmatic access</b> and then click <b>Next Permissions</b>.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_10n.png" class="new" />
                                                        </p>
                                                    </li>
                                                    <li value="4">
                                                        <p>From the <b>Add user</b> page (step 2 view), click <b>Attach existing policies directly</b> and then <b>Create policy</b>.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_11n.png" class="new" />
                                                        </p>
                                                        <p>The <b>Create policy</b> page (step 1 view) opens in a new <b>IAM Management Console</b> browser tab.</p>
                                                    </li>
                                                    <li value="5">
                                                        <p>Click the <b>JSON</b> tab.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_c.png" />
                                                        </p>
                                                    </li>
                                                    <li value="6">
                                                        <p>Delete the existing code in the <b>JSON</b> tab and then paste the following code in the tab:</p>
                                                        <div style="background-color: #dcdcdc;mc-float: none;vertical-align: baseline;height: 625px;width: 732px;"><pre>{</pre><pre xml:space="preserve">    "Version": "2012-10-17",</pre><pre xml:space="preserve">    "Statement": [</pre><pre xml:space="preserve">      {</pre><pre xml:space="preserve">          "Effect": "Allow",</pre><pre xml:space="preserve">          "Action": [</pre><pre xml:space="preserve">              "iam:GetAccountSummary",</pre><pre xml:space="preserve">              "iam:ListRoles",</pre><pre xml:space="preserve">              "iam:ListAccountAliases",</pre><pre xml:space="preserve">              "iam:GetUser",</pre><pre xml:space="preserve">              "sts:AssumeRole"</pre><pre xml:space="preserve">          ],</pre><pre xml:space="preserve">          "Resource": "*"</pre><pre xml:space="preserve">      }</pre><pre xml:space="preserve">    ]</pre><pre>}</pre>
                                                        </div>
                                                    </li>
                                                    <li value="7">
                                                        <p>Click <b>Review policy</b>.</p>
                                                    </li>
                                                    <li value="8">
                                                        <p>From the <b>Create policy</b> page (step 2 view), enter a policy name and description.</p>
                                                        <p>Example policy name: <i>OktaMasterAccountPolicy</i></p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_34.png" class="new" />
                                                        </p>
                                                    </li>
                                                    <li value="9">
                                                        <p>Click <b>Create Policy</b>.</p>
                                                        <p>The <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">app<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of application. Essentially, it is a web-based site used to perform any number of specific tasks, and requires authentication from end users by signing in.</span></a> returns you to the first browser tab where you can continue assigning policies to your IAM user.</p>
                                                    </li>
                                                    <li value="10">
                                                        <p>Click the first <b>IAM Management Console</b> browser tab.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_browser_tabs.png" />
                                                        </p>
                                                    </li>
                                                    <li value="11">
                                                        <p>From the <b>Add user</b> page (step 2 view), ensure that <b style="font-weight: bold;">Attach existing policies directly</b> is selected.</p>
                                                    </li>
                                                    <li value="12">
                                                        <p>Locate and select  the policy you just created.</p>
                                                        <p>Use the refresh button to update your search.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_13n.png" class="new" />
                                                        </p>
                                                    </li>
                                                    <li value="13">
                                                        <p>Click <b>Next: Tags</b>. </p>
                                                    </li>
                                                    <li value="14">
                                                        <p>From the <b style="font-weight: bold;">Add user</b> page (step 3 view),  click <b style="font-weight: bold;">Next: Review</b>.</p>
                                                    </li>
                                                    <li value="15">
                                                        <p>From the <b style="font-weight: bold;">Add user</b> page (step 4 view), click <b>Create user</b>.</p>
                                                    </li>
                                                    <li value="16">
                                                        <p>From the <b style="font-weight: bold;">Add user</b> page (step 5 view), make a copy of your access key ID and secret access key.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_33_799x346.png" class="new" style="width: 799;height: 346;" />
                                                        </p>
                                                        <p>The keys are needed in <a href="#Step" class="MCXref xref">Step 5: Configure the AWS app in Okta</a> to configure the AWS app in Okta.</p>
                                                        <p>This is the only time that you will be able to see and copy these keys.</p>
                                                    </li>
                                                </ol>
                                                <h2><a name="Step5"></a>Step 4: Set up an IAM role in each of the  connected accounts</h2>
                                                <p><b style="color: #696969;">About</b>
                                                </p>
                                                <p>Now that you have created an AWS user with read permissions for accounts and roles in your master account, each of your remaining connected accounts need to trust the master account user and permit it to read roles.</p>
                                                <p><b style="color: #696969;">Procedure</b>
                                                </p>
                                                <ol>
                                                    <li value="1">
                                                        <p>From a connected account, go to <b>Roles &gt; Create Role</b>.</p>
                                                    </li>
                                                    <li value="2">
                                                        <p>From the <b>Create role</b> page, click <b>Another AWS account</b>, enter the master account ID, and then click <b>Next: Permissions</b>.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_newd.png" />
                                                        </p>
                                                        <p>The master account ID can be found by choosing <b>My Account</b> from the drop-down in the top  right of the AWS Console.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_25.png" />
                                                        </p>
                                                    </li>
                                                    <li value="3">
                                                        <p>Attach a policy with read access to IAM roles. </p>
                                                        <p>Example: <i>IAMReadOnlyAccess</i></p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_27.png" />
                                                        </p>
                                                        <p>Alternatively, you can create a new policy with minimum read permissions attached and then attach the policy to the role that you're creating (see below).</p>
                                                        <div style="background-color: #dcdcdc;mc-float: none;vertical-align: baseline;height: 510px;width: 732px;"><pre>{</pre><pre xml:space="preserve">    "Version": "2012-10-17",</pre><pre xml:space="preserve">    "Statement": [</pre><pre xml:space="preserve">      {</pre><pre xml:space="preserve">          "Effect": "Allow",</pre><pre xml:space="preserve">          "Action": [</pre><pre xml:space="preserve">              "iam:ListRoles",</pre><pre xml:space="preserve">              "iam:ListAccountAliases"</pre><pre xml:space="preserve">          ],</pre><pre xml:space="preserve">          "Resource": "*"</pre><pre xml:space="preserve">      }</pre><pre xml:space="preserve">    ]</pre><pre>}          </pre>
                                                        </div>
                                                    </li>
                                                    <li value="4">
                                                        <p>Name the role <code>Okta-<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Idp<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for Identity Provider. It is a service that manages end user accounts analogous to user directories such as LDAP and Active Directory, and can send SAML responses to SPs to authenticate end users. Within this scenario, the IdP is Okta.</span></a>-cross-account-role</code>.</p>
                                                        <div style="padding-left: 15px;padding-right: 15px;padding-top: 15px;padding-bottom: 15px;border-left-style: solid;border-left-width: 5px;">
                                                            <p><b>Important</b>
                                                            </p>
                                                            <p>This is a predefined name for this integration. A different name cannot be used.</p>
                                                        </div>
                                                    </li>
                                                    <li value="5">
                                                        <p>Repeat this procedure for each connected account, ensuring to use the same master account ID and role name (<code>Okta-Idp-cross-account-role</code>).</p>
                                                    </li>
                                                </ol>
                                                <h2><a name="Step"></a>Step 5: Configure the AWS app in Okta</h2>
                                                <ol>
                                                    <li value="1">From the Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Admin<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of administrator. This is the individual(s) who have access to the Okta Administrator Dashboard. They control the provisioning and deprovisioning of end users, the assigning of apps, the resetting of passwords, and the overall end user experience. Only administrators have the Administration button on the upper right side of the My Applications page.</span></a> Dashboard, select the <b>Sign On</b> tab for the AWS app and then click <b>Edit</b>.</li>
                                                    <li value="2">
                                                        <p>From the <b>Advanced Sign-On Settings</b> area, select your environment type  from the <b>AWS Environment</b> drop-down.</p>
                                                        <p>If your environment type is not listed, you can set the desired <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">ACS URL<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>ACS Endpoint – Assertion Consumer Service URL – often referred to simply as the SP login URL. This is the endpoint provided by the SP where SAML responses are posted. The SP needs to provide this information to the IdP.</span></a> in the <b>ACS URL</b> field.</p>
                                                    </li>
                                                    <li value="3">Paste in the <b>Identity Provider ARN</b> field the identity provider ARN that you copied earlier.</li>
                                                    <li value="4">Specify in the <b>Session Duration</b> field the desired session duration for users.</li>
                                                    <li value="5">
                                                        <p>Click <b>Save/Next</b>.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_28.png" />
                                                        </p>
                                                    </li>
                                                    <li value="6">
                                                        <p>Click the <b><a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Provisioning<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Provisioning is the enterprise-wide configuration, deployment, and management of multiple types of IT system resources. Specifically, provisioning provides users access to equipment, software, or services. This involves creating, maintaining and deactivating required business process automation objects and attributes in systems, directories, and applications.</span></a></b> tab for the AWS app and then click <b>Edit</b>.</p>
                                                        <div style="padding-left: 15px;padding-right: 15px;padding-top: 15px;padding-bottom: 15px;border-left-style: solid;border-left-width: 5px;">
                                                            <p><b>Note</b>
                                                            </p>
                                                            <p>The AWS app integration does not support provisioning. This setup under the <b>Provisioning</b> tab is required to provide API access to Okta in order to download a list of AWS roles to assign during user assignment. It enables you to assign multiple roles to users and pass those roles in the SAML assertion.</p>
                                                        </div>
                                                    </li>
                                                    <li value="7">
                                                        <p>Select the <b>Enable API Integration</b> check box.</p>
                                                        <ul style="list-style-type: square;">
                                                            <li value="1">
                                                                <p>If your environment type is listed in the <b>AWS Environment</b> drop-down under the <b>Sign-on</b> tab, you do not need to complete the <b>ACS&#160;URL</b> field.</p>
                                                            </li>
                                                            <li value="2">
                                                                <p>If your environment type is not listed in the <b>AWS Environment</b> drop-down, then enter your API URL in the <b>ACS&#160;URL</b> field. You may have to contact AWS to learn the API URL for your environment.</p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li value="8">
                                                        <p>In the <b>Access Key</b> and <b>Secret Key</b> fields, enter the keys you retrieved and stored in <a href="#Step2" class="MCXref xref">Step 3: Generate the AWS API access key for Okta to download AWS roles from all accounts</a>.</p>
                                                    </li>
                                                    <li value="9">
                                                        <p>Provide a comma-separated list in the <b>Connected Accounts IDs</b> field of all IDs of the connected accounts.</p>
                                                        <p>You can find the IDs in each AWS account from the <b>My Accounts</b> page in the top- right area of the AWS Console.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_newe.png" />
                                                        </p>
                                                    </li>
                                                    <li value="10">
                                                        <p>Click <b>Test API credentials</b> to ensure the credentials work for all connected accounts and fix any errors.</p>
                                                    </li>
                                                    <li value="11">
                                                        <p>Enable the desired options to update roles and permissions from AWS.</p>
                                                        <ul style="list-style-type: square;">
                                                            <li value="1">
                                                                <p>Enable <b>Create Users</b> and <b>Update User Attributes</b></p>
                                                                <p>
                                                                    <img src="../../../Resources/Images/aws/aws_new_a1.png" />
                                                                </p>
                                                            </li>
                                                            <li value="2">
                                                                <p>Enable <b>Create Users</b> (but not <b>Update User Attributes</b>).</p>
                                                            </li>
                                                        </ul>
                                                        <div style="padding-left: 15px;padding-right: 15px;padding-top: 15px;padding-bottom: 15px;border-left-style: solid;border-left-width: 5px;">
                                                            <p><b>Note</b>
                                                            </p>
                                                            <p>You are not creating or updating any users in AWS, but  activating parts of the API that enables Okta to retrieve Okta-trusted roles from the AWS account.</p>
                                                        </div>
                                                    </li>
                                                    <li value="12">Click <b>Next</b> (or <b>Save</b>).</li>
                                                    <li value="13">
                                                        <p>Assign the AWS app to a test user.</p>
                                                        <ul style="list-style-type: square;">
                                                            <li value="1">From the <b>User Assignment</b> page, you can view a list of roles from your master account and connected (secondary) accounts.</li>
                                                            <li value="2">Okta displays roles in the format: <samp>Account Name - Role Name</samp>.</li>
                                                            <li value="3">
                                                                <p>If AWS accounts have an alias setup, Okta uses the account alias instead of the account name.</p>
                                                                <p>Example:  <samp>[Account Alias] - Role Name</samp>.</p>
                                                            </li>
                                                            <li value="4">
                                                                <p>In the following example, <samp>starks</samp> is used as the account alias.</p>
                                                                <p>
                                                                    <img src="../../../Resources/Images/aws/aws_new_31.png" />
                                                                </p>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li value="14">Complete the app assignment.</li>
                                                    <li value="15">
                                                        <p>Log in to your Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>The Okta container that represents a real-world organization.</span></a> as the test user and then click the AWS app.</p>
                                                        <p>The AWS window lists the roles available to the user in Okta.</p>
                                                    </li>
                                                    <li value="16">
                                                        <p>Select the role to use when logging in to AWS.</p>
                                                        <p>
                                                            <img src="../../../Resources/Images/aws/aws_new_32.png" />
                                                        </p>
                                                    </li>
                                                    <li value="17">
                                                        <p>Ensure that there are no errors and the user is able to log in with the assigned role.</p>
                                                    </li>
                                                    <li value="18">
                                                        <p>You can return to Okta and assign users and groups (or only groups) to the AWS app.</p>
                                                    </li>
                                                </ol>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                        <!-- *** Col3: Right menu Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="e5qgWCwZMUyL1ymQjzUsxA">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="e5qgWCwZMUyL1ymQjzUsxA:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_right_menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/okta_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="False" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ***************************** Footer rows ********************************* -->
                                    <div class="footer-temp">
                                        <div class="is-not-in-mobile">
                                            <p> </p>
                                        </div>
                                        <div>
                                            <p class="copyright">©  <span class="okta-variablesYear">2019</span> <span class="okta-variablesCompanyName">Okta, Inc</span> All Rights Reserved. Various trademarks held by their respective owners.</p>
                                        </div>
                                    </div>
                                    <!-- ***************************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Ours -->
                                    <script type="text/javascript" src="../../../Resources/Scripts/back-to-top.js">
                                    </script>
                                    <script type="text/javascript" src="../../../Resources/Scripts/get-feedback.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js">
                                    </script>
                                    <script src="../../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript">
                                    </script>
                                    <script src="../../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript">
                                    </script>
                                    <script src="../../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>