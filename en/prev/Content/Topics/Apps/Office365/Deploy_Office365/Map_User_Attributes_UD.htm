<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <head>
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Map User Attributes Between Okta and Office 365</title>
        <link rel="shortcut icon" href="../../../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <script>
		/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-TJ45R6');
		/* ]]> */
		</script>
        <!-- End Google Tag Manager -->
        <!--<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-15777010-10', 'auto');
			ga('send', 'pageview');

		</script>-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../../Resources/Stylesheets/okta-main.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../../../Skins/Default/Stylesheets/Images/expand-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../../../Skins/Default/Stylesheets/Images/collapse-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div>
                        <nav class="title-bar tab-bar" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../ReleaseNotes/okta-relnotes.htm" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <div class="LeftRightTopRow">
                                        <div>
                                            <div class="is-not-in-mobile">
                                            </div>
                                            <div class="toolbar-main">
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <p />
                                        </div>
                                    </div>
                                    <div class="LeftRightMenu">
                                        <div>
                                            <div class="body-main">
                                                <h1>Map User Attributes Between Okta and Office 365</h1>
                                                <p>If you have selected the User Sync or Universal Sync option on the provisioning page, you enable the Office 365 integration to use Universal Directory (UD) to manage the mapping of attributes from AD/Okta to Office 365. This allows you to:</p>
                                                <ul>
                                                    <li value="1">Have total control over the username being created in Office 365, even if the data from AD/Okta isn’t correct, UD allows you to standardize how Office 365 users are created.</li>
                                                    <li value="2">Pass attributes from AD direct to Office 365 without that information living on the Okta user profile.</li>
                                                    <li value="3">Make decisions on what an attribute should be, based on other attributes or states of the user.</li>
                                                    <li value="4">Okta here most importantly can act as an idfix tool to transform your data</li>
                                                </ul>
                                                <p>The following section details common use cases where UD is used with Office 365, however this isn’t an in-depth guide into Universal Directory.</p>
                                                <p>UD is all about giving you the power to control the mapping of attributes to Office 365 from either the source directory, or the user in Okta. It also lets you, using expressions, manipulate the data in those attributes. For Office 365, these are the most common situations where you want to make changes to the default configuration of UD.</p>
                                                <ul>
                                                    <li value="1">Username of the AD user (UPN) that was copied into Okta is not what you want to use in Office 365. (Idfix transformation)</li>
                                                    <li value="2">Primary email address for the AD user that was copied into Okta is not what you want in Office 365.</li>
                                                    <li value="3">You have a mix of AD and Okta users that both need to conform to a common username/email format in Office 365</li>
                                                    <li value="4">Different domains in Office 365 and want to handle the mapping of users differently between them.</li>
                                                </ul>
                                                <h2>Example Scenario 1 – Customizing a users User Principal Name for Office 365:</h2>
                                                <ol>
                                                    <li value="1">Login to your Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>The Okta container that represents a real-world organization.</span></a> as an administrator and navigate to the Applications \ Office 365 <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">app<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of application. Essentially, it is a web-based site used to perform any number of specific tasks, and requires authentication from end users by signing in.</span></a> instance you wish to control the username formats of provisioned users. Select the Provisioning tab.</li>
                                                    <li value="2">Make sure that Provisioning has been enabled and that the type is User Sync. Scroll to the bottom and click on “Edit Mappings”.</li>
                                                    <li value="3">You are then presented with buttons at the top. The first is for mapping attributes when you import from Office 365 into Okta, but we are interested in mapping attribute when we create the Office 365 user from Okta. So click on the button for Okta to Microsoft Office 365.</li>
                                                    <li value="4">You will now see the list of 20 attributes and by default, they will map to either existing Okta attributes or there will be an expression to get the attribute from the AD user, if there is one. The use case we want to address here is that the username from AD that is used in Okta, might not be the username you want in Office 365. Therefore change the value in the UserPrincipalName field (which will be login by default) to the expression shown below. &lt;image&gt; The expression takes the same username prefix (sam.smith) from the current Okta username but forces the <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">domain<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A domain is an attribute of an Okta organization. Okta uses a fully-qualified domain name, meaning it always includes the top-level domain (.com, .eu, etc.), but does not include the protocol (https).</span></a> you have configured in Office 365.</li>
                                                    <li value="5">
                                                        <p>Click on the Save Mappings button and this will update the configuration. Note if you have any users that are currently assigned and provisioned, the new changes will automatically update.</p>
                                                    </li>
                                                </ol>
                                                <h2>Example Scenario 2 – Customizing user attributes:</h2>
                                                <ol>
                                                    <li value="1">By default the <code>FacsimileTelephoneNumber </code>is the following expression: <code>hasDirectoryUser()?findDirectoryUser().facsimileTelephoneNumber:null</code> Which will use whatever is set in AD but default to blank if there is no value. You could extend this to evaluate if the AD user’s fax is blank and always set to the main company fax number. i.e. <code>hasDirectoryUser()?((findDirectoryUser().facsimileTelephoneNumber==null OR findDirectoryUser().facsimileTelephoneNumber=="")?"555 1234567":findDirectoryUser().facsimileTelephoneNumber):"555 123 4567</code>"</li>
                                                    <li value="2">Create a displayName with more data in it than default and force a standard displayname over whatever came in from AD. <code>source.firstName + " " + source.lastName + "(" + source.department + ")" </code>You could use a custom attribute in AD for setting titles. For example, if you added a customer attribute (or used one of the exchange customer attributes) in AD, and stored in it a true or false depending on if the user was a contractor. You can use the following expression for the Office 365 title. <code>source.title + (source.customAttribute01 == "true"?" (Contractor)":"") </code></li>
                                                    <li value="3">This will result in a title of “Sam Smith” for employees and “Alex Andrews (Contractor)” for contractors.</li>
                                                </ol>
                                                <p>Another important aspect about Universal Directory and Office 365 is that you have complete control over different domains of users. For example, you might have two Active Directory domains with different email address formats.</p>
                                                <table style="width: 100%;">
                                                    <col />
                                                    <col />
                                                    <col style="width: -1008px;" />
                                                    <tbody>
                                                        <tr>
                                                            <td>&#160;</td>
                                                            <td>Domain A</td>
                                                            <td>Domain B</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Email Format</td>
                                                            <td>

Firstname(1)LastName@company.com

</td>
                                                            <td>firstName.lastName@company.com
</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Example</td>
                                                            <td>ssmith@company.com
</td>
                                                            <td>sam.smith@company.com
</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <p>Then in Office 365 you might have two domains, @company.com and @product.com and users in Domain B need accounts in @product.com but Domain A in @company.com. But you might want to have firstName.lastName for the first part of the email on both domains. UD from Okta makes this easy. In Okta you add a separate Office 365 app for each domain in Office 365 for which you are provisioning users.</p>
                                                <p>You can set all the usernames in Okta to be a common format when you import users from the two Active Directory domains, because you have separate UD mappings and expressions for each domain. (See earlier in this document for mappings when bringing users in from AD). Then because you have two Office 365 apps in Okta for each domain, you can simply use different mappings to ensure the right emails and usernames are created in Office 365.</p><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                        <div>
                                        </div>
                                    </div>
                                    <div class="Footer">
                                        <div>
                                            <p class="copyright">© Copyright <span class="okta-variablesYear">2019</span> <span class="okta-variablesCompanyName">Okta, Inc</span></p>
                                        </div>
                                    </div>
                                    <script src="../../../../Resources/Scripts/js/app.js">
                                    </script>
                                    <!-- <script src="../../Resources/Scripts/js/vendor/jquery.js"></script> -->
                                    <script src="../../../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <script type="text/javascript" src="../../../../Resources/Scripts/back-to-top.js">
                                    </script>
                                    <script type="text/javascript" src="../../../../Resources/Scripts/get-feedback.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>