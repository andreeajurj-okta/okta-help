<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="Configure MFA for Active Directory Federation Services to securely authenticate ADFS users with Okta MFA." /><title>MFA for Active Directory Federation Services (ADFS) | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-TJ45R6');
			/* ]]> */
		</script>
        <!-- End Google Tag Manager -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/okta-main.css" rel="stylesheet" />
        <link href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="okta-coveo-configOrgId">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="okta-coveo-configPlatformRestUri">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="okta-coveo-configSearchPageUrl">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="okta-coveo-configSearchTokenServiceUrl">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************************* Coveo Search bar ************************************* -->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Left Nav Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="JDCN09VtVUq3-0N0mEW8yQ">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="JDCN09VtVUq3-0N0mEW8yQ:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_left_menu mc-component" data-mc-linked-toc="Data/Tocs/left_nav_TOC.js" data-mc-side-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- *** Col2: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                            </div>
                                            <div class="toolbar-main">
                                                <!-- Expand/Collapse All for drop-downs -->
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <h1>MFA for Active Directory Federation Services (ADFS) </h1>
                                                <p>The guide below outlines the setup process to install the Okta Multifactor <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Authentication<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Authentication is distinct from authorization, which is the process of giving individuals access to system objects based on their identity. Authentication merely ensures that the individual is who he or she claims to be, but says nothing about the access rights of the individual.

Authentication methods and protocols include direct auth, delegated auth, SAML, SWA, WS-Fed, and OpenID Connect.</span></a> (MFA) provider for <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Active Directory<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Active Directory (AD) is a directory service that Microsoft developed for the Windows domain networks. It is included in most Windows Server operating systems as a set of processes and services. Initially, Active Directory was only in charge of centralized domain management.</span></a> Federation Services (ADFS) v. 3.0 and v 4.0. With this feature, customers can use ADFS as their Identity Provider (<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">IdP<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for Identity Provider. It is a service that manages end user accounts analogous to user directories such as LDAP and Active Directory, and can send SAML responses to SPs to authenticate end users. Within this scenario, the IdP is Okta.</span></a>) to applications and also use Okta for MFA to provide a strong method of authentication for your applications. Please see the list of prerequisites and assumptions before starting the install process.  For information on enabling TLS 1.2 in .NET and in Microsoft Internet Explorer browsers, see <a href="../Miscellaneous/okta-ends-browser-support-for-TLS-1.1.htm">Okta ends browser support for TLS 1.1</a>. </p>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Supported Factors</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>The following MFA Factors are supported:</p>
                                                        <ul>
                                                            <li value="1"><a href="../Security/MFA.htm#OktaVerify">Okta Verify (Push and TOTP)</a>
                                                            </li>
                                                            <li value="2"><a href="../Security/MFA.htm#VoiceCall">Voice Call</a>
                                                            </li>
                                                            <li value="3"><a href="../Security/MFA.htm#SecurityQuestion">Security Question</a>
                                                            </li>
                                                            <li value="4"><a href="../Security/MFA.htm#GoogleAuthenticator">Google Authenticator</a>
                                                            </li>
                                                            <li value="5"><a href="../Security/MFA.htm#Duo">Duo</a>
                                                            </li>
                                                            <li value="6"><a href="../Security/MFA.htm#SymantecVIP">Symantec VIP</a>
                                                            </li>
                                                            <li value="7"><a href="../Security/MFA.htm#YubiKey">YubiKey</a>
                                                            </li>
                                                            <li value="8"><a href="../Security/MFA.htm#Email">Email</a>
                                                            </li>
                                                            <li value="9"><a href="../Security/MFA.htm#OnPremMFA">On-PremMFA (RSA)</a>
                                                            </li>
                                                            <li value="10"><a href="../Security/MFA.htm#SMSAuthentication">SMS Authentication</a>
                                                            </li>
                                                            <li value="11"><a href="../Security/MFA.htm#TOTPFactor">Custom TOTP Authentication</a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Part 1 – Pre-configuration: Configure MFA Factor Enrollment in Okta</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>Before beginning the installation, be sure the MFA Factors to use with ADFS are configured in Okta. </p>
                                                        <div class="noteOkta">
                                                            <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                            <p class="noteHeading">Note</p>
                                                            <p class="noteContent">You can skip this step if you have already configured factor enrollment.</p>
                                                        </div>
                                                        <ol>
                                                            <li value="1">Login to your Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>The Okta container that represents a real-world organization.</span></a>.</li>
                                                            <li value="2">Navigate to <b>Security &gt; Multifactor</b>.</li>
                                                            <li value="3">Select the <b>Factor Types</b> tab, then select the factors you want to enable in your org.
					<img src="../../Resources/Images/okta-adfs1.png" /></li>
                                                            <li value="4">Select the <b>Factor Enrollment</b> tab and set up a policy to prompt for MFA (this can be scoped to users who will need to provide MFA for ADFS&#160;logins).
                  <p><img src="../../Resources/Images/okta-adfs2_585x510.png" style="width: 585;height: 510;" /></p><p><img src="../../Resources/Images/okta-adfs3_487x393.png" style="width: 487;height: 393;" /></p></li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Part"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Part 2 – Create the Microsoft ADFS (MFA) application in Okta</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ol>
                                                            <li value="1">Login into your Okta org as an administrator. </li>
                                                            <li value="2">Navigate to <b>Applications &gt; Applications</b>, then click <b>Add Application</b>.
					<p><img src="../../Resources/Images/okta-adfs4.png" /></p></li>
                                                            <li value="3">Search for the <b>Microsoft ADFS (MFA)</b> application, and then click <b>Add</b>.
                    
                       <p> <img src="../../Resources/Images/okta-adfs5a.png" /></p></li>
                                                            <li value="4">
                                                                <p>On the <b>General</b> tab for the Microsoft ADFS&#160;<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">app<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of application. Essentially, it is a web-based site used to perform any number of specific tasks, and requires authentication from end users by signing in.</span></a>, specify an <b>Application Label</b> relevant to your organization, then click <b>Next</b>.</p>
                                                            </li>
                                                            <li value="5">
                                                                <p> On the <b>Sign-On</b> options page, ensure the <b>OpenID&#160;Connect</b> is selected and enter an appropriate <b>Redirect&#160;URI</b>, then click <b>Done</b>. </p>
                                                                <p>
                                                                    <img src="../../Resources/Images/hybrid-access/adfs-okta-int.05_484x206.png" style="width: 484;height: 206;" />
                                                                </p>
                                                            </li>
                                                            <li value="6">
                                                                <p>Select the <b>Sign on</b> tab of the newly created Microsoft ADFS application and confirm that the sign-on mode is <b>OpenID Connect</b>.</p>
                                                                <p>
                                                                    <img src="../../Resources/Images/hybrid-access/adfs-okta-int.06.png" />
                                                                </p>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Part3"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Part 3 – Enable Cross-Origin Resource Sharing (CORS) in your Okta org</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <div class="noteOkta">
                                                            <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                            <p class="noteHeading">Note</p>
                                                            <p class="noteContent">For more information about CORS, see <a href="https://developer.okta.com/docs/api/getting_started/enabling_cors.html">CORS Overview</a>.</p>
                                                        </div>
                                                        <ol>
                                                            <li value="1">Login to your Okta org.</li>
                                                            <li value="2">Navigate to <b>Security &gt; API</b>.</li>
                                                            <li value="3">Select the <b>Trusted Origins</b> tab, then click <b>CORS</b>.
					<p><img src="../../Resources/Images/okta-adfs6.png" /></p></li>
                                                            <li value="4"><b>Select Add Origin</b>.</li>
                                                            <li value="5">Enter the following information:
					<ul><li value="1"><p><b>Name</b></p></li><li value="2"><p><b>Origin URL</b>: This can be your ADFS service name.</p></li><li value="3"><p>Check the box for CORS <b>Type</b>, then click <b>Save</b>.</p></li></ul><p><img src="../../Resources/Images/okta-adfs7.png" /></p></li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Part2"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Part 4 – Install the Okta ADFS Plugin on your ADFS Server</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ol>
                                                            <li value="1">
                                                                <p>Return to, or login to your Okta org.</p>
                                                            </li>
                                                            <li value="2">
                                                                <p>Navigate to <b>Settings &gt; Downloads</b>.</p>
                                                            </li>
                                                            <li value="3">
                                                                <p>Scroll to the <b>MFA Plugins and Agents</b> section.</p>
                                                            </li>
                                                            <li value="4">
                                                                <p>Click the <b>Download Latest</b> button to download the Okta MFA provider for ADFS&#160;<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">agent<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A software agent is a lightweight program that runs as a service outside of Okta. It is typically installed behind a firewall and allows Okta to tunnel communication between an on-premises service and Okta's cloud service. Okta employs several agent types: Active Directory, LDAP, RADIUS, RSA, Active Directory Password Sync, and IWA. For example, users can install multiple Active Directory agents to ensure that the integration is robust and highly available across geographic locations.</span></a>,</p>
                                                                <p>
                                                                    <img src="../../Resources/Images/hybrid-access/adfs-okta-int.sect04.01.png" style="border-left-style: solid;border-left-width: 1px;border-left-color: #d3d3d3;border-right-style: solid;border-right-width: 1px;border-right-color: #d3d3d3;border-top-style: solid;border-top-width: 1px;border-top-color: #d3d3d3;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #d3d3d3;" />
                                                                </p>
                                                                <p><b>Note:</b> The <a href="../Settings/Version_Histories/Ver_History_ADFS_Adapter.htm">version history</a> describes all version of this plugin. </p>
                                                            </li>
                                                            <li value="5">Unzip the archive, and run <i>setup.exe</i> as administrator.</li>
                                                            <li value="6">Click <b>Next</b> to start the installation.
					<p><img src="../../Resources/Images/okta-adfs8.png" /></p></li>
                                                            <li value="7">Log back into your Okta org, then navigate to  the <b>Microsoft ADFS (MFA) application</b> application you created earlier (<a href="#Part">Part 2</a>).
                        <p><img src="../../Resources/Images/okta-adfs9.png" /></p></li>
                                                            <li value="8">Select the <b>General</b> tab and locate the values for <b><a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Client<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Essentially, a client is anything that talks to the Okta service. Within the traditional client-server model, Okta is the server. The client might be an agent, an Okta mobile app, or a browser plugin. </span></a> ID</b> and <b>Client secret</b>.
							<p><img src="../../Resources/Images/okta-adfs10.png" /></p></li>
                                                            <li value="9">The Okta ADFS Adapter install will prompt you for values for <b>ClientId</b>, <b>ClientSecret</b>, and <b>Okta URL</b> (this is your org name with the https prefix). For example:&#160;
                        <ul><li value="1"><b>ClientId</b>: <i>90aSt67bHgyW9bv</i></li><li value="2"><b>ClientSecret</b>: <i>80hglw7bw46hNoTpbnAyqzihouyzia</i></li><li value="3"><b>OktaURL</b>: <i>https://atkodemoorg.oktapreview.com</i></li></ul><p><img src="../../Resources/Images/okta-adfs11.png" /></p></li>
                                                            <li value="10">
                                                                <p>(Optional) Elect to register the Okta ADFS Adapter</p>
                                                                <p>To register, select the box shown below.</p>
                                                                <p>
                                                                    <img src="../../Resources/Images/okta-adfs35.png" />
                                                                </p>
                                                                <p>If you are installing in a Federation Server Farm,do not check <b>Register Okta ADFS Adapter</b>. Refer to the manual registration procedure detailed in the <a href="#Farm">Farm Installation Addendum</a>.</p>
                                                            </li>
                                                            <li value="11">
                       Specify the drive and folder where you want to install the Okta MFA Adapter.
<p> <img src="../../Resources/Images/okta-adfs12.png" /></p></li>
                                                            <li value="12">
                      You will be notified that the install for the ADFS Plugin has completed.
 Click <b>Close</b>.<p><img src="../../Resources/Images/okta-adfs13.png" /></p></li>
                                                            <li value="13">If you are installing in a Federation Server Farm,do not check <b>Register Okta ADFS Adapter</b>. Refer to the manual registration procedure detailed in the <a href="#Farm">Farm Installation Addendum</a>.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Part 5 – Enable the Okta MFA Provider in ADFS</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ol>
                                                            <li value="1">Log onto your ADFS server.</li>
                                                            <li value="2">Open the ADFS management console.
					<p><img src="../../Resources/Images/okta-adfs14.png" /></p></li>
                                                            <li value="3">
                        Expand <b>Service - Authentication Methods</b>.
                    </li>
                                                            <li value="4">
                       Right-click on <b>Authentication Methods</b>.
                    </li>
                                                            <li value="5">
                        Click <b>Edit Multi-factor Authentication Methods...</b>.
						<p><img src="../../Resources/Images/okta-adfs15.png" /></p></li>
                                                            <li value="6">
                       Select <b>Okta MFA Provider</b>, then click <b>OK</b>.
<p><img src="../../Resources/Images/okta-adfs16.png" /></p></li>
                                                            <li value="7">
                      Select <b>Access Control Policies</b>.
						<p><img src="../../Resources/Images/okta-adfs17.png" /></p></li>
                                                            <li value="8">Select <b>Add Access Control Policy</b>.
					<p><img src="../../Resources/Images/okta-adfs18.png" /></p></li>
                                                            <li value="9">Enter a <b>Name</b> and <b>Description</b>, then click <b>Add</b>.
						<p><img src="../../Resources/Images/okta-adfs19.png" /></p></li>
                                                            <li value="10">
                       In the Rule Editor, configure a policy as required for your organization. Ensure that you include the <b style="font-style: italic;">and require multifactor authentication</b> option in your rule editor. Click <b>OK</b>.
                    <p><img src="../../Resources/Images/okta-adfs20.png" /></p></li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Part 6 – Add the Access Control Policy to a Relying Party Application</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>The following instructions are for ADFS 4. Instructions for ADFS 3 are available from Microsoft at <a href="https://docs.microsoft.com/en-us/windows-server/identity/ad-fs/operations/access-control-policies-w2k12" target="_blank">Access Control Policies in Windows Server 2012 R2 and Windows Server 2012 AD FS</a>.</p>
                                                        <ol>
                                                            <li value="1">In the ADFS management console, go to <b>Relying Party Trusts</b>.</li>
                                                            <li value="2">Right-click on the application, then select  <b>Edit Access Control Policy</b>.
					<p><img src="../../Resources/Images/okta-adfs21.png" /></p></li>
                                                            <li value="3">In the Settings section, click Edit. Choose the Application username format that you want to assign to users that will require this application.</li>
                                                            <li value="4">Select the policy you created in the previous step, then  click <b>OK</b>.
					<p><img src="../../Resources/Images/okta-adfs22.png" /></p><p><img src="../../Resources/Images/okta-adfs23.png" /></p></li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Part 7 – Assign the Microsoft ADFS (MFA) Application in Okta</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ol>
                                                            <li value="1">Log into your Okta org.</li>
                                                            <li value="2">Navigate to <b>Applications</b>, then select the Microsoft ADFS (MFA) application you created earlier.</li>
                                                            <li value="3">Select the <b>Assignments</b> tab, then select the individual users or <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">groups<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Groups allow you to organize your end users and the apps they can access. Assigning apps to large sets of end users is made easier with groups.</span></a> to whom this application will be assigned.
                <p>Ensure that the username assigned in the application matches the username that users will use for their ADFS initiated logins.</p></li>
                                                            <li value="4">When you are finished with the application assignments, click <b>Done</b>.
					<p><img src="../../Resources/Images/okta-adfs24.png" /></p><p><img src="../../Resources/Images/okta-adfs25.png" /></p></li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Part 8 – Verify the Okta MFA prompt when logging into ADFS</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ol>
                                                            <li value="1">Login to the test device to verify the Okta MFA prompt for ADFS login.</li>
                                                            <li value="2">Navigate directly to your ADFS login page (Id- initiated login), or login directly to an application that has been configured for <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">SSO<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for single sign-on. In a SSO system, a user logs in once to the system and can access multiple systems without being prompted to sign in for each one. Okta is a cloud-based SSO platform that allows users to enter one name and password to access multiple applications. Users can access all of their web applications, both behind the firewall and in the cloud, with a single sign in. Okta provides a seamless experience across PCs, laptops, tablets, and smartphones.</span></a> via ADFS (Service Provider-initiated login).</li>
                                                            <li value="3">After entering your credentials, you will either be redirected to your ADFS login page, or be prompted for Okta MFA if you started with IdP-initiated login.
						 <p>The example below shows service provider initiated login via Office 365:</p><table style="width: 99%;"><col /><col /><tbody><tr style="width: 25%;"><td>IdP&#160;Discovery at Office 365</td><td><img src="../../Resources/Images/okta-adfs26.png" /></td></tr><tr><td>Username/Password at ADFS</td><td><img src="../../Resources/Images/okta-adfs27.png" /></td></tr><tr><td>MFA by Okta embedded in ADFS</td><td><img src="../../Resources/Images/okta-adfs28.png" /></td></tr></tbody></table></li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Enable"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Enable Open ID Connect with existing ADFS installations</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>To enable an existing application to use OpenID Connect:</p>
                                                        <ol>
                                                            <li value="1">Navigate to your ADFS application and select the <b>Sign On</b> tab.</li>
                                                            <li value="2">Select <b>OpenID&#160;Connect</b>.<br /><b>Note</b>:&#160;Ensure that the <span style="font-family: 'Courier New';">redirectURI</span> parameter is set correctly.<br /><img src="../../Resources/Images/hybrid-access/EnableOIDCExistingADFS.1.png" /></li>
                                                            <li value="3">
                                                                <p>Upgrade any existing ADFS plug-ins  to version 1.7.0 or later <br /><b>Note</b>:&#160;Be sure to remove the Okta MFA Provider from the Authentication Policy in ADFS before running any plug-in upgrades.</p>
                                                                <p>
                                                                    <img src="../../Resources/Images/hybrid-access/EnableOIDCExistingADFS.2.png" />
                                                                </p>
                                                            </li>
                                                            <li value="4">After the upgrade completes, ensure that your application still functions normally.</li>
                                                            <li value="5">Using a text editor, open the <span style="font-family: 'Courier New';">okta_adfs_adapter.json</span> file and modify it to set <b style="font-family: 'Courier New';">"useOIDC":true.</b><br /><b>Note</b>: By default the <span style="font-family: 'Courier New';">okta_adfs_adapter.json</span> file can be found in <span style="font-family: 'Courier New';">c:\Program Files\Okta\Okta MFA Provider\config\okta_adfs_adapter.json</span>.<br /><img src="../../Resources/Images/hybrid-access/EnableOIDCExistingADFS.4.png" /></li>
                                                            <li value="6">Using a text editor copy and create the following Microsoft Powershell script and save as <b>ApplyConfigurationSettingChanges.ps1</b>.<br /><br /><code><pre>
# ApplyConfigurationSettingChanges.ps1
[System.Reflection.Assembly]::Load("System.EnterpriseServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")

$BinDir = "C:\Program Files\Okta\Okta MFA Provider\bin"
$ConfigDir = "C:\Program Files\Okta\Okta MFA Provider\config"

Start-Service adfssrv

# Remove Okta MFA Provider
$providers = (Get-AdfsGlobalAuthenticationPolicy).AdditionalAuthenticationProvider
$providers.Remove("OktaMfaAdfs") 
Set-AdfsGlobalAuthenticationPolicy -AdditionalAuthenticationProvider $providers

# Unregister 
Unregister-AdfsAuthenticationProvider -Name "OktaMfaAdfs" -Confirm:$false -ErrorAction Stop

# restart the ADFS service
Restart-Service adfssrv -Force

# register MFA adapter again
$OktaMfaAssamply = [Reflection.Assembly]::Loadfile($BinDir + "\OktaMfaAdfs.dll")
$typeName = "OktaMfaAdfs.AuthenticationAdapter, OktaMfaAdfs, Version=" + $OktaMfaAssamply.GetName().Version + ", Culture=neutral, PublicKeyToken=3c924b535afa849b"
Register-AdfsAuthenticationProvider -TypeName $typeName -Name "OktaMfaAdfs" -Verbose -ConfigurationFilePath "$ConfigDir\okta_adfs_adapter.json"

# restart the service
Restart-Service adfssrv -Force

# Enable Okta MFA adapter
$providers = (Get-AdfsGlobalAuthenticationPolicy).AdditionalAuthenticationProvider
$providers.Add("OktaMfaAdfs") 
Set-AdfsGlobalAuthenticationPolicy -AdditionalAuthenticationProvider $providers
						</pre></code></li>
                                                            <li value="7">If required change the values of the <b>BinDir</b> and <b>ConfigDir</b> variables to match your environment. </li>
                                                            <li value="8">As administrator open a Microsoft PowerShell and execute the script <b>ApplyConfigurationSettingChanges.ps1</b>.					</li>
                                                            <li value="9">Verify that the user can authenticate.</li>
                                                        </ol>
                                                        <p>You have successfully upgraded your application plug in to use OpenID Connect. </p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Farm"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Farm Installation Addendum</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>In a Federation Server Farm environment, Administrator are required to follow these additional installation steps to ensure successful installation of the adapter.</p>
                                                        <h2>Background</h2>
                                                        <p>The installer stores the <b>Client Secret</b> as a protected string.  That protected string is generated using a machine specific key.</p>
                                                        <p>When ADFS is setup in a server farm, the configuration file is replicated among farm member servers.  As a result the final configuration file will contain a single client secret that can only be decrypted by one server; the last server on which the installation was completed.</p>
                                                        <p>If the ADFS server farm is using the WID database and not a SQL database you will also need to promote each server to be the primary server during the installation.  For this reason we recommend starting the installation on the current primary server, if you start on the primary server and follow the sequence as described below you will complete the installation on the original primary server returning it to its primary state.  Identify the current primary server with the powershell command <span style="font-family: 'Courier New'; font-size: 11pt;">Get-AdfsFarmInformation</span>.</p>
                                                        <div class="noteOkta">
                                                            <img src="../../Resources/Images/assets/Icons/Notes/Help.png" class="noteImgFloat" title="Info" alt="Info" />
                                                            <p class="noteHeading">Note</p>
                                                            <p class="noteContent">If the ADFS server farm is using the WID database and not a SQL database you will also need to promote each server to be the primary server during the installation.  We recommend starting the installation on the current primary server, if you start on the primary server and follow the sequence as described below you will complete the installation on the original primary server returning it to its primary state.  Identify the current primary server with the powershell command <span style="font-family: 'Courier New'; font-size: 11pt;">Get-AdfsFarmInformation</span></p>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Procedure</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <ol>
                                                                    <li value="1">If installing on servers in a WID based ADFS farm identify the current primary server, start the sequence from there.</li>
                                                                    <li value="2">Perform the installation as described in <a href="#Part2">Part 4</a> of the Setup Instructions above.</li>
                                                                    <li value="3">Retrieve and copy the protected string values from each server.</li>
                                                                    <li value="4">Combine the values in a modified configuration file.</li>
                                                                    <li value="5">Replace the configuration file with the modified version on the last server.</li>
                                                                    <li value="6">Manually re-register the ADFS Authentication Provider.</li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Detailed Procedure</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <ol>
                                                                    <li value="1">If using alocal database farm (WID) and the current computer is NOT the primary server in the farm promote it to primary by executing this command on server:
                            <p><span style="font-family: 'Courier New'; font-size: 11pt;">Set-AdfsSyncProperties -Role PrimaryComputer</span></p></li>
                                                                    <li value="2">Perform the installation as described above on the first server.</li>
                                                                    <li value="3">Open the <span style="font-family: 'Courier New'; font-size: 11pt;">okta_adfs_adapter.json</span> file <span style="font-family: 'Courier New'; font-size: 11pt;">(%ProgramFiles%\Okta\Okta MFA Provider\config</span>) with a text editor such as Notepad:							<p><img src="../../Resources/Images/okta-adfs29.png" /></p><ol style="list-style-type: lower-alpha;"><li value="1"><p>Copy the client secret value (truncated secret shown)</p></li><li value="2"><p>Paste the value in a separate file</p></li><li value="3"><p>Repeat Step 2 on the remaining servers in the environment</p></li><li value="4"><p>Proceed to Step 4 when you’ve completed the preceding steps on all of the servers in the farm.</p></li></ol></li>
                                                                    <li value="4">Combine the values in a modified configuration file:
								<ol style="list-style-type: lower-alpha;"><li value="1">From the original primary server</li><li value="2">Promote the server back to primary:										<p><span style="font-family: 'Courier New'; font-size: 11pt;">Set-AdfsSyncProperties -Role PrimaryComputer</span></p></li><li value="3">Open the okta_adfs_adapter.json file:
								<p>If UAC is on make sure your editor is running as administrator</p></li><li value="4"><p>Copy/Paste the entire contents of your seperate file that contains the protected secrets from the other servers.</p></li><li value="5"><p>Shown below are the four protected strings from my servers and the full configuration file from the first (and now primary) server in one file.</p><p><img src="../../Resources/Images/okta-adfs30.png" /></p></li><li value="6"><p>Arrange the list of protected strings into a json array (note the last element in the array does not end with a comma).</p><p><img src="../../Resources/Images/okta-adfs31.png" /></p></li><li value="7"><p>Replace the clientSecret string value of your complete configuration file with the array you just created.</p></li><p><img src="../../Resources/Images/okta-adfs32.png" /></p><li value="8"><p><b>Note</b>: Indentation and new line formatting is optional</p></li><li value="9"><p><b>Optional</b>: Use a json lint tool to validate the json is well formed.  Online versions are available, use at your own discretion. For example:&#160;<a href="https://jsonlint.com/">https://jsonlint.com/</a>.</p></li></ol></li>
                                                                    <li value="5">
                                Replace the configuration file with the modified version on the last server:
								<ul><li value="1"><p>Replace the <span style="font-family: 'Courier New'; font-size: 11pt;">okta_adfs_adapter.json</span> file on the last server with the newly created config file.</p></li><li value="2"><p><b>Note</b>: you may need to run notepad as a administrator</p></li></ul></li>
                                                                    <li value="6">
                               Manually re-register the Adfs Authentication Provider:
<ul><li value="1">Sample Script:
											
											&#160;<p style="font-family: 'Courier New';">$a=[System.Reflection.Assembly]::LoadFile("C:\Program Files\Okta\Okta MFA Provider\bin\OktaMfaAdfs.dll")</p><p style="font-family: 'Courier New';">$file=[String]::Format("OktaMfaAdfs.AuthenticationAdapter, {0}", $a.GetName().FullName)</p><p style="font-family: 'Courier New';">Unregister-AdfsAuthenticationProvider -Name "OktaMfaAdfs"</p><p style="font-family: 'Courier New';">Register-AdfsAuthenticationProvider -Name "OktaMfaAdfs" -TypeName $file -ConfigurationFilePath "C:\Program Files\Okta\Okta MFA Provider\config\okta_adfs_adapter.json"</p></li></ul></li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Troubleshooting</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ol>
                                                            <li value="1">If you see this message when logging into ADFS, ensure you have enabled CORS in your Okta org (<a href="#Part3">Part 3</a> in the setup guide).
					<p><img src="../../Resources/Images/okta-adfs33.png" /></p></li>
                                                            <li value="2">During installation you encounter an error 1001 PS0033  “cmdlet cannot be executed from a secondary server in a local database farm.
					<p>If you encounter this error closely follow the instructions in the <a href="#Farm">Farm Installation addendum</a>, especially the steps that discuss WID (windows internal database) and promoting each server to be primary.</p><p><img src="../../Resources/Images/okta-adfs34.png" /></p></li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Un-install Okta MFA for ADFS</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>To uninstall Okta MFA for ADFS</p>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Remove access control policy from ADFS</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <ol>
                                                                    <li value="1">In the ADFS management console navigate to <b>Relying Party Trusts</b>.</li>
                                                                    <li value="2">Right-click on the application.</li>
                                                                    <li value="3">Select <b>Edit Access Control Policy</b>.</li>
                                                                    <li value="4">Select previously added access control policy and remove.</li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Disable Okta MFA Provider for ADFS</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <ol>
                                                                    <li value="1">Log onto your ADFS server.</li>
                                                                    <li value="2">Open the ADFS management console.</li>
                                                                    <li value="3">Expand <b>Service - Authentication Methods</b>.</li>
                                                                    <li value="4">Right-click <b>Authentication Method</b>s.</li>
                                                                    <li value="5">Click <b>Edit Multi-factor Authentication Methods.</b></li>
                                                                    <li value="6">Deselect <b>Okta MFA Provide</b>r.</li>
                                                                    <li value="7">Select <b>Access Control Policies</b>.</li>
                                                                    <li value="8">Select <b>Prompt for Okta MFA</b>.</li>
                                                                    <li value="9"><b>Delete</b>.</li>
                                                                    <li value="10">Click <b>OK</b>.</li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Uninstall the Okta ADFS Plugin</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <ol>
                                                                    <li value="1">Click the Windows icon in the lower left cover of the Windows screen.</li>
                                                                    <li value="2">Choose uninstall.</li>
                                                                    <li value="3">Select the Okta MFA Provider.</li>
                                                                    <li value="4">Right click and choose uninstall.</li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Delete all assignments</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <p>Note: This step is optional and can be completed after other steps.</p>
                                                                <p>To delete all group and user assignment in your Okta org:</p>
                                                                <ol>
                                                                    <li value="1">Login or return to your Okta org as an administrator.</li>
                                                                    <li value="2">Navigate to <b>Applications</b>, </li>
                                                                    <li value="3">Select the Microsoft ADFS (MFA) application.</li>
                                                                    <li value="4">Select the <b>Assignments</b> tab.</li>
                                                                    <li value="5">Delete all assignments.</li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Disable Cross-Origin Resource Sharing in your Okta Org</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <ol>
                                                                    <li value="1">Login or return to your Okta org as an administrator.</li>
                                                                    <li value="2">Select <b>Security &gt; API</b>.</li>
                                                                    <li value="3">Select the <b>Trusted Origins</b> tab.</li>
                                                                    <li value="4">Click <b>CORS</b>.</li>
                                                                    <li value="5">Select your origin.</li>
                                                                    <li value="6">Right click and choose <b>Remove</b>.</li>
                                                                    <li value="7">Click <b>Save</b>.	</li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Remove the Microsoft ADFS Application in your Okta org</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <ol>
                                                                    <li value="1">Login or return to your Okta org as an administrator.</li>
                                                                    <li value="2">Navigate to <b>Applications &gt; Applications</b>.</li>
                                                                    <li value="3">Select <b>STATUS</b> Active.</li>
                                                                    <li value="4">For the Microsoft ADFS (MFA) application choose the gear icon and select <b>deactivate</b>.</li>
                                                                    <li value="5">Optional:
							<ol style="list-style-type: lower-alpha;"><li value="1">Select STATUS <b>INACTIVE</b></li><li value="2">For the Microsoft ADFS application choose the gear icon and select <b>Delete</b>.</li><li value="3">Confirm the deletion.</li></ol></li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                        <!-- *** Col3: Right menu Col *** -->
                                        <div class="is-not-in-mobile">
                                        </div>
                                    </div>
                                    <!-- ***************************** Footer rows ********************************* -->
                                    <div class="footer-temp">
                                        <div class="is-not-in-mobile">
                                            <p> </p>
                                        </div>
                                        <div>
                                            <p class="copyright">©  <span class="okta-variablesYear">2019</span> <span class="okta-variablesCompanyName">Okta, Inc</span> All Rights Reserved. Various trademarks held by their respective owners.</p>
                                        </div>
                                    </div>
                                    <!-- ***************************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Ours -->
                                    <script type="text/javascript" src="../../Resources/Scripts/back-to-top.js">
                                    </script>
                                    <script type="text/javascript" src="../../Resources/Scripts/get-feedback.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>