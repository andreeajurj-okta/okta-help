<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Documentation|Product documentation|Directory Integrations">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Install and Configure IWA Desktop SSO</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-TJ45R6');
			/* ]]> */
		</script>
        <!-- End Google Tag Manager -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/okta-main.css" rel="stylesheet" />
        <link href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="okta-coveo-configOrgId">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="okta-coveo-configPlatformRestUri">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="okta-coveo-configSearchPageUrl">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="okta-coveo-configSearchTokenServiceUrl">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************************* Coveo Search bar ************************************* -->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Left Nav Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="icW3rSe8EUypp89fwX8RQg">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="icW3rSe8EUypp89fwX8RQg:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_left_menu mc-component" data-mc-linked-toc="Data/Tocs/left_nav_TOC.js" data-mc-side-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- *** Col2: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="toolbar-main">
                                                <!-- Expand/Collapse All for drop-downs -->
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <h1><a name="top"></a><a name="aanchor0"></a>
                                                    <MadCap:concept term="dir-intg" />Install and configure the Okta IWA&#160;Web agent for Desktop SSO</h1>
                                                <hr width="100%" size="0" align="center" />
                                                <p>
		Okta IWA is a lightweight Internet Information Services (IIS) web <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">agent<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A software agent is a lightweight program that runs as a service outside of Okta. It is typically installed behind a firewall and allows Okta to tunnel communication between an on-premises service and Okta's cloud service. Okta employs several agent types: Active Directory, LDAP, RADIUS, RSA, Active Directory Password Sync, and IWA. For example, users can install multiple Active Directory agents to ensure that the integration is robust and highly available across geographic locations.</span></a> that enables Desktop <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">SSO<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An acronym for single sign-on. In a SSO system, a user logs in once to the system and can access multiple systems without being prompted to sign in for each one. Okta is a cloud-based SSO platform that allows users to enter one name and password to access multiple applications. Users can access all of their web applications, both behind the firewall and in the cloud, with a single sign in. Okta provides a seamless experience across PCs, laptops, tablets, and smartphones.</span></a> on the&#160;Okta service.&#160;Desktop SSO allows users to be automatically authenticated by Okta and any apps accessed through Okta, whenever they sign into your Windows network. The Okta IWA Web agent uses Microsoft's IWA and ASP.NET to authenticate users from specified gateway IPs.&#160;</p>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />IWA Authentication Flow — Diagram 1</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>
                                                            <img src="../../Resources/Images/IWA_Auth_Flow_Simple_4.png" />
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />IWA Authentication Flow — Diagram 2</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>
                                                            <img src="../../Resources/Images/IWA flow_large numbers_Sept2017.png" />
                                                        </p>
                                                        <p>When you have only one forest it doesn't matter to which IWA agent requests are routed. When you have multiple forests, you need to start taking network configuration into consideration. You need to ensure that user A on machine A only redirects to IWA agents that are in forest A, and user B on machine B only redirects to agents that are in forest B. The suggested way of doing that is redirecting the traffic from Okta to a global redirect URL, and then setting up your on-prem DNS&#160;to do the correct routing for that endpoint. You may also need to set up on-prem load balancing and the ability to detect which agents are online and offline into your load balancer.</p>
                                                    </div>
                                                </div>
                                                <hr width="100%" size="0" align="center" />
                                                <h2><a name="REQUIREM"></a>REQUIREMENTS</h2>
                                                <p>Prerequisite</p>
                                                <p>You must have installed and configured the Okta AD agent and Delegated Authentication must be on before you can configure IWA&#160;Desktop SSO. For details, see <a href="ad-agent-install.htm" class="MCXref xref">Install and configure the Okta Active Directory (AD) agent</a></p>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />System Requirements</a><a name="SysReqs"></a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ul>
                                                            <li value="1">Make sure that <b>Port 80</b> (for http) and <b>Port 443</b>&#160;(for&#160;https) are open for inbound traffic on the&#160;same server that hosts the Okta IWA Web agent.<p><b>Note</b>:&#160;Okta strongly recommends that you enable SSL.</p></li>
                                                            <li value="2">
                                                                <p>Windows Server 2008 R2, Windows Server 2012, Server 2016 or Windows Server 2019 and higher. Although the IWA Web Agent will also work with Windows Server 2008, for best results, Okta recommends Windows Server 2008 R2 and Windows Server 2012.</p>
                                                                <p>If you use Windows Server 2008 R2, keep in mind the following:</p>
                                                                <ul>
                                                                    <li value="1">Microsoft requires Windows Server 2008 R2 users to have an extended support agreement. Also, Microsoft plans to EOL Windows Server 2008 R2 by 2020.</li>
                                                                    <li value="2">Additional security configuration is required if your IWA Web agent is installed on a server running Windows Server 2008 R2. For more information, see <a href="#EnableTLS">Enabling TLS 1.2 on Windows Server 2008 R2.</a></li>
                                                                </ul>
                                                            </li>
                                                            <li value="3"><b>.NET 4.5.2</b> (minimum)&#160;up to&#160;&#160;<b>.NET&#160;4.6.x</b> &#160;and ASP .NET 4.5.  &#160;If you have a lower version of .NET, please upgrade to 4.5.2 or higher.</li>
                                                            <li value="4">
                                                                <p>To improve the security of our integrations, we now only communicate using TLS 1.2 security protocol. Ensure you are running .NET framework 4.5.2 or later so the AD agent installs correctly. For Windows 2008 R2 TLS 1.2 is disabled by default and <b>must</b> be enabled through the registry. If you have Windows 2008 R2,  ensure the following regkeys are set correctly:</p>
                                                                <p style="font-family: 'Courier New';">[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Server] "<span style="color: #ff0000;">Enabled</span>"=dword:00000001</p>
                                                                <p><span style="font-family: 'Courier New';">[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Server] <span style="color: #ff0000;">"DisabledByDefault</span>"=dword:00000000</span>
                                                                </p>
                                                                <p style="font-family: 'Courier New';">[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\<a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup" style="font-family: 'Courier New';">Client<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Essentially, a client is anything that talks to the Okta service. Within the traditional client-server model, Okta is the server. The client might be an agent, an Okta mobile app, or a browser plugin. </span></a>] "<span style="color: #ff0000;">Enabled</span>"=dword:00000001</p>
                                                                <p><span style="font-family: 'Courier New';">[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Client] "<span style="color: #ff0000;">DisabledByDefault</span>"=dword:00000000</span>
                                                                </p>
                                                            </li>
                                                            <li value="5">IIS 7.5 or higher must be installed on the server. If the required IIS version is not installed, the installer quits and you receive an error message.</li>
                                                            <li value="6">AD Agent 3.0.4.x or higher. The AD agent does not have to be on the same server that hosts the Okta IWA Web agent.&#160;</li>
                                                            <li value="7">If your enterprise has more than one <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">domain<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A domain is an attribute of an Okta organization. Okta uses a fully-qualified domain name, meaning it always includes the top-level domain (.com, .eu, etc.), but does not include the protocol (https).</span></a>, see the topic <a href="#ConfigureUPNTransform">Configuring UPN Transformation</a>.</li>
                                                            <li value="8">If your IWA Web agent is installed on a Virtual Machine (VM) with other web apps, see <a href="#IWA_VM">this topic</a>.</li>
                                                            <li value="9">
                                                                <p>The IWA agent doesn't require any extra privileges beyond the default permissions the user inherits from the Domain Users group. However, note the following:</p>
                                                                <ul>
                                                                    <li value="1">The installer configures some additional local permissions for the service account to allow it access the web-application files. </li>
                                                                    <li value="2">The IWA agent requires read and execute permissions for files in C:\inetpub\webroot\IWA.</li>
                                                                    <li value="3">If you want to use an existing account, then ensure:
                                <ul><li value="1">the account is active and the password never expires   </li><li value="2">the account has permissions to read and execute for the C:\inetpub\wwwroot\IWA directory and its content</li></ul></li>
                                                                </ul>
                                                                <p>
                                                                    <br />
                                                                </p>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <hr width="100%" size="0" align="center" />
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Known Issues and Caveats</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>Okta strongly recommends that you transition to using Secure Sockets Layer (SSL) with the on-premises agent. This is important to provide the utmost security, but it is also a hard requirement for some applications to successfully authenticate (in particular, Windows 10 Universal Applications such as OneNote, Mail).</p>
                                                        <p><b>Note</b>: The latest builds of Office 2016 and Windows 10 are incorporating their Web Account Manager (WAM) for sign-in workflows (see <a href="https://support.microsoft.com/en-my/help/4025962/you-can-t-sign-in-after-you-update-to-office-2016-build-16-0-7967-or-a">this</a> Microsoft article). WAM requires https  — it blocks non-https traffic during auth workflows. Refer to <a href="#ConfigureSSL">Configure SSL</a> for details about how to configure IWA for this use case. </p>
                                                    </div>
                                                </div>
                                                <hr width="100%" size="0" align="center" />
                                                <h2><a name="PROCEDURE"></a>PROCEDURE</h2>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />STEP&#160;1:&#160;Install the Okta IWA Web agent</a><a name="InstallingIWA"></a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>The Okta Administrative Account that will be used during IWA Agent installation must have Super <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">admin<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of administrator. This is the individual(s) who have access to the Okta Administrator Dashboard. They control the provisioning and deprovisioning of end users, the assigning of apps, the resetting of passwords, and the overall end user experience. Only administrators have the Administration button on the upper right side of the My Applications page.</span></a> permissions.</p>
                                                        <p>Note:&#160;When you install the IWA agent the IP address of the client is added to the LegacyIPZone. For details, see <a href="../Security/Security_Network.htm#IWA">Network Zones and IWA</a>.</p>
                                                        <p>To install the Okta IWA Web agent:</p>
                                                        <ol>
                                                            <li value="1">While signed in with the Okta admin count for the IWA agent, navigate to the <strong>Administrator</strong> console&#160;&gt;&#160;<strong>Security</strong>&#160;&gt;&#160;<strong>Delegated Authentication</strong>&#160;&gt;&#160;<strong>Active Directory</strong>.&#160;</li>
                                                            <li value="2">In the&#160;<strong>Desktop Single Sign-On</strong>&#160;section, click the&#160;<strong>Download the Desktop SSO SSL installer</strong>&#160;link.</li>
                                                            <li value="3">Double-click the installation file <b><font face="courier">OktaSsoIwa-x.x.x</font></b>.</li>
                                                            <li value="4">Click <b>Run</b>.</li>
                                                            <li value="5">Click <b>Next</b>.</li>
                                                            <li value="6">At the <i>Web Application Pool Identity</i> dialog box, select <b>Create or use the OktaService</b> account, then click <b>Next</b>.
				</li>
                                                            <li value="7">(Optional) When prompted, you can specify a proxy server for your IWA Web agent to connect through.</li>
                                                            <li value="8">On the&#160;<b>Register Okta Desktop Single Sign-On</b> screen, select an environment (<b>Production</b>, <b>Preview</b>, or <b>Custom</b>),&#160;enter your Okta customer subdomain name, and then click <b>Next</b>.</li>
                                                            <li value="9">On the <b>Okta Sign&#160;In</b>&#160;page, enter your Super admin username and password, and then click <b>Sign In</b>.</li>
                                                            <li value="10">To grant permission to access the Okta API, click <b>Allow Access</b>.
				</li>
                                                            <li value="11">At the message <b>Installation completed</b>, click <b>Finish</b>.</li>
                                                            <li value="12">Return to your browser and reload the <strong>Security</strong>&#160;&gt;&#160;<strong>Delegated Authentication</strong>&#160;&gt;&#160;<strong>Active Directory&#160;</strong>page.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />STEP 2: Configure browsers for SSO</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>How you configure your browsers will depend on the OS being used.</p>
                                                        <p><b>Note</b>:&#160;The Microsoft Edge browser is not supported.</p>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="ConfigWin"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Configure browsers for SSO on Windows</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <p><b><i>Recommendation:</i></b> Although IWA SSO may work if you choose not to configure your browser as described in this section, Okta <u>strongly recommends</u> that you review the relevant information for your browser type and then configure your browser as described if appropriate for your environment.</p>
                                                                <ol>
                                                                    <li value="1">Add your Okta tenant URL&#160;and the URL of the server that hosts your Desktop SSO IWA Web agent to your trusted zone:
								<p><strong>Note:</strong>&#160;The URL&#160;<i>hostname.companyname.com</i>&#160;is the fully qualified domain name of the server in question.&#160; For example,&#160;&#160;<font face="courier">my-iis7-host.corp.acme.com</font>. It is not sufficient for this URL to be listed as a Trusted Site in the Trusted Sites zone.</p><p>Most organizations set up a Group Policy to configure this setting in their users' Internet options.</p><ol style="list-style-type: lower-alpha;"><li value="1">On your Windows&#160;<strong>Control Panel,</strong>&#160;select&#160;<strong>Network and Internet</strong>&#160;&gt;&#160;<strong>Internet Options</strong>&#160;&gt;&#160;<strong>Security</strong>&#160;&gt;&#160;<strong>Local intranet</strong>&#160;&gt;&#160;<strong>Sites</strong>&#160;&gt;&#160;<strong>Advanced</strong>.</li><li value="2">In the&#160;<strong>Add this website to the zone</strong>&#160;field, enter:
							<p><i>http<font color="blue"><strong>s</strong></font>://hostname.companyname.com</i> or <i>http://hostname.companyname.com</i></p><p>and</p><p><i>https://_subdomain_.okta.com</i> or <i>https://_subdomain_.okta-emea.com</i> or <i>https://_subdomain_.oktapreview.com</i> as appropriate.</p></li><li value="3">Click&#160;<strong>Add</strong>.</li><li value="4">Click <b>OK</b> twice to close Internet Options.</li></ol></li>
                                                                    <li value="2">Configure your browser.
								<p>Setting up IWA is different for each browser. See the setup instructions below for&#160;your browser.</p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a id="WinIEWin" name="WinIEWin"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Windows Internet Explorer (Windows)</a></span><div class="MCDropDownBody dropDownBody"><ol style="list-style-type: lower-alpha;"><li value="1">In Internet Explorer&#160;select&#160;<strong>Tools &gt; Internet&#160;Options</strong>.</li><li value="2">Click the <b>Advanced</b> tab, scroll down to the <b>Security</b> settings, and select&#160;<strong>Enable Integrated Windows</strong>&#160;<strong>Authentication</strong>.</li><li value="3">Click&#160;<strong>OK</strong>.</li></ol><p><strong>Note:</strong> Make sure that Internet Explorer can save&#160;session cookies (<b>Internet Options &gt; Privacy</b> tab). If it cannot, neither SSO nor standard sign in can work.</p></div></div><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a id="FFWin" name="FFWin"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Mozilla Firefox&#160;(Windows)</a></span><div class="MCDropDownBody dropDownBody"><p>The following configuration permits Firefox to properly pass the Kerberos ticket with IWA, but Firefox still warns the user about the transition from an HTTPS page to an HTTP page. To resolve this issue, deploy IWA in HTTPS mode.</p><ol style="list-style-type: lower-alpha;"><li value="1">In the Firefox address bar enter:&#160;<font face="courier">about:config</font><p><strong>Note:</strong>&#160;In Firefox version 3.x and later, a warning message displays. Click the button to clear the message and proceed.</p></li><li value="2">When the configuration page loads, enter the following in the <strong>Search</strong> field:
											<pre><font face="courier">network.negotiate-auth.trusted-uris</font></pre></li><li value="3">In this field list the host name of the IWA server(s), separating multiple values with a comma &#160;<font face="courier">','</font>&#160; if two or more IWA instances are deployed.
							<p>Okta recommends that you enter the fully qualified domain name (FQDN)&#160;of your IWA host servers. If you do not, you will also need to toggle the following values to TRUE:</p><p><b>Note:</b>&#160;If you enter more than one host name, the order does not matter.</p><pre><font face="courier">network.automatic-ntlm-auth.allow-non-fqdn</font></pre><pre><font face="courier">network.negotiate-auth.allow-non-fqdn</font></pre></li><li value="4">Right click the <strong>Value</strong> column for each of the above and toggle the value to <strong>True</strong>.</li><li value="5">Click&#160;<strong>OK</strong>.</li></ol></div></div><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a id="ChromeWin" name="ChromeWin"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Google Chrome&#160;(Windows)</a></span><div class="MCDropDownBody dropDownBody"><p>IWA is automatically enabled on Chrome for Windows and the capability is whitelist-driven. If your browser is asked by a site to provide the Kerberos ticket, the browser only supplies the ticket to the site if the site is on a whitelist.</p><p>The whitelist is provided to the browser at startup using this command-line parameter:</p><pre><font face="courier">--auth-server-whitelist=</font></pre><p>For example:</p><pre><font face="courier">--auth-server-whitelist="*hostname.companyname.com"</font></pre><p>This tells Chrome that any URL ending in&#160;<em>hostname.companyname.com<strong>&#160;</strong></em>is in the permitted list.&#160; Without the&#160;<strong>'*'</strong>&#160;prefix, the URL has to match exactly.</p><p><strong>Note</strong>: The&#160;<em>hostname.companyname.com</em>&#160;value refers to the server hosting the Okta IWA Web agent.</p><p>If the<strong>&#160;'--auth-server-whitelist'</strong>&#160;command-line parameter is not specified at startup, the permitted list includes the servers in the Local Machine or Local Intranet security zone. This behavior is consistent with Internet Explorer.</p><p>To start Chrome on Windows and supply this command-line parameter:</p><ol style="list-style-type: lower-alpha;"><li value="1">Right click your desktop Chrome icon or select&#160;<strong>Start&#160;</strong>&gt;<strong>&#160;All Programs</strong>&#160;&gt;&#160;<strong>Google Chrome</strong>&#160;and right click&#160;<strong>Google Chrome</strong>, and then select&#160;<strong>Properties</strong>.</li><li value="2">In the&#160;<strong>Target</strong>&#160;field, move the cursor to the end of the existing value and add the text of your new command-line parameter.</li><li value="3">Click&#160;<strong>OK</strong>.</li></ol></div></div></li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="ConfigMac"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Configure browsers for SSO on Mac</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <p><b><i>Recommendation:</i></b> Although IWA SSO may work if you choose not to configure your browser as described in this section, Okta <u>strongly recommends</u> that you review the relevant information for your browser type and then configure your browser as described if appropriate for your environment.</p>
                                                                <p>Setting up IWA is different for each browser. See the appropriate section below for the setup instructions for your browser.</p>
                                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a id="MacSafari" name="MacSafari"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">OS/X Safari</a></span>
                                                                    <div class="MCDropDownBody dropDownBody">
                                                                        <p>IWA is enabled automatically in Safari on OS/X.&#160;Make sure that the OS/X host is a Windows domain member. For how to&#160;add your Macintosh OS/X host to a Windows domain, see the article&#160;<a href="https://support.apple.com/kb/PH11272?locale=en_US&amp;viewlocale=en_US" target="_blank">OS X Mountain Lion: Join your Mac to a network account server</a>.</p>
                                                                    </div>
                                                                </div>
                                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Mozilla Firefox&#160;(Mac)</a><a id="MacFF" name="MacFF"></a></span>
                                                                    <div class="MCDropDownBody dropDownBody">
                                                                        <p>The following configuration permits Firefox to properly pass the Kerberos ticket with IWA, but Firefox still warns the user about the transition from an HTTPS page to an HTTP page. To resolve this issue, deploy IWA in HTTPS mode.</p>
                                                                        <ol>
                                                                            <li value="1">In the Firefox address bar, enter&#160;<font face="courier">about:config</font><p><strong>Note:</strong>&#160;Firefox3.x and later displays a warning message requesting that you proceed with caution.</p></li>
                                                                            <li value="2">After the configuration page loads, enter the following in the&#160;<strong>Search</strong>&#160;field:&#160;
									<p><font face="courier">network.negotiate-auth.trusted-uris</font></p></li>
                                                                            <li value="3">In this field list the host name of the IWA server(s), separating multiple values with a comma &#160;<font face="courier">','</font>&#160; if two or more IWA instances are deployed.
									<p><strong>Note</strong>: The order does not matter if you enter more than one host name.</p><p>We recommend that you enter the fully qualified domain name (FQDN)&#160;of your IWA host servers. If you do not, you will also need to toggle the following values to TRUE:</p><pre><font face="courier">network.automatic-ntlm-auth.allow-non-fqdn</font></pre><pre><font face="courier">network.negotiate-auth.allow-non-fqdn</font></pre></li>
                                                                            <li value="4">Right click the <strong>Value</strong> column for each of the above and toggle the value to <strong>True</strong>.</li>
                                                                            <li value="5">Click&#160;<strong>OK</strong>.</li>
                                                                        </ol>
                                                                    </div>
                                                                </div>
                                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a id="MacChrome" name="MacChrome"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Google Chrome (Mac)</a></span>
                                                                    <div class="MCDropDownBody dropDownBody">
                                                                        <p>IWA capability is enabled automatically in Chrome on OS/X, and just like on Windows, the capability is governed by a whitelist. If a site asks your browser to provide the Kerberos ticket, the browser only provides the ticket if the site is on the whitelist.</p>
                                                                        <p>To manage the Chrome whitelist:</p>
                                                                        <ol>
                                                                            <li value="1">Launch the Terminal application.</li>
                                                                            <li value="2">Create a Kerberos ticket for the account:
                                <p style="font-family: 'Courier New';">kinit username@example.com</p><p>. . . replacing <span style="font-family: 'Courier New';">username@example.com</span> with your actual username and domain. Enter your password when prompted. </p></li>
                                                                            <li value="3">Configure the Chrome whitelist:
                                <p><span style="font-family: 'Courier New';">$ defaults write com.google.Chrome AuthServerWhitelist "*.example.com"</span></p><p><span style="font-family: 'Courier New';">$ defaults write com.google.Chrome AuthNegotiateDelegateWhitelist "*.example.com"</span></p><p>. . . replacing <span style="font-family: 'Courier New';">example.com</span> with your actual domain.</p></li>
                                                                        </ol>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />STEP 3:&#160;Activate the IWA Web agent<![CDATA[
						]]></a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>After you have configured all the settings appropriate to your environment and tested  Desktop SSO, do the following:</p>
                                                        <ol>
                                                            <li value="1">Return to <strong>Desktop Single Sign-On</strong> and select <strong>On</strong>.</li>
                                                            <li value="2">Click <b>Save</b>.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="ConfigureSSL"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP&#160;4:&#160;Configure SSL </a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>To ensure a secure connection between your&#160;Okta IWA Web agent and cloud apps, configure Secure Socket Layer (SSL). This is important for security, but it is also a hard requirement to enable some applications to successfully authenticate (in particular, Windows 10 Universal Applications such as OneNote, Mail and more). For more information, see <a href="https://support.okta.com/help/Documentation/Knowledge_Article/Cannot-sign-into-an-Office-2016-application-on-Windows-10">https://support.okta.com/help/Documentation/Knowledge_Article/Cannot-sign-into-an-Office-2016-application-on-Windows-10</a>.</p>
                                                        <p><b>Note:</b> If your IWA Web agent is installed on a server running Windows 2008 R2, you may need to&#160;<a href="#EnableTLS">Enable TLS 1.2 on Windows Server 2008 R2</a>.</p>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />STEP&#160;A:&#160;Acquire an SSL certificate</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <p> We strongly recommend acquiring an SSL certificate from a third-party certificate authority such as GoDaddy, Verisign or Digicert.  If you are unfamiliar with creating a certificate signing request and installing an SSL certificate, please refer to the documentation provided by your chosen Certificate Authority.  The following guides from DigiCert are useful references:</p>
                                                                <p><a href="https://knowledge.digicert.com/solution/SO21228.html">Certificate Signing Request (CSR) Generation Instructions</a>
                                                                </p>
                                                                <p><a href="https://knowledge.digicert.com/solution/SO14925.html">How to install an SSL Certificate in Microsoft IIS 7.0</a>
                                                                </p>
                                                                <p>Certificate creation notes and considerations</p>
                                                                <ul>
                                                                    <li value="1">We strongly recommend acquiring a certificate that has one or more <b>Subject Alternate Names</b> (SANs).  If the certificate does not contain a SAN, Firefox and Chrome users will encounter an error when their browser attempts to connect to the Desktop SSO web site.</li>
                                                                    <li value="2">The <b>IWA Redirect URL</b>(see <a href="#IWARedirectURL">step 4</a> of <b>Enable SSL</b>)&#160;must match what is entered in the CN or SAN.  For example:<ul><li value="1">If you plan to use the server’s host name as the IWA Redirect URL (e.g. https://IWAserver/IWA), the CN or SAN values would simply be “IWAServer”.</li><li value="2">If you plan to use the server’s FQDN as the IWA Redirect URL (e.g. https://IWAserver.mycompany.com/IWA), the CN or SAN values would be “IWAserver.mycompany.com”.</li><li value="3">If your certificate’s CN or SAN value is IWAserver, an attempt to connect to https://IWAserver.mycompany.com will fail because the URL will not match what is specified in the certificate..</li></ul></li>
                                                                    <li value="3">If you plan on installing Desktop SSO on multiple servers to provide fail over, we strongly recommend acquiring a wild card certificate (for example:&#160;*.mycompany.com) OR a certificate that contains SAN entries for each server’s URL (for example:&#160; https://IWA1.mycompany.com, https://IWA2.mycompany.com, etc).  This will allow you to use the same certificate on each server.</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />STEP&#160;B:&#160;Enable SSL</a></span>
                                                            <div class="MCDropDownBody dropDownBody">
                                                                <p>Once the certificate has been installed:</p>
                                                                <ol>
                                                                    <li value="1">Log in to your Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>The Okta container that represents a real-world organization.</span></a> and go to <b>Security &gt; Delegated Authentication &gt; Active Directory</b>.</li>
                                                                    <li value="2">Scroll down to&#160;<b>Desktop Single Sign On</b>&#160;and click <b>Edit</b>.</li>
                                                                    <li value="3">In the <strong>Integrated Web Authentication (IWA) Web Applications</strong> section, click the down arrow to expand the section.
							<p><img alt="User-added image" src="../../Resources/Images/Desktop_SSO_12_500x28.png" style="width: 500;height: 28;" /></p></li>
                                                                    <li value="4"><a name="IWARedirectURL"></a>Change the <b>IWA redirect URL</b> from <i>http</i> to <i>http<font color="blue"><strong>s</strong></font></i>.
<br />The IWA Redirect URL must use the same naming convention used in the Common Name field. That is, if the FQDN or host name was used in the Common Name field, it must also be used in the IWA Redirect URL.							<p><img alt="User-added image" src="../../Resources/Images/Desktop_SSO_13_500x237.png" style="width: 500;height: 237;" /></p></li>
                                                                    <li value="5">Click <b>Save</b>.</li>
                                                                    <li value="6">Test the configuration as described in&#160;<a href="#TestingIWA">Testing Your IWA Web agent</a>.</li>
                                                                </ol>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="TestingIWA"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP&#160;5:&#160;Test your IWA Web agent</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>After you download and install your IWA Web agent, test it to make sure the IWA server is working from a client machine. Do the following:</p>
                                                        <ol>
                                                            <li value="1">From your <strong>Administrator Dashboard</strong>, go to&#160;<strong>Security</strong>&#160;&gt;&#160;<strong>Delegated Authentication</strong>&#160;&gt;&#160;<strong>Active Directory</strong>, scroll down to<strong>&#160;Desktop Single Sign-On</strong>.</li>
                                                            <li value="2">Click <b>Edit</b>.</li>
                                                            <li value="3">In the <strong>Integrated Windows Authentication (IWA) Web Applications</strong> section, click the down arrow to expand the section.
					<p><img alt="User-added image" src="../../Resources/Images/Desktop_SSO_4.png" /></p></li>
                                                            <li value="4">Select and copy the IWA redirect URL.</li>
                                                            <li value="5">Paste the IWA redirect URL in a browser that has been configured for SSO,&#160;and then add&#160;<strong>authenticated.aspx</strong> to the end of the URL. For example, if your IWA redirect URL is http://WIN-GTVLLAG671R/IWA/ enter&#160;<strong>http://WIN-</strong>GTVLLAG671R<strong>/IWA/authenticated.aspx</strong>&#160;in your browser.<p><img src="../../Resources/Images/Desktop_SSO_5_482x452.png" style="width: 482;height: 452;" /></p></li>
                                                            <li value="6">Press <b>Enter</b> on your keyboard.
					<p>If you configured IWA correctly, three rows of results are returned similar to the following:</p><p><img alt="2013-02-13_11-47-45.jpg" src="../../Resources/Images/Desktop_SSO_6_500x143.jpeg" style="width: 500;height: 143;" /></p><p>If the Okta Sign-In page displays instead of the success message, the test failed.</p></li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="TestAndActivate"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">STEP 6:&#160;Test Desktop SSO
				</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>After you have installed and configured your IWA Web agent and set up your browser, do the following:</p>
                                                        <ol>
                                                            <li value="1">From your <strong>Administrator Dashboard</strong>, go to&#160;<strong>Security</strong>&#160;&gt;&#160;<strong>Delegated Authentication</strong>&#160;&gt;&#160;<strong>Active Directory</strong>, scroll down to<strong>&#160;Desktop Single Sign-On</strong>.</li>
                                                            <li value="2">Click <b>Edit</b>.</li>
                                                            <li value="3">Select <b>Test</b>, and then click the provided test URL.
					
					
						<p><img alt="User-added image" src="../../Resources/Images/Desktop_SSO_6b_500x70.png" style="width: 500;height: 70;" /></p>
					If you are authenticated successfully, continue to the following step. If you are not authenticated, check any browser configuration changes that you may have made in either&#160;<a href="#ConfigWin">Configuring Desktop SSO with IWA for Windows</a>&#160;or&#160;<a href="#ConfigMac">Configuring Desktop SSO with IWA for Mac.</a></li>
                                                            <li value="4">If you have deployed a Mobile Device Management (MDM) solution to enable IWA for your mobile and tablet devices&#160;and you want&#160;your users to be able to authenticate their mobile devices via IWA, select&#160;<b><a href="#Enabling">Redirect mobile and tablet devices</a></b>.
					<p><b>Important:</b> Do <u>not</u> select this option if you have <u>not</u> deployed a Mobile Device Management (MDM) solution to enable IWA for your mobile and tablet devices.</p></li>
                                                            <li value="5">Click <strong>Save</strong>.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />STEP 7:&#160;View the status of your IWA&#160;Web agents</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ol>
                                                            <li value="1">Go to <b>Security &gt; Delegated Authentication &gt; Active Directory</b>.</li>
                                                            <li value="2">In the Integrated Web Authentication (IWA) Web Applications section, select the desired IWA Web agent.</li>
                                                        </ol>
                                                        <p>The section expands, displaying the status of the selected web agent.</p>
                                                        <p>You can also check the system logs for information related to your IWA Web agents. For example, if your primary IWA Web agent goes offline, your system logs report when it happened and the promotion of the backup IWA Web agent. To view the report, go to <a href="../Reports/Reports.htm">Reports</a>, and then click Active Directory Agent under System Logs.</p>
                                                    </div>
                                                </div>
                                                <hr width="100%" size="0" align="center" />
                                                <h2>OPTIONAL&#160;TASKS</h2>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />About Desktop SSO&#160;and JIT</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>As you configure Desktop SSO (on prem or agentless) in your environment, be aware of how the Desktop SSO flow works when importing users and how Just in Time (JIT) authentication will occur. </p>
                                                        <ul>
                                                            <li value="1">If using on-prem DSSO IWA always sends Okta the Universal Principal Name (<b>UPN</b>). This is the only data Okta uses to look up a user. Okta does not perform authentication for users because Kerberos validation is already done on the IIS side.</li>
                                                            <li value="2">
                                                                <p>If using Agentless Desktop SSO, your web browser sends the Kerberos ticket to Okta, and relies on the AD&#160;agent to look up the UPN.  The Kerberos validation is now done in the cloud in Okta.</p>
                                                            </li>
                                                        </ul>
                                                        <p>When a user tries to sign in using Desktop SSO:</p>
                                                        <ul>
                                                            <li value="1"><b>If the user is already imported and active in Okta</b>:&#160;Okta uses the UPN&#160;to look up the user. If&#160;Okta finds the user, the profile reloads from AD and the user signs in.</li>
                                                            <li value="2"><b>If the user is imported but not yet active in Okta</b>:&#160;Okta uses the UPN&#160;to look up the user. If Okta finds the user, the profile loads from AD, is activated and the user signs in.</li>
                                                            <li value="3"><b>If the user has not been imported into Okta and JIT is on</b>:&#160;Okta can only validate the user by the UPN. So the Okta user name format must be the UPN in order for the user to be successfully imported with JIT turned on. If the user name format is something other than the UPN, for example the email address or SamAccountName, the search will fail to locate the user. </li>
                                                            <li value="4"><b>If the user has not been imported into Okta and JIT&#160;is off</b>:&#160;User sign in will fail.</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Using multiple IWA Web agents</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>You can install multiple IWA Web agents on separate servers for high availability purposes. Installing multiple web agents in close geographical proximity to your users may improve performance when combined with regional load balancing technologies. One example is having DNS netmask ordering enabled.</p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Updating the IWA&#160;SSO&#160;agent</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>Updated agent releases can be found under <b>Settings &gt;&#160;Downloads</b>. </p>
                                                        <p>You do not need to uninstall existing agents prior to upgrading to a new agent. The installer keeps copies of all previous configurations, renaming existing Web.config file with a time stamp suffix (for example, web.config.636531690091372202). </p>
                                                        <p>After updating the agent you must port any previous custom edits to the new config file.</p>
                                                        <p>During the upgrade process the agent will not be able to handle requests. Users will see a 404 or 500 error page when IWA agent is being upgraded.In environments with multiple IWA servers, we recommend you manually fail over to a secondary IWA server while the primary is undergoing an upgrade.</p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Enabling"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Enable SSO for managed mobile and tablet devices</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p><b>Important:</b> Do <u>not</u> select this option if you have <u>not</u> deployed a Mobile Device Management (MDM) solution to enable IWA for your mobile and tablet devices.</p>
                                                        <p>If you have deployed a Mobile Device Management solution (such as Okta Mobility Management) and you want managed device users to be able to SSO into their Okta-hosted apps from their devices, perform these steps:</p>
                                                        <ol>
                                                            <li value="1">From your <b>Administrator Dashboard</b>, go to <b>Security &gt; Delegated Authentication &gt; Active Directory</b>, and scroll down to <b>Desktop Single Sign-On</b>.</li>
                                                            <li value="2">Click <b>Edit</b>.</li>
                                                            <li value="3">Select <b>Redirect mobile and tablet devices</b>.</li>
                                                            <li value="4">Click <b>Save</b>.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="CustomSignOutPage"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Customize the Sign-out page</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>With Desktop SSO (DSSO) enabled, users are redirected to the Sign In page when they sign out of their account. When this occurs, DSSO recognizes that a user has landed on the Sign In page and the user is automatically signed back in to Okta. To avoid this, you can configure DSSO to send the user to a page that bypasses DSSO. Perform these steps:</p>
                                                        <ol>
                                                            <li value="1">From your <b>Administrator Dashboard</b>, go to <b>Settings &gt; Customization&gt; Sign-Out Page.</b></li>
                                                            <li value="2">Click <b>Edit.</b></li>
                                                            <li value="3">Select <b>Use a custom sign out page</b>.</li>
                                                            <li value="4">Enter the URL of your Okta tenant, followed by /login/default. For example: https://<i>MyCompany</i>.okta.com/login/default</li>
                                                        </ol>
                                                        <p>The default log on address bypasses DSSO and will present the standard log on page to the user.</p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Configure fail over settings</a></span>
                                                    <div class="MCDropDownBody dropDownBody"><a name="IWA_failover"></a>
                                                        <p>Fail over settings determine what users experience if your primary IWA&#160;agent goes offline. You can check your <a href="../Reports/Reports_SysLog.htm">System Log</a> to see when a fail over occurred and the backup IWA Web agent was promoted.</p>
                                                        <ol>
                                                            <li value="1">Go to <b>Security &gt; Delegated Authentication &gt; Active Directory</b>.</li>
                                                            <li value="2">Click <b>Edit</b> in the Desktop Single Sign-On section.</li>
                                                            <li value="3">Under <b>Failover</b>, select the fail over setting appropriate for your environment.
										
								<ul><li value="1"><b>Manual failover</b> (default)										
									<p>When selected, if the primary IWA&#160;agent goes offline, users are redirected back to the primary IWA agent when it is brought back online. You would typically select this option if you have not configured a backup IWA Web agent or you do not want to redirect users to a <a href="#GlobalRedirectURL">global redirect URL</a>.</p></li><li value="2"><b>Automatic failover</b><p>When selected, Okta automatically switches to a healthy IWA Web agent if your primary IWA Web agent goes offline. Your AD Agent checks the health of each IWA Web agent that you have set up.</p></li><li value="3"><a name="GlobalRedirectURL"></a><b>Global redirect URL</b><![CDATA[
							]]><p>When selected, users are redirected to a URL that you specify. This is typically used to direct to a load balancer. </p></li></ul></li>
                                                            <li value="4">Click <b>Save</b>.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="EnableTLS"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">Enabling TLS 1.2 on Windows Server 2008 R2</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>Your IWA Web agent may go offline and your AD Agent may report an <span class="MCExpanding MCExpanding_Open expanding"><a href="javascript:void(0);" class="MCExpandingHead MCExpandingHotSpot expandingHead MCExpandingHotSpot_ MCHotSpotImage">error<img class="MCExpanding_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><span class="MCExpandingBody expandingBody" style="font-family: 'Courier New';">(The request was aborted: Could not create SSL/TLS secure channel)</span></span> if your IWA Web agent is:</p>
                                                        <ul>
                                                            <li value="1">Installed on a server running <b>Windows Server 2008 R2 SP1</b>, <i>and</i></li>
                                                            <li value="2">Configured to use HTTPS, <i>and</i></li>
                                                            <li value="3">Configured for Automatic Fail over.</li>
                                                        </ul>
                                                        <p>If your IWA Web agent is installed on a server running Windows Server 2008 R2 SP1 and you want to use SSO IWA over secured connections (HTTPS), you must first enable the <b>TLS 1.2</b> protocol for incoming (e.g. <b>IIS</b>) connections. This is necessary because the AD agent, which tries to use TLS 1.2 whenever possible, may lose connectivity with IWA Web agents installed on Windows Server 2008 R2 SP1 servers that are not enabled for TLS 1.2 incoming connections. Windows Server 2008 R2 SP1 supports TLS 1.2 protocol <i>outgoing</i> connections by default. However, support for <i>incoming</i> connections is disabled by default. Okta strongly recommends enabling this setting. </p>
                                                        <p>To enable TLS 1.2 incoming connections, edit the registry as follows:</p>
                                                        <ol>
                                                            <li value="1">On the same Windows 2008 R2 server that hosts your IWA&#160;Web agent, add the following values to the  registry:</li>
                                                            <div style="padding:10px;border:1px solid black;min-height:30px;min-width:100px;overflow-y:hidden;overflow-x:scroll;">
                                                                <p style="width:110%;"><pre>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Client\DisabledByDefault : 0 (DWORD)</pre>
                                                                </p>
                                                                <p style="width:110%;"><pre>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Client\Enabled : 1 (DWORD)</pre>
                                                                </p>
                                                                <p style="width:110%;"><pre>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Server\DisabledByDefault : 0 (DWORD)</pre>
                                                                </p>
                                                                <p style="width:110%;"><pre>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols\TLS 1.2\Server\Enabled : 1 (DWORD)</pre>
                                                                </p>
                                                            </div>
                                                            <li value="2">Restart the server.</li>
                                                        </ol>
                                                        <p>More information is available online <a href="https://technet.microsoft.com/en-us/library/dn786418(v=ws.11).aspx" target="_blank">here</a> and <a href="http://tecadmin.net/enable-tls-on-windows-server-and-iis/#" target="_blank">here</a>.</p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Configuring a custom error page in case of failed IWA sign in</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>You can <a href="../Security/Identity_Providers.htm#CustomErrorPage_IdP">configure a custom error page</a> to which <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">end users<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>In Okta literature, we generally refer to "end users" as the people who have their own Okta home page (My Applications), using chiclets to authenticate into all of their apps. End users do not have any administrative control. When we refer to "users" we are generally referring to the individual(s) who have administrative control.</span></a> are redirected if Okta fails to process their IWA&#160;token. This option is useful if you embed Okta into your solution and you want to control end-to-end branding to enhance the end user experience. The custom error page you specify applies to all IWA users in your organization. </p>
                                                        <p><b>Note:</b> The custom error page setting does not apply to sign in failures caused by an unknown user or a JIT failure. In these cases, users are redirected to their Okta sign-in page.</p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Configure UPN transformation (in multiple-domain environments)</a><a name="ConfigureUPNTransform"></a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p><b>Note: </b>This applies only to&#160;enterprises&#160;with more than one domain, and requires <b>IWA Web agent Version 1.8.1</b>&#160;or later.</p>
                                                        <h3>Use case<a name="UseCase"></a></h3>
                                                        <p>In Windows Active Directory, the&#160;Universal Principal Name (<b>UPN</b>) is the name of a system user presented in an email format.&#160;You need to configure UPN transformation on your IWA Web agents&#160;if the following applies to your enterprise:</p>
                                                        <ol>
                                                            <li value="1">Your company has more than one domain.</li>
                                                        </ol>
                                                        <p style="margin-left: 45px;"><strong>. . . and</strong>
                                                        </p>
                                                        <ol class="bullets" start="2">
                                                            <li value="2">The domain that your users specify when they log in to work is different from the domain that your Okta org is built upon.<br /><br />			For example:</li>
                                                        </ol>
                                                        <p style="margin-left: 50px;">— Your users log in to work using <font face="courier">username@<font color="blue">abc</font>.com.</font></p>
                                                        <p style="margin-left: 45px;"><strong>. . . and</strong>
                                                        </p>
                                                        <p style="margin-left: 50px;">— Your Okta org contains user names such as <font face="courier">username@<font color="red">xyz</font>.com.</font></p>
                                                        <p>In this case, the authenticated user names that your company sends to Okta will not match the user names in your Okta org. Instead of being signed in to their Okta dashboards automatically, your users will be prompted to enter their credentials. To fix this, add a rule in the web.config file&#160;to transform the authenticated user names that your company sends to&#160;your Okta org.</p>
                                                        <h3>Procedure<a name="Procedure"></a></h3>
                                                        <ol>
                                                            <li value="1">Navigate to&#160;<b>C:\inetpub\wwwroot\IWA</b>&#160;and open the file&#160;<b style="">web.config</b>.</li>
                                                        </ol>
                                                        <ol class="bullets" start="2">
                                                            <li value="2">Insert the following rule inside the <b><font face="courier">&lt;upnTransformation&gt;</font></b> element (a child of&#160;the <b><font face="courier">&lt;oktaSSOConfigGroup&gt;</font></b> element). The rule will convert all user names from the domain<br /><font face="courier"><strong><font color="blue">abc</font>.com</strong></font> to the domain <font face="courier"><strong><font color="red">xyz</font>.com</strong></font>:</li>
                                                        </ol>
                                                        <p style="margin-left: 25px;"><b style=""><font face="courier" size="3">&lt;upnTransformation&gt; &lt;rule match="(.+)@<font color="blue">abc</font>\.com" replace="${1}@<font color="red">xyz</font>.com" /&gt; &lt;/upnTransformation&gt; </font></b>
                                                        </p>
                                                        <p>The same logic can be applied to other common use cases such as transforming <span style="font-family: 'Courier New'; font-weight: bold;">company.local</span> to <span style="font-family: 'Courier New'; font-weight: bold;">company.com</span>, or <span style="font-family: 'Courier New'; font-weight: bold;">company.com</span> to <span style="font-family: 'Courier New'; font-weight: bold;">company.okta.com</span></p>
                                                        <h3>How the UPN Transformation code works<a name="HowUPN"></a></h3>
                                                        <p>The match&#160;attribute specifies a regular expression that the IWA Web agent uses to check UPNs. If a UPN matches a UPN transformation rule, the IWA Web agent uses the expression specified by the replace&#160;attribute to compute a transformed UPN. For more information, see:</p>
                                                        <ul>
                                                            <li value="1"><b>match</b> syntax: <a href="https://msdn.microsoft.com/en-us/library/az24scfc(v=vs.110).aspx" target="_blank">https://msdn.microsoft.com/en-us/library/az24scfc(v=vs.110).aspx</a></li>
                                                            <li value="2"><b>replace</b>&#160;syntax: <a href="https://msdn.microsoft.com/en-us/library/ewy2t5e0(v=vs.110).aspx" target="_blank">https://msdn.microsoft.com/en-us/library/ewy2t5e0(v=vs.110).aspx</a></li>
                                                        </ul>
                                                        <p>The IWA Web agent checks all rules consecutively in the order that they are specified in the configuration file&#160;and applies the first rule that matches&#160;the UPN. If no rule matches the UPN, the IWA Web agent sends the original UPN to Okta.</p>
                                                        <p>Administrators can use the <b>/IWA/authenticated.aspx</b> page to verify and debug the transformation rules.</p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Change the IWA detection timeout period</a><a name="AdjustTimeout"></a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>You can configure how long the agent tries to automatically sign&#160;users in to apps before redirecting them to the Okta Sign-In page. This is useful for extending the <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">app<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of application. Essentially, it is a web-based site used to perform any number of specific tasks, and requires authentication from end users by signing in.</span></a> authentication timeout period&#160;in environments with slower networks.</p>
                                                        <ol>
                                                            <li value="1">On the same server that hosts the IWA Web agent,&#160;navigate to&#160;<b>C:\inetpub\wwwroot\IWA</b>&#160;and open the file&#160;<b style="">web.config</b>.</li>
                                                            <li value="2">Search for the element <b><font face="courier">&lt;iwaDetection timeout="1000" /&gt;</font></b>&#160;and modify the timeout&#160;attribute (given in milliseconds).
							<p>Increase the attribute value if you want to give the agent&#160;more time to detect IWA SSO capability before redirecting&#160;the user back to the Okta Sign-In page.</p></li>
                                                            <li value="3">Save and close the <b>web.config</b> file.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Skip IWA authentication for specified clients</a><a name="DetectIneligibleClients"></a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p><b>Note:</b> For more about this functionality, as well as other ways to improve security and usability for your end-users, see the blog <a href="https://support.okta.com/help/blogdetail?id=a672A000000XZyEQAW">Tips and Tricks with Okta's Desktop SSO (DSSO) Agent</a>.</p>
                                                        <p>By default, the IWA Web agent attempts IWA SSO for&#160;all&#160;clients&#160;that try&#160;to access Okta-protected apps. You can change the default by&#160;creating an IIS rewrite rule that automatically redirects specified clients&#160;to the Okta Sign-In page without attempting IWA SSO. Your rule uses pattern matching to&#160;detect non-IWA SSO-capable clients&#160;and then performs the configured action.</p>
                                                        <p><b>Note:</b> The following procedure requires Okta IWA Web agent version <b>1.9.1</b>&#160;or higher.</p>
                                                        <ol>
                                                            <li value="1">Download the <b>Microsoft URL&#160;Rewrite 2.0 module</b>&#160;from&#160;<a href="http://www.iis.net/downloads/microsoft/url-rewrite" target="_blank">http://www.iis.net/downloads/microsoft/url-rewrite</a>.</li>
                                                            <li value="2">Install the rewrite&#160;module on the same server that hosts your IWA Web agent.</li>
                                                            <li value="3">Open <b>Internet Information Services (IIS) Manager</b>&#160;on the same server that hosts your  IWA Web agent.</li>
                                                            <li value="4">Under <b>Connections</b> (on the left side), expand&#160;<b>Sites &gt; Default Web Site</b>&#160;and select&#160;<b>IWA</b>.
							<p><img alt="User-added image" src="../../Resources/Images/Desktop_SSO_14.png" /></p></li>
                                                            <li value="5">Double-click the <b>URL Rewrite</b> icon in the center pane.</li>
                                                            <li value="6">See <a href="http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module" target="_blank">Microsoft documentation</a>&#160;for detailed instructions on creating rules for the URL Rewrite Module. You can also refer to the example URL rewrite rules that are provided in the <b>web.config</b> file (<b>C:\inetpub\wwwroot\IWA\web.config</b>).
							<p>You can configure these rules:</p></li>
                                                        </ol>
                                                        <ul style="margin-left: 45px;">
                                                            <li value="1">To attempt&#160;IWA authentication for specified&#160;clients, configure this action:</li>
                                                        </ul>
                                                        <p style="margin-left: 100px"><b><font face="courier">action type="Rewrite" url="iwa.aspx?action=<font color="blue">iwa</font>"</font></b>
                                                        </p>
                                                        <ul style="margin-left: 45px;">
                                                            <li value="1">To skip&#160;IWA authentication for specified clients and redirect users to the Okta Sign-In page, configure this action:</li>
                                                        </ul>
                                                        <p style="margin-left: 100px;"><b><font face="courier">action type="Rewrite" url="iwa.aspx?action=<font color="red">okta</font>"</font></b>
                                                        </p>
                                                        <ol class="bullets" start="7">
                                                            <li value="7">Under <b>Actions</b> (on the right side), click <b>Apply</b>.</li>
                                                            <li value="8">Restart <b>Internet Information Services (IIS) Manager</b>.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="IWA_VM"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_">If your IWA Web agent is installed on a virtual machine with other web apps.</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <ol>
                                                            <li value="1">Install and configure the IWA Web agent as described in <a href="#PROCEDURE" class="MCXref xref">PROCEDURE</a>.</li>
                                                            <li value="2">On the same server that hosts your Okta IWA Web agent, open the <b>Internet Information Services (IIS) Manager</b>.</li>
                                                            <li value="3">Right click on&#160;<b>Sites</b> and select&#160;<b>Add Web Site</b>.</li>
                                                            <li value="4">Enter a name for the site, and then click <b>Select</b>.</li>
                                                            <li value="5">In <b>Application pool</b>, make sure <b>DefaultAppPool</b> is selected, then click <b>OK</b>. This puts the new site into its own application pool that defaults to <i>Integrated</i> mode using <b>.NET 2.0</b> for the site.</li>
                                                            <li value="6">In the <b>Physical path</b> field, make sure the site points to the location of the main IIS site files:&#160;<b>?:\inetpub\wwroot</b>.</li>
                                                            <li value="7">Click <b>OK</b>.
							<p>The site is created and the directories display under it, including the IWA directory.</p></li>
                                                            <li value="8">Expand the site that you created at the beginning of this procedure.</li>
                                                            <li value="9">Right click <b>IWA</b> and select <b>convert to web application</b>. </li>
                                                            <li value="10">Name the web app IWA.</li>
                                                            <li value="11">In <b>Application pool</b>, select <b>OktaIWA application pool</b>.
							<p><b>Note:</b>&#160;Do not assign this application pool to any other web app. Use it only for Okta.</p><p>The IWA icon changes from a folder to a web app icon to indicate that the conversion was successful.</p></li>
                                                        </ol>
                                                        <ol data-mc-continue="true">
                                                            <li value="12">In the <b>Connections</b> pane, click on the site you created (Tip: click the globe icon).</li>
                                                            <p>
                                                                <img src="../../Resources/Images/IWA_IIS_Manager.png" />
                                                            </p>
                                                            <li value="13">In the center pane, double click <b>Authentication</b>. Check that only <b>Anonymous Authentication</b>&#160;is enabled.</li>
                                                            <li value="14">In the <b>Connections</b> pane, click&#160;<b>IWA</b> under the site you created, and then double click <b>Authentication</b>. The status of the items should match the following:
							<p>Anonymous – Enabled</p><p>ASP .NET Impersonation – Enabled</p><p>Forms Authentication – Disabled</p><p>Windows Authentication – Enabled</p></li>
                                                        </ol>
                                                        <ol data-mc-continue="true">
                                                            <li value="15">Restart IIS.</li>
                                                        </ol>
                                                    </div>
                                                </div>
                                                <hr width="100%" size="0" align="center" />
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Related Topics</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p><span style="color: #0000ff; text-decoration: underline;"><a href="../Security/Security_Network.htm#IWA">Network Zones and IWA</a></span>
                                                        </p>
                                                        <p><a href="Configuring_Agentless_SSO.htm">Configure Agentless Desktop SSO</a>
                                                        </p>
                                                        <p><a href="../Security/Identity_Providers.htm#CustomErrorPage_IdP">Configure a custom error page</a>
                                                        </p>
                                                        <p><a href="ad-agent-install.htm" class="MCXref xref">Install and configure the Okta Active Directory (AD) agent</a>
                                                        </p>
                                                    </div>
                                                </div>
                                                <hr width="100%" size="0" align="center" />
                                                <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Troubleshooting</a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <h4>If you are experiencing issues with Desktop SSO/IWA not working, check the following:</h4>
                                                        <ul>
                                                            <li value="1">Ensure the host name of the server is resolvable from within the client network.</li>
                                                            <li value="2">IWA must be turned on in both the IIS authentication configuration and in the client.</li>
                                                        </ul>
                                                        <p><b>Note</b>: The latest builds of Office 2016 and Windows 10 are incorporating their Web Account Manager (WAM) for sign-in workflows (see <a href="https://support.microsoft.com/en-my/help/4025962/you-can-t-sign-in-after-you-update-to-office-2016-build-16-0-7967-or-a">this</a> Microsoft article). WAM requires https  — it blocks non-https traffic during auth workflows. Refer to <a href="#ConfigureSSL">Configure SSL</a> for details about how to configure IWA for this use case. </p>
                                                        <p><b>Tip</b>:&#160;If you have installed the Okta IWA SSO agent and used the same Okta Service account that was used to install the <span class="okta-feature-namesAD agent short">Okta AD agent</span>, then you must also change the Okta Service account password in the IIS <b>Server Manager dashboard &gt;&#160;Tools &gt;&#160;Internet Information Services (IIS)&#160;Manager</b> when you change the OktaService account password in AD. </p>
                                                        <p>The OktaIWA&#160;service is installed under the Application Pools menu. Under <b>Advanced Settings</b> you can change the Okta Service password to match the new password. Due to caching, the IWA service may not stop immediately. When the cache does reset, IWA will stop working if the OktaService password has not been updated here to match the password you reset in the Active Directory Users and Computers tool and the Services console on the server the agent is installed upon.</p>
                                                        <h4>IWA not functioning after a server restart or Group Policy changes</h4>
                                                        <p>The Okta IWA service account requires <b>Logon as a Batch Job</b> and <b>Log on as a Service</b> permissions. Ensure the service account has these permissions.</p>
                                                    </div>
                                                </div>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                        <!-- *** Col3: Right menu Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="tK0kwOMYUE2Bjbp5eLEq7Q">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="tK0kwOMYUE2Bjbp5eLEq7Q:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_right_menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/okta_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="False" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ***************************** Footer rows ********************************* -->
                                    <div class="footer-temp">
                                        <div class="is-not-in-mobile">
                                            <p> </p>
                                        </div>
                                        <div>
                                            <p class="copyright">©  <span class="okta-variablesYear">2019</span> <span class="okta-variablesCompanyName">Okta, Inc</span> All Rights Reserved. Various trademarks held by their respective owners.</p>
                                        </div>
                                    </div>
                                    <!-- ***************************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Ours -->
                                    <script type="text/javascript" src="../../Resources/Scripts/back-to-top.js">
                                    </script>
                                    <script type="text/javascript" src="../../Resources/Scripts/get-feedback.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>