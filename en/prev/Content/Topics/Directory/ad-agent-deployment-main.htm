<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_okta_html5_topnav" data-mc-search-type="Stem" data-mc-help-system-file-name="okta_help.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-searchable="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Documentation|Product documentation|Directory Integrations|[%=System.LinkedHeader%]">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="typeofcontent" content="documentation" />
        <meta name="audience" content="admin" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="description" content="This topic helps you plan and prepare for an AD and Okta integration." /><title>Plan your Active Directory integration | Okta</title>
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, height=device-height" />
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" type="image/x-icon" />
        <!-- Google Tag Manager -->
        <script>
			/* <![CDATA[ */
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-TJ45R6');
			/* ]]> */
		</script>
        <!-- End Google Tag Manager -->
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/okta-main.css" rel="stylesheet" />
        <link href="https://static.cloud.coveo.com/searchui/v2.5395/css/CoveoFullSearchNewDesign.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse-all-non-hover-sm.png') no-repeat center center, linear-gradient(#fff, #fff);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://support.okta.com/help/s/" alt="Okta"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <!-- Coveo config parameters -->
                                    <div id="coveo_org_id" style="Display:None"><span class="okta-coveo-configOrgId">oktaproduction9ounvcxa</span>
                                    </div>
                                    <div id="coveo_rest_uri" style="Display:None"><span class="okta-coveo-configPlatformRestUri">https://platform.cloud.coveo.com/rest/search</span>
                                    </div>
                                    <div id="coveo_search_url" style="Display:None"><span class="okta-coveo-configSearchPageUrl">https://support.okta.com/help/s/global-search/%40uri</span>
                                    </div>
                                    <div id="coveo_token_url" style="Display:None"><span class="okta-coveo-configSearchTokenServiceUrl">https://support.okta.com/help/services/apexrest/PublicSearchToken?site=help</span>
                                    </div>
                                    <!-- End Coveo config parameters -->
                                    <!-- ************************* Coveo Search bar ************************************* -->
                                    <div id="OLC_Coveo_Headline" class="coveo-headline-wrapper">
                                        <div class="slds-p-vertical_small">
                                            <!--Search Bar-->
                                            <div class="slds-grid slds-grid_align-center">
                                                <div id="customSelect" class="CoveoCustomSelect slds-float_right">
                                                </div>
                                                <div id="standaloneSearchbox">
                                                    <div class="CoveoAnalytics" data-search-hub="OktaCommunityFullSearch">
                                                    </div>
                                                    <div class="CoveoTab" data-id="Help" data-caption="Help" style="display:none">
                                                    </div>
                                                    <div class="CoveoSearchbox" data-enable-omnibox="true" data-enable-query-suggest-addon="true">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- **********************  Main content row  ********************** -->
                                    <div class="okta-topics">
                                        <!-- *** Col1: Left Nav Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="3SAg23IWX0ur9VLduC6dqg">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="3SAg23IWX0ur9VLduC6dqg:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_left_menu mc-component" data-mc-linked-toc="Data/Tocs/left_nav_TOC.js" data-mc-side-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- *** Col2: Body Col *** -->
                                        <div>
                                            <div class="is-not-in-mobile">
                                                <!-- Breadcrumbs -->
                                                <div class="nocontent">
                                                    <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider="  &gt;  " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">  </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="toolbar-main">
                                                <!-- Expand/Collapse All for drop-downs -->
                                                <div class="buttons popup-container clearfix topicToolbarProxy _Skins_okta_toolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                                    <div class="button-group-container-left">
                                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                            <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="body-main">
                                                <!-- Main content body -->
                                                <h1><a name="Integrat"></a><a name="Install"></a>Plan your Active Directory integration</h1>
                                                <div>
                                                    <p>
		You use the <span class="okta-feature-namesAD agent">Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Active Directory<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Active Directory (AD) is a directory service that Microsoft developed for the Windows domain networks. It is included in most Windows Server operating systems as a set of processes and services. Initially, Active Directory was only in charge of centralized domain management.</span></a> (AD) <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">agent<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A software agent is a lightweight program that runs as a service outside of Okta. It is typically installed behind a firewall and allows Okta to tunnel communication between an on-premises service and Okta's cloud service. Okta employs several agent types: Active Directory, LDAP, RADIUS, RSA, Active Directory Password Sync, and IWA. For example, users can install multiple Active Directory agents to ensure that the integration is robust and highly available across geographic locations.</span></a></span> to integrate <span class="okta-variablesProductName">Okta</span> with your on-premises AD instance. AD integration provides <a href="javascript:void(0);" class="MCTextPopup popup popupHead">delegated authentication support<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody"><span class="MCTextPopupArrow"></span>enabling users to sign in to Okta with their AD&#160;credentials</span></a>, <a href="javascript:void(0);" class="MCTextPopup popup popupHead">user provisioning<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody"><span class="MCTextPopupArrow"></span>assigning users to apps</span></a>, and <a href="javascript:void(0);" class="MCTextPopup popup popupHead">de-provisioning<span class="MCTextPopupBody MCTextPopupBody_Closed needs-pie popupBody"><span class="MCTextPopupArrow"></span>removing users from apps</span></a>. To enable AD integration, you  install the <span class="okta-feature-namesAD agent short">Okta AD agent</span>, and then import your existing AD users and <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">groups<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Groups allow you to organize your end users and the apps they can access. Assigning apps to large sets of end users is made easier with groups.</span></a> into <span class="okta-variablesProductName">Okta</span>. </p>
                                                    <p>AD integrations in a newly-created organization automatically have the following default settings enabled:</p>
                                                    <ul>
                                                        <li value="1"><b>Delegated authentication</b>  — Allows&#160;your <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">end users<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>End users are people in your org without administrative control. They can authenticate into apps from the icons on their My Applications home page, but they are provisioned, deprovisioned, assigned, and managed by admins.</span></a> to sign in to <span class="okta-variablesProductName">Okta</span>. with their AD&#160;credentials.</li>
                                                        <li value="2"><b>The import schedule set to never</b> — Specifies how users and groups are imported from AD  into <span class="okta-variablesProductName">Okta</span>.</li>
                                                        <li value="3"><b><a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">Profile mastering<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>Mastering is a more sophisticated version of read (import) users. Mastering defines the flow and maintenance of user-object attributes and their lifecycle state. When a profile is mastered from a given resource (application or directory), the Okta user profile’s attributes and lifecycle state are derived exclusively from that resource. In other words, an Okta user mastered by Active Directory (or HR system) has an Okta profile. However, the profile isn’t editable in Okta by the user or Okta admin, and derives its information exclusively from Active Directory. If the lifecycle state of the user in Active Directory moves to Disabled, the linked Okta user also switches to the corresponding lifecycle state of Deactivated on the next the read (import).</span></a></b>  — Identifies which application is the source of truth for user data. By default, AD is the <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">profile master<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A profile master is an application (usually a directory service such as Active Directory, or human capital management system such as Workday) that acts as a source of truth for user profile attributes. A user can only be mastered by a single application or directory at any one time. For more details, see the Profile Master page.

When users are mastered by attribute, we call this attribute-level mastery (ALM). ALM delivers finer grain control over how profiles are mastered by allowing admins to specify different profile masters for individual attributes. Profile mastering only applies to Okta user profiles, not app user profiles. For more details, see Attribute Level Mastering.</span></a> when the agent is installed.</li>
                                                    </ul>
                                                    <p>AD integration includes the following tasks:</p>
                                                    <ul>
                                                        <li value="1"><a href="ad-agent-install.htm">Installing and configuring the <span class="okta-feature-namesAD agent short">Okta AD agent</span></a>. This includes: <ul><li value="1"><a href="ad-agent-install.htm#Requirements">Understanding the installation requirements</a>.</li><li value="2"><a href="ad-agent-install.htm#Installi">Installing the <span class="okta-feature-namesAD agent short">Okta AD agent</span> on the host server</a>.</li><li value="3"><a href="ad-agent-install.htm#ADimportprov">Configuring import and account settings</a>.</li><li value="4"><a href="ad-agent-install.htm#Provisioning">Setting the optional provisioning settings</a>. This includes <a href="ad-agent-install.htm#ProfileMaster">configuring profile master</a> and lifecycle settings and <a href="ad-agent-install.htm#SyncPassword">configuring Sync Password</a>.</li></ul></li>
                                                        <li value="2"><a href="directory-AD-importusers.htm">Importing AD users</a>. This includes:<ul><li value="1">Importing AD users using one of these methods:&#160;<a href="directory-AD-importusers.htm#Onetime">importing AD users	on demand</a>, <a href="directory-AD-importusers.htm#Scheduled">scheduled imports</a>, <a href="directory-AD-importusers.htm#UsingEnablingJIT">just in time (JIT) provisioning</a>.</li><li value="2"><a href="directory-AD-importusers.htm#Confirm">Confirming imported user assignments</a>.</li><li value="3"><a href="directory-AD-importusers.htm#Activateusers">Activating user accounts</a>.</li></ul></li>
                                                        <li value="3">Optional tasks:<ul><li value="1"><a href="ad-agent-update.htm#Uninstall">Uninstalling the <span class="okta-feature-namesAD agent short">Okta AD agent</span></a>.</li><li value="2"><a href="ad-agent-install-multiple.htm#top">Installing multiple Okta Active Directory (AD) agents.</a></li><li value="3"><a href="ad-agent-register-multipledomains.htm">Registering multiple domains to an Okta Active Directory (AD) agent.</a></li><li value="4"><a href="ad-agent-install.htm#TROUBLES">Troubleshooting</a>.</li></ul></li>
                                                    </ul>
                                                    <p>After completing your initial AD&#160;integration and importing users, these optional topics might be of interest:</p>
                                                    <ul>
                                                        <li value="1"><a href="directory-AD-attribute-mapping.htm">Customizing the AD user profiles and attributes</a>. This includes:<ul><li value="1"><a href="directory-AD-attribute-mapping.htm#AddRemCustAttrib">Adding and removing custom AD attributes.</a></li><li value="2"><a href="directory-AD-attribute-mapping.htm#BaseADAttrib">Reviewing the base AD attributes.</a></li><li value="3"><a href="directory-AD-attribute-mapping.htm#ADattribmappings">Reviewing AD attribute mappings.</a></li><li value="4"><a href="directory-AD-attribute-mapping.htm#Mappingattribs">Mapping profile attributes.</a></li><li value="5"><a href="directory-AD-attribute-mapping.htm#Expressions">Configuring and managing expressions.</a></li></ul></li>
                                                        <li value="2">Understanding <span class="okta-variablesProductName">Okta</span> user profile and attribute functionality. This includes:<ul><li value="1"><a href="directory-UD-profile-editor-con.htm">Learning more about Universal Directory and user profiles.</a></li><li value="2"><a href="directory-UD-profile-editor-con.htm#Mappings">Understanding attribute mappings.</a></li><li value="3"><a href="directory-UD-profile-editor-con.htm#Expressions">Expression language transformations.</a></li><li value="4"><a href="directory-UD-profile-editor-con.htm#UsernameOverrides">Username overrides.</a></li><li value="5"><a href="directory-UD-profile-editor-con.htm#RichSAML">Rich SAML assertions.</a></li><li value="6"><a href="eu-profile_editor_tasks.htm">Working with user profiles.</a></li></ul></li>
                                                        <li value="3">Learning about Profile Masters and Attribute Level Mastering. This includes:<ul><li value="1"><a href="eu-profile-masters.htm">Understanding and setting profile masters.</a></li><li value="2"><a href="eu-attribute-level-mastering.htm">Configuring Attribute-level Mastering (ALM).</a></li></ul></li>
                                                        <li value="4"><a href="../Security/Security_Policies.htm">Learning about Okta security policies.</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <h2><a name="Two"></a>Integration implementation options</h2>
                                                <p>How you implement your <span class="okta-variablesProductName">Okta</span> AD integration is dependent on the size of your organization, your business requirements, and the <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">scope<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A scope is an indication by the client that it wants to access some resource.</span></a> of your deployment. In general, there are two main approaches:</p>
                                                <ul>
                                                    <li value="1"><b>Proof of Concept (POC) or simple deployment</b>   — If you're doing a POC or  a simple AD integration, you'll probably want to install the <span class="okta-feature-namesAD agent short">Okta AD agent</span>, import some users, and configure basic settings. You may not need high availability (HA) or disaster recovery (DR) options, or be concerned about the attributes you import from your AD user profiles into <span class="okta-variablesProductName">Okta</span>.</li>
                                                    <li value="2"><b>Large scale enterprise deployment</b>   — For large enterprise deployments, it is likely that you'll want to do some planning before installing the <span class="okta-feature-namesAD agent short">Okta AD agent</span> and importing user data.</li>
                                                </ul>
                                                <p>You can adjust your configuration options and make changes as your implementation evolves. There are a number of topics to help you plan your implementation, including:</p>
                                                <ul>
                                                    <li value="1">Agent performance information</li>
                                                    <li value="2">High Availability (HA) and Disaster Recovery (DR)</li>
                                                    <li value="3">AD Domains and Cross-forest scenarios</li>
                                                </ul>
                                                <p>These diagrams illustrate the two most common AD integration scenarios.</p>
                                                <div class="MCDropDown MCDropDown_Closed dropDown dropDownSecondLevel"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCDropDownHotSpot_SecondLevel MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />
                            AD single forest and single domain deployment                        </a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>
                                                            <img src="../../Resources/Images/AD_singledomain.png" />
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="MCDropDown MCDropDown_Closed dropDown dropDownSecondLevel"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCDropDownHotSpot_SecondLevel MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />
                            AD single forest and multiple domain deployment                            
                        </a></span>
                                                    <div class="MCDropDownBody dropDownBody">
                                                        <p>
                                                            <img src="../../Resources/Images/AD_multiple_domain.png" />
                                                        </p>
                                                    </div>
                                                </div>
                                                <h2><a name="High"></a>High availability and disaster recovery</h2>
                                                <p>The unique requirements of your <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">org<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>The Okta container that represents a real-world organization.</span></a> determine how you implement high availability (HA)&#160;and disaster recovery (DR) processes. These guidelines are intended to help you determine what options are available.</p>
                                                <p>The <span class="okta-feature-namesAD agent short">Okta AD agent</span> does not perform load balancing. Traffic is directed to the first available agent.</p>
                                                <p>To get started, you'll need to answer the following questions:</p>
                                                <ul>
                                                    <li value="1">Who owns your organization's DR or HA processes and who needs to be consulted?</li>
                                                    <li value="2">How many data centers do you have?&#160;<ul><li value="1">How are they used?&#160;That is, which ones are live (hot) all the time and which ones are backups (cold).</li><li value="2">What kind of fail over do you want to plan for?&#160;You can have agent redundancy, in the event an individual agent fails. Or you can plan for the failure of an entire data center (that is, all agents in that data center).</li><li value="3">Are the AD <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">domain<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>A domain is an attribute of an Okta organization. Okta uses a fully-qualified domain name, meaning it always includes the top-level domain (.com, .eu, etc.), but does not include the protocol (https).</span></a> controllers live all the time?</li><li value="4">Are they actively replicated to?</li><li value="5">Is there a significant latency in replication between the data centers? This can cause replication problems.</li></ul></li>
                                                </ul>
                                                <h3>Use case</h3>
                                                <p>A use case is often the best way to demonstrate how high availability and a good disaster recovery plan can help your organization get the best out of its AD integration. In this use case, Example Corp has three data centers:</p>
                                                <ul>
                                                    <li value="1">A physical data center in Atlanta that is always available.</li>
                                                    <li value="2">An Amazon AWS data center that is always available.</li>
                                                    <li value="3">A cold backup data center that is used for disaster recovery if the two live data centers are unavailable.</li>
                                                </ul>
                                                <p>With the integration, it does not matter whether the data centers are physical or virtual instances. They are assigned the same significance. </p>
                                                <p>If the Atlanta and AWS data centers are always available, and each instance has one or more AD agents installed, then traffic is routed to the active agents, regardless of their location. </p>
                                                <p>AD agents installed on the cold data center servers are listed as inactive in the Okta <a href="javascript:void(0);" class="MCTextPopup MCTextPopupHotSpot MCTextPopup_Open MCTextPopupHotSpot_ MCTextPopupHotSpot_Popup #text #textPopup">admin<span class="MCTextPopupBody popupBody"><span class="MCTextPopupArrow"></span>An abbreviation of administrator. This is the individual(s) who have access to the Okta Administrator Dashboard. They control the provisioning and deprovisioning of end users, the assigning of apps, the resetting of passwords, and the overall end user experience. Only administrators have the Administration button on the upper right side of the My Applications page.</span></a> dashboard. After 30 days of inactivity, the assigned API tokens expires. If Example Corp needs to route traffic to their cold backup data center, they'll need to re-install the AD agents. For this reason, Okta recommends that Example Corp install the AD agents on their cold data center servers when they are needed.</p>
                                                <p>To determine the number of agents Example Corp should install in each data center, they'll need to consider what their fault tolerance is and what high availability or disaster recovery scenarios they want to prepare for:</p>
                                                <ul>
                                                    <li value="1">The Atlanta data center experiences full failure, traffic moves to the Amazon AWS data center. If Amazon AWS fails, traffic moves to the cold data center.</li>
                                                    <li value="2">If either Atlanta or Amazon AWS fail, the cold data center is brought online.</li>
                                                </ul>
                                                <p>
                                                    <p>Installing a single AD agent in each data center increases risk. Installing two or more agents allows for recovery if one agent fails. The number of active users influences recovery performance.</p>
                                                </p>
                                                <p>Answering these questions can help you determine a strategy for your AD integration:</p>
                                                <ul>
                                                    <li value="1">What is our risk tolerance?&#160;</li>
                                                    <li value="2">Are you planning for individual agents, the machines they are installed on, or entire data centers to be unavailable?&#160;</li>
                                                    <li value="3">How do the Okta recommendations fit in with your existing high availability or disaster recovery procedures?&#160;</li>
                                                </ul>
                                                <h2><a name="AD"></a>Active Directory forests and domains</h2>
                                                <p>When planning your AD integration, review your existing AD implementation and answer these questions:</p>
                                                <ul>
                                                    <li value="1">How many domains do you have?</li>
                                                    <li value="2">What kind of trusts are in place?</li>
                                                    <li value="3">What forests do you have?</li>
                                                    <li value="4">Which OUs do you plan to import into Okta?&#160;</li>
                                                    <li value="5">Are there users or resources in those OUs that you do not need to import into Okta?</li>
                                                </ul>
                                                <p>The <span class="okta-feature-namesAD agent short">Okta AD agent</span> does support communication across domains. However, the <span class="okta-feature-namesAD agent short">Okta AD agent</span> cannot communicate across forests.</p>
                                                <p>An agent must be installed in each forest and each domain in a forest where there are users you intend to import into Okta. While is it possible  to register multiple domains to a single agent, be aware that if the agent goes down, all domains will be impacted.</p>
                                                <p>Resource forests do not need agents installed in them because there are typically no users in the forest, just network resources. </p>
                                                <p>Installing the <span class="okta-feature-namesAD agent short">Okta AD agent</span> requires the use of an AD service account. It is important that the service account has permissions in all domains in that forest to read and access users in all domains to which the agent connects. For details about the service accounts required to install the agent, see <a href="ad-agent-install.htm#AccountReqs">Accounts required for AD agent installation</a>. </p>
                                                <h2><a name="Preparin"></a>Prepare Active Directory for the integration</h2>
                                                <p>Before you begin your AD integration, select the AD attributes that you want to synchronize with or your downstream applications and make sure that your organization is using those attributes for their intended purpose. If you are mapping the same data from two or more domains into one, make sure the data is consistent. If your domains share an attribute and it is used for different values, it can create a problem when the attribute is merged into <span class="okta-variablesProductName">Okta</span>.</p>
                                                <p>For example, a custom attribute "Attribute 1" is being used in Domain A to store users' employee badge numbers and on Domain B it is being used to store the last four digits of their corporate credit card. When Domain A and Domain B users are mapped into Okta, Attribute 1 is mapped as a single attribute in Okta. However, depending on the user being referenced, the attribute value refers to two different data types. To avoid a similar issue:</p>
                                                <ul>
                                                    <li value="1">Make sure that the attribute values are consistent across different domains.</li>
                                                    <li value="2">Create different attribute mappings between Okta and each of your ad domains. Okta recommends that you make your attribute values consistent at a later date.</li>
                                                    <li value="3">Take advantage of <a href="eu-attribute-level-mastering.htm#top">Attribute Level Mastering</a>.</li>
                                                </ul>
                                                <h2><a name="Import"></a>Import considerations</h2>
                                                <p>Bring only the attributes that you require into <span class="okta-variablesProductName">Okta</span>. For example, if you have a t-shirt size attribute in AD, but you do not need the attribute in <span class="okta-variablesProductName">Okta</span> or in any of your down-stream applications, do not import the attribute into the user profile. You can add more attributes later as you need them. </p>
                                                <p>Removing attribute mappings is more difficult. If you remove attribute mapping, <span class="okta-variablesProductName">Okta</span> retains previously imported data. To remove attribute data in Okta, you need to intentionally map a blank value to the attribute in the user profile. </p>
                                                <h2><a name="Agent"></a>Agent install and update recommendations</h2>
                                                <p>Installing the <span class="okta-feature-namesAD agent short">Okta AD agent</span> requires the use of an AD service account. It is important that the service account has permissions in all domains in that forest to read and access users in all domains to which the agent connects. </p>
                                                <p>In general, Okta recommends you use the same AD service account to install all of your agents. This simplifies maintenance on the service account itself such as password rotation, so that the agent isn't negatively impacted.</p>
                                                <p>Planning for agent updates will depend on your current change management process. Treat an agent update the same as any standard server patch process. Update each agent one or two at a time, sequentially and consistently. Avoid taking all agents down at the same time. </p>
                                                <p>Agent updates can be installed over existing agents. There is no need to uninstall the existing agent first. It is possible to uninstall the existing agent and install the updated agent version. However, this requires additional steps to ensure a complete and clean uninstall. </p>
                                                <p>As with all updates and configuration changes, Okta recommends that you upgrade your Okta Preview environment first to ensure everything is working correctly before upgrading your Production environment.</p>
                                                <hr width="100%" size="0" align="center" />
                                                <h2>Related topics</h2>
                                                <p><a href="Directory_AD_disconnect_users.htm" class="MCXref xref" xrefformat="{para}">Disconnect users from Active Directory</a><![CDATA[
				]]></p>
                                                <p><a href="Configuring_Desktop_SSO.htm" class="MCXref xref" xrefformat="{para}">Install and configure the Okta IWA&#160;Web agent for Desktop Single Sign-on</a>
                                                </p>
                                                <p><a href="Configuring_Agentless_SSO.htm" class="MCXref xref" xrefformat="{para}">Configure a new Agentless Desktop Single Sign-on  implementation</a>
                                                </p>
                                                <p><a href="Installing_Configuring_Active_Directory_Password_Sync_Agent.htm" class="MCXref xref" xrefformat="{para}">Synchronize passwords from Active Directory to Okta</a>
                                                </p>
                                                <!-- Back to Top button --><a href="#" class="sf-back-to-top"><span class="arrow"></span>Top</a>
                                            </div>
                                        </div>
                                        <!-- *** Col3: Right menu Col *** -->
                                        <div class="is-not-in-mobile">
                                            <div data-sticky-container="" id="dgMk8DP_Eki3E9HgkRzVhQ">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="dgMk8DP_Eki3E9HgkRzVhQ:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                    <ul class="nocontent menu _Skins_okta_right_menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/okta_TOC.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="False" data-mc-include-parent="True" data-mc-toc="True">
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ***************************** Footer rows ********************************* -->
                                    <div class="footer-temp">
                                        <div class="is-not-in-mobile">
                                            <p> </p>
                                        </div>
                                        <div>
                                            <p class="copyright">©  <span class="okta-variablesYear">2020</span> <span class="okta-variablesCompanyName">Okta, Inc</span> All Rights Reserved. Various trademarks held by their respective owners.</p>
                                        </div>
                                    </div>
                                    <!-- ***************************** Scripts ************************************* -->
                                    <!-- Foundation -->
                                    <script src="../../Resources/Scripts/js/app.js">
                                    </script>
                                    <script src="../../Resources/Scripts/js/vendor/what-input.js">
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.4-rc1/js/foundation.min.js">
                                    </script>
                                    <!-- Ours -->
                                    <script type="text/javascript" src="../../Resources/Scripts/back-to-top.js">
                                    </script>
                                    <script type="text/javascript" src="../../Resources/Scripts/get-feedback.js">
                                    </script>
                                    <!-- Coveo -->
                                    <script src="https://static.cloud.coveo.com/searchui/v2.5395/js/CoveoJsSearch.Lazy.min.js">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/cultures/en.js" id="coveoCultureScript">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.RequireJS.js" id="coveoRequireScript">
                                    </script>
                                    <script src="../../Resources/Scripts/coveo-resources/js/Coveo.MadcapFlare.Okta.js" id="coveoInitscript">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>